(this.webpackJsonpindiclawadmin=this.webpackJsonpindiclawadmin||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),o=a.n(s),l=(a(71),a(72),a(73),a(8)),i=a(9),c=a(11),u=a(10),m=(a(74),a(15)),d=a(4),g=a(124),h=a(125),p=a(126),E=a(127),f=a(128),S=a(129),b=a(130),v=a(31),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{storageUrl:"https://devstorage.indiclaw.com",apiUrl:"https://api-indiclaw.herokuapp.com"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"saveLoginAuth":return e.auth=t.payload,Object(v.a)(Object(v.a)({},e),{},{auth:t.payload});case"saveRefreshToken":return e.token=t.payload,Object(v.a)(Object(v.a)({},e),{},{token:t.payload});case"getLoginAuth":case"getAPIUrl":case"getStorageUrl":default:return e}},y=a(29),C=a(63),x=Object(y.c)(w,Object(y.a)(C.a)),k=a(19);function L(e){return{type:"saveLoginAuth",payload:e}}var N=a(13),I=a(2),O=a.n(I),j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).toggle=function(){n.setState({isOpen:!n.state.isOpen})},n.isLoggedIn=function(){return void 0===x.getState().auth||""===x.getState().auth?r.a.createElement(g.a,{className:"ml-auto",navbar:!0},r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},to:"/login"},"Login"))):r.a.createElement(g.a,{className:"ml-auto",navbar:!0},r.a.createElement(h.a,null,r.a.createElement(p.a,{color:"link",onClick:function(e){O.a.post(x.getState().apiUrl+"/users/logout",{token:localStorage.getItem("token")}).then((function(e){e.data.status&&(n.props.saveAuth(void 0),localStorage.setItem("token",void 0),console.log(localStorage.getItem("token")))}))}},"logout")))},n.state={isOpen:!1},n.toggle=n.toggle.bind(Object(d.a)(n)),n.isLoggedIn=n.isLoggedIn.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,{color:"light",light:!0,expand:"md"},r.a.createElement(f.a,null,"Indic Law"),r.a.createElement(S.a,{onClick:this.toggle}),r.a.createElement(b.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(g.a,{className:"mr-auto",navbar:!0},r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/digest"},"Digest")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/course"},"Courses")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/question"},"Questions")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/mentor"},"Mentors")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/whatsnew"},"Whats new")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/blog"},"Blogs")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/team"},"Team")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/admin"},"Admins")),r.a.createElement(h.a,null,r.a.createElement(N.b,{style:{color:"grey"},className:"m-3",to:"/storage"},"Image Storage"))),this.isLoggedIn())))}}]),a}(r.a.Component),D=Object(k.b)((function(e){return{auth:e}}),(function(e){return{saveAuth:function(t){return e(L(t))}}}))(j),T=a(5),Q=a.n(T),U=a(14),q=a(149),A=a(136),M=a(137),F=a(138),V=a(139),_=a(140),P=a(141),R=a(142),B=a(131),W=a(132),Y=a(133),H=a(134),G=a(135),J=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(Y.a,null,this.props.data.title),r.a.createElement(H.a,null,this.props.data.digestType),r.a.createElement(G.a,{dangerouslySetInnerHTML:{__html:this.props.data.news}}),r.a.createElement(N.b,{to:{pathname:"digest/edit",state:{digest:this.props.data,isEdit:!0}}},r.a.createElement(p.a,null,"Edit")))))}}]),a}(r.a.Component),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getDigests()},n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.getDigests=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=3;break}return e.next=3,O.a.get(x.getState().apiUrl+"/digest",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({digests:e.data.digests}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return null!=x.getState().auth?r.a.createElement("div",null):r.a.createElement(m.a,{to:"/login"})},n.state={digests:[],apiError:"",isLoading:!0},n.getDigests=n.getDigests.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this;return null!=this.state.digests&&void 0!==this.state.digests&&(e=this.state.digests.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(J,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"digest/edit",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New Digest"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Digests"),r.a.createElement(F.a,{className:"mt-3"},e),this.renderError(),r.a.createElement(_.a,{"aria-label":"Page navigation example"},r.a.createElement(P.a,null,r.a.createElement(R.a,{first:!0,onClick:function(e){O.a.get(x.getState().apiUrl+"/digest").then((function(e){e.data.status&&t.setState({digests:e.data.digests})}))}})),r.a.createElement(P.a,null,r.a.createElement(R.a,{next:!0,onClick:function(e){var a=t.state.digests[t.state.digests.length-1].dateCreated;O.a.get(x.getState().apiUrl+"/digest?lastDate="+a).then((function(e){e.data.status&&t.setState({digests:e.data.digests})}))}})))),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),$=Object(k.b)((function(e){return{auth:e}}),(function(e){return{saveAuth:function(t){return e(L(t))}}}))(z),K=a(17),X=a(143),Z=a(144),ee=a(145),te=a(146),ae=a(147),ne=a(22),re=a.n(ne),se=a(23),oe=a.n(se),le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){""===n.state.url&&(console.log("storage call"),O.a.get(x.getState().storageUrl+"/"+n.props.parameter+"/"+n.props.imageId,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status&&n.setState({url:e.data.url})})))},n.state={url:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("img",{style:{maxHeight:"150x",maxWidth:"250px"},src:this.state.url,alt:"explanation"})}}]),a}(r.a.Component),ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{style:{zIndex:"5",margin:"auto",position:"absolute",top:"100px",left:"100px",bottom:"100px",right:"50px",height:"50px",width:"50px"},color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToDigests=function(){return n.state.success?r.a.createElement(m.a,{to:"/digest"}):r.a.createElement("p",null)},n.submitDigest=function(){n.setState({digestImage:"",image:""},(function(){null!=n.props.state.location&&n.props.state.location.state.isEdit?void 0!==x.getState().auth&&O.a.put(x.getState().apiUrl+"/digest/"+n.props.state.location.state.digest._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0}):n.setState({apiError:e.data.message,isLoading:!1})})):void 0!==x.getState().auth&&O.a.post(x.getState().apiUrl+"/digest",n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0}):n.setState({apiError:e.data.message,isLoading:!1})}))}))},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){var e=Object(U.a)(Q.a.mark((function e(t){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0,isSubmitting:!0}),a=new FormData,null===n.state.removeImageId||void 0===n.state.removeImageId||""===n.state.removeImageId){e.next=13;break}if(null===n.state.digestImage||void 0===n.state.digestImage||""===n.state.digestImage){e.next=9;break}return a.append("digestImage",n.state.digestImage),e.next=7,O.a.put(x.getState().storageUrl+"/digest/"+n.state.removeImageId,a,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status&&(n.setState({imageId:e.data.imageId}),n.submitDigest())}));case 7:e.next=11;break;case 9:return e.next=11,O.a.delete(x.getState().storageUrl+"/digest/"+n.state.removeImageId,{headers:{auth:x.getState().auth}}).then((function(e){(e.data.status||"file not found"===e.data.message)&&n.submitDigest()})).catch((function(e){n.submitDigest()}));case 11:e.next=20;break;case 13:if(null===n.state.digestImage||void 0===n.state.digestImage||""===n.state.digestImage){e.next=19;break}return a.append("digestImage",n.state.digestImage),e.next=17,O.a.post(x.getState().storageUrl+"/digest",a,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status&&(n.setState({imageId:e.data.imageId}),n.submitDigest())}));case 17:e.next=20;break;case 19:n.submitDigest();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(){void 0!==x.getState().auth&&O.a.delete(x.getState().apiUrl+"/digest/"+n.props.state.location.state.digest._id,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0}):n.setState({apiError:e.data.message})})).catch((function(e){console.log(e)}))},n.handleFile=function(e){if(null!==n.state.imageId&&void 0!==n.state.imageId&&""!==n.state.imageId&&(n.setState({removeImageId:n.state.imageId}),n.setState({imageId:""})),n.setState({digestImage:e.target.files[0]}),e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}n.setState({apiError:""})},n.uploadImage=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n.removeImage=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({digestImage:""}),null!==n.state.imageId&&void 0!==n.state.imageId&&""!==n.state.imageId&&(n.setState({removeImageId:n.state.imageId}),n.setState({imageId:""},(function(){})));case 2:case"end":return e.stop()}}),e)}))),n.renderImagePart=function(){return null!=n.state.imageId&&""!==n.state.imageId||null!=n.state.digestImage&&""!==n.state.digestImage?null!=n.state.imageId&&""!==n.state.imageId||null==n.state.digestImage&&""===n.state.digestImage?null!==n.state.imageId&&void 0!==n.state.imageId&&""!==n.state.imageId&&!1===n.state.isSubmitting&&null==n.state.digestImage?r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12",className:"mb-3"},r.a.createElement(B.a,null,r.a.createElement(le,{parameter:"digest",imageId:n.state.imageId}),r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Choose file and upload to change Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:n.handleFile})),r.a.createElement(p.a,{className:"ml-1",color:"danger",onClick:n.removeImage},"Remove this Image"))))):void 0:r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12",className:"mb-3"},r.a.createElement(B.a,null,r.a.createElement(te.a,{top:!0,style:{maxWidth:"500px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.image}),r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Choose file to change Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:n.handleFile})),r.a.createElement(p.a,{className:"ml-1",color:"danger",onClick:n.removeImage},"Remove this Image"))))):r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"4"}),r.a.createElement(M.a,{lg:"4",className:"m-3"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:n.handleFile}))))))},n.populateFields=function(){return"CurrentAffairs"===n.state.digestType||"History"===n.state.digestType?r.a.createElement(F.a,{className:"mt-3"},r.a.createElement(M.a,{lg:"3"}),r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,{className:"mt-2"},"Learnings"),r.a.createElement(W.a,null,r.a.createElement(re.a,{editor:oe.a,data:n.state.learnings,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({learnings:a})},onBlur:function(e,t){},onFocus:function(e,t){}}))))):"Judgements"===n.state.digestType?r.a.createElement(F.a,{className:"mt-3"},r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,{className:"mt-2"},"Laws"),r.a.createElement(W.a,null,r.a.createElement(re.a,{editor:oe.a,data:n.state.laws,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({laws:a})},onBlur:function(e,t){},onFocus:function(e,t){}})))),r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,{className:"mt-2"},"Ratio"),r.a.createElement(W.a,null,r.a.createElement(re.a,{editor:oe.a,data:n.state.ratio,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({ratio:a})},onBlur:function(e,t){},onFocus:function(e,t){}}))))):"Bills/Laws"===n.state.digestType?r.a.createElement(F.a,{className:"mt-3"},r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,{className:"mt-2"},"Features"),r.a.createElement(W.a,null,r.a.createElement(re.a,{editor:oe.a,data:n.state.features,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({features:a})},onBlur:function(e,t){},onFocus:function(e,t){}})))),r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,{className:"mt-2"},"Dialogue"),r.a.createElement(W.a,null,r.a.createElement(re.a,{editor:oe.a,data:n.state.dialogue,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({dialogue:a})},onBlur:function(e,t){},onFocus:function(e,t){}}))))):void 0},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t})},n.onMetaChange=function(e){var t=n.state.meta;t[e.target.name]=e.target.value,n.setState({meta:t})},n.renderTags=function(){if(null!==n.props.state.location&&"new"===n.props.state.location.state)return r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:n.state.tags.whatsNew||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"whatsNew"},"Whats new")),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"other",id:"other",value:n.state.tags.other||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"other"},"Other")))},n.renderMeta=function(){return r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(Z.a,{for:"title"},"Title"),r.a.createElement(ee.a,{type:"text",name:"title",id:"title",value:n.state.meta.title||"",onChange:n.onMetaChange}))),r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(Z.a,{for:"image"},"Image"),r.a.createElement(ee.a,{type:"text",name:"image",id:"image",value:n.state.meta.image||"",onChange:n.onMetaChange}))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"textarea",name:"description",id:"description",value:n.state.meta.description||"",onChange:n.onMetaChange}))))},null!==n.props.state.location&&"new"!==n.props.state.location.state?(n.state={title:"",digestType:"",news:"",context:"",learnings:"",laws:"",ratio:"",features:"",dialogue:"",tags:{},meta:{},success:!1,apiError:"",isLoading:!0,isSubmitting:!1},void 0!==x.getState().auth&&O.a.get(x.getState().apiUrl+"/digest/"+n.props.state.location.state.digest._id,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState(e.data.digest),n.setState({success:!1,digestType:n.props.state.location.state.digest.digestType,isLoading:!1,tags:{}})):n.setState({apiError:e.data.message,isLoading:!1})}))):n.state={title:"",digestType:"CurrentAffairs",news:"",context:"",learnings:"",laws:"",ratio:"",features:"",dialogue:"",tags:{},meta:{},success:!1,apiError:"",isLoading:!1,isSubmitting:!1},n.populateFields=n.populateFields.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.redirectToDigests=n.redirectToDigests.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.renderImagePart=n.renderImagePart.bind(Object(d.a)(n)),n.handleFile=n.handleFile.bind(Object(d.a)(n)),n.uploadImage=n.uploadImage.bind(Object(d.a)(n)),n.submitDigest=n.submitDigest.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(V.a,null,r.a.createElement("h1",null,"Digest Editor"),this.renderImagePart(),r.a.createElement(ae.a,{className:"mt-4"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"digestType",sm:2},"Category"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{type:"select",name:"digestType",id:"digestType",value:this.state.digestType,onChange:this.handleChange},r.a.createElement("option",null,"CurrentAffairs"),r.a.createElement("option",null,"Judgements"),r.a.createElement("option",null,"Bills/Laws"),r.a.createElement("option",null,"History"))))),r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"title",sm:2},"Title"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{type:"text",name:"title",id:"title",value:this.state.title,onChange:this.handleChange})))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"description",sm:1},"Description"),r.a.createElement(M.a,{sm:11},r.a.createElement(ee.a,{type:"textarea",rows:"3",name:"description",id:"description",value:this.state.description,onChange:this.handleChange})))),r.a.createElement(M.a,{lg:"6"},this.renderTags()),r.a.createElement(M.a,{lg:"6"},this.renderMeta()))),r.a.createElement(F.a,{className:"mt-4"},r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,{className:"mt-2"},"News"),r.a.createElement(W.a,null,r.a.createElement(re.a,{editor:oe.a,data:this.state.news,onInit:function(e){},onChange:function(t,a){var n=a.getData();e.setState({news:n})},onBlur:function(e,t){},onFocus:function(e,t){}})))),r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,{className:"mt-2"},"Context"),r.a.createElement(W.a,null,r.a.createElement(re.a,{editor:oe.a,data:this.state.context,onInit:function(e){},onChange:function(t,a){var n=a.getData();e.setState({context:n})},onBlur:function(e,t){},onFocus:function(e,t){}}))))),this.populateFields(),r.a.createElement(F.a,{className:"m-4"},r.a.createElement(M.a,{className:"lg-2"},r.a.createElement(p.a,{color:"danger",onClick:this.handleDelete},"Delete")),r.a.createElement(M.a,{className:"lg-2"},r.a.createElement(p.a,{color:"primary",onClick:this.handleSubmit},"Submit"))),this.checkLogin(),this.renderSpinner(),this.renderError(),this.redirectToDigests())}}]),a}(r.a.Component),ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).loginUsingToken=Object(U.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,O.a.post(x.getState().apiUrl+"/users/token",{token:t}).then((function(e){console.log(e.data),!0===e.data.status?(n.props.saveAuth(e.headers.auth),n.setState({success:!0,isLoading:!1})):n.setState({success:!1,isLoading:!1})}));case 3:case"end":return e.stop()}}),e)}))),n.redirect=function(){if(n.state.success)return r.a.createElement(m.a,{to:"/digest"})},n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){n.state.isLogin?(n.setState({isLoading:!0}),O.a.post(x.getState().apiUrl+"/users/login",n.state).then((function(e){console.log(e.data),!0===e.data.status?(n.props.saveAuth(e.headers.auth),n.props.saveRefreshToken(e.data.token),localStorage.setItem("token",e.data.token),void 0!==x.getState().auth?n.setState({success:!0}):(n.setState({apiError:"Could not log you in"}),n.setState({isLoading:!1}))):"already logged in on two other devices"===e.data.message?O.a.post(x.getState().apiUrl+"/users/verified-logout",{phone:n.state.phone,verificationMethod:"102"}).then((function(e){console.log(e.data),e.data.status?n.setState({apiError:"Already logged in 2 devices, verify phone number to logout",isLogin:!1,isLoading:!1}):n.setState({apiError:"Already logged in 2 devices",isLoading:!1})})):null!==e.data.message?(n.setState({apiError:e.data.message}),n.setState({isLoading:!1})):(n.setState({apiError:"Could not log you in"}),n.setState({isLoading:!1}))}))):O.a.post(x.getState().apiUrl+"/users",n.state).then((function(e){})).then((function(){O.a.post(x.getState().apiUrl+"/users/login",n.state).then((function(e){!0===e.data.status?(n.props.saveAuth(e.headers.auth),n.props.saveRefreshToken(e.data.token),void 0!==x.getState().auth?n.setState({success:!0}):n.setState({apiError:"Could not log you in"})):null!==e.data.message?n.setState({apiError:e.data.message}):n.setState({apiError:"Could not log you in"})}))}))},n.renderForm=function(){return n.state.isLogin?r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"phone"},"Phone"),r.a.createElement(ee.a,{type:"text",name:"phone",id:"phone",placeholder:"Enter phone number",onChange:n.handleChange})),r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"password"},"Password"),r.a.createElement(ee.a,{type:"password",name:"password",id:"password",placeholder:"password",onChange:n.handleChange})),r.a.createElement(p.a,{color:"primary",onClick:n.handleSubmit},"Submit"),r.a.createElement("br",null))):r.a.createElement("div",null,r.a.createElement("h2",null,"Verify"),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"otp"},"OTP"),r.a.createElement(ee.a,{type:"text",name:"otp",id:"otp",placeholder:"Enter otp",onChange:n.handleChange})),r.a.createElement(p.a,{color:"primary",onClick:function(e){n.setState({isLoading:!0}),O.a.post(x.getState().apiUrl+"/users/verify-otp-logout",{otp:n.state.otp,phone:n.state.phone}).then((function(e){e.data.status?n.setState({apiError:"",isLogin:!0,isLoading:!1}):n.setState({apiError:"Could not verify otp",isLogin:!0,isLoading:!1})}))}},"Verify"),r.a.createElement("br",null)))},n.state={isLogin:!0,apiError:"",isLoading:!0},n.renderForm=n.renderForm.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.redirect=n.redirect.bind(Object(d.a)(n)),n.loginUsingToken(),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,{className:"mt-5"},r.a.createElement(F.a,null,r.a.createElement(M.a,{className:"col-lg-3"}),r.a.createElement(M.a,{className:"col-lg-6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,null),r.a.createElement(W.a,null,this.renderForm()))),r.a.createElement(M.a,{className:"col-lg-3"})),this.redirect(),this.renderError(),this.renderSpinner())}}]),a}(r.a.Component),ue=Object(k.b)((function(e){return{auth:e}}),(function(e){return{saveAuth:function(t){return e(L(t))},saveRefreshToken:function(t){return e(function(e){return{type:"saveRefreshToken",payload:e}}(t))}}}))(ce),me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(Y.a,null,this.props.data.name),r.a.createElement(H.a,null,this.props.data.type),r.a.createElement(G.a,null,this.props.data.description),r.a.createElement(N.b,{to:{pathname:"question/view",state:{questionCollectionId:this.props.data._id}}},r.a.createElement(p.a,null,"View")))))}}]),a}(r.a.Component),de=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.getQuestionCollections=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=3;break}return e.next=3,O.a.get(x.getState().apiUrl+"/questions",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({questionCollections:e.data.collections}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={questionCollections:[],apiError:"",isLoading:!0},n.getQuestionCollections=n.getQuestionCollections.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.getQuestionCollections(),n}return Object(i.a)(a,[{key:"render",value:function(){var e;return null!=this.state.questionCollections&&void 0!==this.state.questionCollections&&(e=this.state.questionCollections.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(me,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"question/new",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New Collection"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Question Collections"),r.a.createElement(F.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),ge=Object(k.b)((function(e){return{auth:e}}),(function(e){return{getAuth:function(){return e({type:"getLoginAuth"})}}}))(de),he=a(65),pe=a.n(he),Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderExplanation=function(e,t){if(e.explanation){for(var a=[{type:"text",content:""}],s=0;s<e.explanation.length;){if("~"===e.explanation[s])if(s++,"~"===e.explanation[s]){s++;for(var o="";"~"!==e.explanation[s]&&s<=e.explanation.length;)o=o.concat(e.explanation[s]),s++;s+=2,a.push({type:"image",content:o}),a.push({type:"text",content:""})}else{for(var l="";"~"!==e.explanation[s]&&s<=e.explanation.length;)l=l.concat(e.explanation[s]),s++;s++,a.push({type:"latex",content:"$"+l+"$"}),a.push({type:"text",content:""})}else a[a.length-1].content=a[a.length-1].content.concat(e.explanation[s]);s++}var i=a.map((function(e,t){return"text"===e.type?r.a.createElement("div",{style:{textAlign:"left"},key:t},r.a.createElement("p",null,e.content)):"latex"===e.type?r.a.createElement("div",{key:t},r.a.createElement(pe.a,null,e.content)):"image"===e.type?r.a.createElement("div",{key:t},r.a.createElement(le,{parameter:"question",imageId:e.content})):r.a.createElement("div",null)}));return r.a.createElement("div",null,r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"explanation"}," Explanation "),r.a.createElement(ee.a,{type:"textarea",rows:"5",name:"explanation",id:"explanation",value:e.explanation,onChange:function(e){n.props.handleChangeFunction(e,n.props.index,t)}})),i)}},n.renderImage=function(e){if(e.imageId)return O.a.get(x.getState().storageUrl+"/question/"+e.imageId,{headers:{auth:x.getState().auth}}).then((function(e){""===n.state.imageData&&n.setState({imageData:"data:"+e.headers["content-type"]+";base64,"+e.data})})),r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:"500px",maxHeight:"300px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.imageData,alt:"img"}))},n.state={imageData:""},n.renderExplanation=n.renderExplanation.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this;return null!=this.props.questions&&void 0!==this.props.questions&&(e=this.props.questions.questions.map((function(e,a){return r.a.createElement(M.a,{lg:"12",key:a,className:"m-3"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"questionNumber"},"Question Number"),r.a.createElement(ee.a,{type:"text",name:"questionNumber",id:"questionNumber",value:e.questionNumber,onChange:function(e){t.props.handleChangeFunction(e,t.props.index,a)}})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"question"},"Question"),r.a.createElement(ee.a,{type:"textarea",rows:"7",name:"question",id:"question",value:e.question,onChange:function(e){t.props.handleChangeFunction(e,t.props.index,a)}})),r.a.createElement("h5",{style:{textAlign:"left"}},"Options"),r.a.createElement("ul",{style:{textAlignVertical:"center",textAlign:"left"}},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"options[0]"},"A) "),r.a.createElement(ee.a,{type:"text",name:"options[0]",id:"options[0]",value:e.options[0],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,0)}})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"options[1]"},"B) "),r.a.createElement(ee.a,{type:"text",name:"options[1]",id:"options[1]",value:e.options[1],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,1)}})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"options[2]"},"C) "),r.a.createElement(ee.a,{type:"text",name:"options[2]",id:"options[2]",value:e.options[2],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,2)}})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"options[3]"},"D) "),r.a.createElement(ee.a,{type:"text",name:"options[3]",id:"options[3]",value:e.options[3],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,3)}}))),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"answer"}," Answer "),r.a.createElement(ee.a,{type:"text",name:"answer",id:"answer",value:e.answer,onChange:function(e){t.props.handleChangeFunction(e,t.props.index,a)}})),t.renderExplanation(e,a))}))),r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(W.a,null,e)))}}]),a}(r.a.Component),fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.getQuestionCollection=Object(U.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=4;break}return t=n.props.state.location.state.questionCollectionId,e.next=4,O.a.get(x.getState().apiUrl+"/questions/"+t,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({collection:e.data.collection}),n.setState({questionData:e.data.questionData}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 4:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToQuestions=function(){return n.state.success?r.a.createElement(m.a,{to:"/question"}):r.a.createElement("p",null)},n.renderDirection=function(e){if(n.state.questionData[e].direction)return r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"direction"},"Direction"),r.a.createElement(ee.a,{type:"text",name:"direction",id:"direction",value:n.state.questionData[e].direction,onChange:function(t){n.handleQuestionDataChange(t,e)}}))},n.renderLegalPrinciple=function(e){if(n.state.questionData[e].legalPrinciple)return r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"legalPrinciple"},"Legal Principle"),r.a.createElement(ee.a,{type:"textarea",rows:"15",name:"legalPrinciple",id:"legalPrinciple",value:n.state.questionData[e].legalPrinciple,onChange:function(t){n.handleQuestionDataChange(t,e)}}))},n.renderImage=function(e,t){if(e.imageId)return r.a.createElement("div",null,r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"imageId"},"ImageId"),r.a.createElement(ee.a,{type:"text",name:"imageId",id:"imageId",value:n.state.questionData[n.state.questionIndex].imageId,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}})),r.a.createElement(le,{parameter:"question",imageId:e.imageId}))},n.deleteCollection=function(){void 0!==x.getState().auth&&(n.setState({isLoading:!0}),O.a.delete(x.getState().apiUrl+"/questions/"+n.props.state.location.state.questionCollectionId,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({isLoading:!1}),n.setState({success:!0})):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message}))})).catch((function(e){n.setState({isLoading:!1}),console.log(e)})))},n.handleCollectionDataChange=function(e){var t=n.state.collection;t[e.target.name]=e.target.value,n.setState({collection:t})},n.handleQuestionDataChange=function(e,t){var a=n.state.questionData;a[t][e.target.name]=e.target.value,n.setState({questionData:a})},n.handleSubQuestionsDataChange=function(e,t,a){var r=n.state.questionData;r[t].questions[a][e.target.name]=e.target.value,n.setState({questionData:r})},n.handleSubQuestionOptionChange=function(e,t,a,r){var s=n.state.questionData;s[t].questions[a].options[r]=e.target.value,n.setState({questionData:s})},n.updateQuestion=function(){if(null!=x.getState().auth){n.setState({isLoading:!0});var e=n.state.questionData[n.state.questionIndex]._id;O.a.put(x.getState().apiUrl+"/questions/"+e+"/question",n.state.questionData[n.state.questionIndex],{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({questionIndex:0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))}},n.updateCollection=function(){if(null!=x.getState().auth){n.setState({isLoading:!0});var e=n.state.collection._id;O.a.put(x.getState().apiUrl+"/questions/"+e,n.state.collection,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({apiError:e.data.message,isLoading:!1})}))}},n.renderQuestionSelector=function(){if(null!=n.state.questionData&&void 0!==n.state.questionData)return n.state.questionData.map((function(e,t){return r.a.createElement(p.a,{key:t,className:"m-2",color:"primary",onClick:function(){n.setState({questionIndex:t})}}," ",t+1," ")}))},n.renderSelectedQuestion=function(){if(null!=n.state.questionData&&void 0!==n.state.questionData)return r.a.createElement(M.a,{lg:"12"},r.a.createElement(B.a,{className:"m-3"},r.a.createElement(W.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12"},r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"questionType"},"Question Type"),r.a.createElement(ee.a,{type:"text",name:"questionType",id:"questionType",value:n.state.questionData[n.state.questionIndex].questionType,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"section"},"Section"),r.a.createElement(ee.a,{type:"text",name:"section",id:"section",value:n.state.questionData[n.state.questionIndex].section,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"topic"},"Topic"),r.a.createElement(ee.a,{type:"text",name:"topic",id:"topic",value:n.state.questionData[n.state.questionIndex].topic,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"sourceExam"},"Source Exam"),r.a.createElement(ee.a,{type:"text",name:"sourceExam",id:"sourceExam",value:n.state.questionData[n.state.questionIndex].sourceExam,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"difficultyLevel"},"Difficulty Level"),r.a.createElement(ee.a,{type:"text",name:"difficultyLevel",id:"difficultyLevel",value:n.state.questionData[n.state.questionIndex].difficultyLevel,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"Time"},"Time"),r.a.createElement(ee.a,{type:"text",name:"Time",id:"Time",value:n.state.questionData[n.state.questionIndex].Time,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),n.renderDirection(n.state.questionIndex),n.renderLegalPrinciple(n.state.questionIndex)),r.a.createElement(M.a,{lg:"6"},n.renderImage(n.state.questionData[n.state.questionIndex],n.state.questionIndex))),r.a.createElement(Ee,{questions:n.state.questionData[n.state.questionIndex],index:n.state.questionIndex,handleChangeFunction:n.handleSubQuestionsDataChange,handleOptionChange:n.handleSubQuestionOptionChange}),r.a.createElement(p.a,{className:"mt-3",color:"primary",onClick:n.updateQuestion},"Update Question"))))},n.state={apiError:"",isLoading:!0,collection:{},questionIndex:0},n.getQuestionCollection=n.getQuestionCollection.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.redirectToQuestions=n.redirectToQuestions.bind(Object(d.a)(n)),n.renderDirection=n.renderDirection.bind(Object(d.a)(n)),n.renderLegalPrinciple=n.renderLegalPrinciple.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getQuestionCollection()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V.a,{className:"mt-2"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"name"},"Name of the Test"),r.a.createElement(ee.a,{type:"text",name:"name",id:"name",value:this.state.collection.name||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"mt-3 mr-2"},r.a.createElement(Z.a,{for:"type"},"Type"),r.a.createElement(ee.a,{type:"text",name:"type",id:"type",value:this.state.collection.type||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"mt-3 mr-2 ml-2"},r.a.createElement(Z.a,{for:"section"},"Section"),r.a.createElement(ee.a,{type:"text",name:"section",id:"section",value:this.state.collection.section||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"mt-3 ml-2"},r.a.createElement(Z.a,{for:"marksPerQuestion"},"Marks per Question"),r.a.createElement(ee.a,{type:"text",name:"marksPerQuestion",id:"marksPerQuestion",value:this.state.collection.marksPerQuestion||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"mt-3 mr-2"},r.a.createElement(Z.a,{for:"time"},"Time"),r.a.createElement(ee.a,{type:"text",name:"time",id:"time",value:this.state.collection.time||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"mt-3 mr-2 ml-2"},r.a.createElement(Z.a,{for:"numberOfQuestions"},"Number of Questions"),r.a.createElement(ee.a,{type:"text",name:"numberOfQuestions",id:"numberOfQuestions",value:this.state.collection.numberOfQuestions||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"mt-3 ml-2"},r.a.createElement(Z.a,{for:"maxMarks"},"Max marks"),r.a.createElement(ee.a,{type:"text",name:"maxMarks",id:"maxMarks",value:this.state.collection.maxMarks||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"textarea",rows:"6",name:"description",id:"description",value:this.state.collection.description||"",onChange:this.handleCollectionDataChange})))),r.a.createElement(F.a,{className:"mt-3"},r.a.createElement("h3",null,"Questions"),this.renderQuestionSelector(),this.renderSelectedQuestion()),this.renderError()),this.checkLogin(),this.renderSpinner(),this.redirectToQuestions(),r.a.createElement(p.a,{className:"m-5",color:"danger",onClick:this.deleteCollection},"Delete Collection"),r.a.createElement(p.a,{className:"m-5",color:"primary",onClick:this.updateCollection},"Update Collection"))}}]),a}(r.a.Component),Se=Object(k.b)((function(e){return{auth:e}}),(function(e){return{getAuth:function(){return e({type:"getLoginAuth"})}}}))(fe),be=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToQuestion=function(){return n.state.success?r.a.createElement(m.a,{to:"/question"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleFile=function(e){n.setState({file:e.target.files[0]})},n.handleSubmit=function(e){n.setState({isLoading:!0});var t=new FormData;t.append("file",n.state.file),t.append("name",n.state.name),t.append("type",n.state.type),t.append("marksPerQuestion",n.state.marksPerQuestion),t.append("description",n.state.description),void 0!==x.getState().auth&&O.a.post(x.getState().apiUrl+"/questions",t,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message})}))},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t},(function(){console.log(n.state.tags)}))},n.state={isLoading:!1,apiError:"",tags:{}},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,null,r.a.createElement("h1",null,"Create New Question Collection"),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"name"},"Name"),r.a.createElement(ee.a,{type:"text",name:"name",id:"name",placeholder:"Enter collection name",onChange:this.handleChange})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"marksPerQuestion"},"Marks per Question"),r.a.createElement(ee.a,{type:"text",name:"marksPerQuestion",id:"marksPerQuestion",placeholder:"Enter marks for right answer",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"1"}),r.a.createElement(M.a,{lg:"5",style:{marginLeft:"auto"}},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"type"},"Type"),r.a.createElement(ee.a,{type:"text",name:"type",id:"type",placeholder:"Enter type",onChange:this.handleChange})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"type"},"Question Excel Sheet"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:this.handleFile})))),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"textarea",name:"description",id:"description",placeholder:"Enter description",onChange:this.handleChange})),r.a.createElement(p.a,{color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToQuestion(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){n.setState({isLoading:!0}),O.a.post(x.getState().apiUrl+"/users/login",n.state).then((function(e){!0===e.data.status?n.setState({auth:e.headers.auth},(function(){n.setState({isLoading:!1})})):null!==e.data.message?(n.setState({apiError:e.data.message}),n.setState({isLoading:!1})):(n.setState({apiError:"Could not log you in"}),n.setState({isLoading:!1}))}))},n.handleFile=function(e){if(n.setState({uploadImage:e.target.files[0]}),e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}n.setState({apiError:""})},n.uploadImage=Object(U.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.state.uploadImage||void 0===n.state.uploadImage||""===n.state.uploadImage){e.next=5;break}return(t=new FormData).append("questionImage",n.state.uploadImage),e.next=5,O.a.post(x.getState().storageUrl+"/question",t,{headers:{auth:n.state.auth}}).then((function(e){e.data.status&&(console.log(e.data),n.setState({imageId:e.data.imageId}))})).catch((function(e){console.log(e),n.setState({apiError:"error"})}));case 5:case"end":return e.stop()}}),e)}))),n.copyId=function(){var e=n.state.imageId;navigator.clipboard.writeText(e).then((function(){console.log("Copying to clipboard was successful!")}),(function(e){console.error("Could not copy text: ",e)}))},n.renderForm=function(){if(null===n.state.auth||void 0===n.state.auth||""===n.state.auth)return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"email"},"Email"),r.a.createElement(ee.a,{type:"email",name:"email",id:"email",placeholder:"Enter email",onChange:n.handleChange})),r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"password"},"Password"),r.a.createElement(ee.a,{type:"password",name:"password",id:"password",placeholder:"password",onChange:n.handleChange})),r.a.createElement(p.a,{color:"primary",onClick:n.handleSubmit},"Submit"),r.a.createElement("br",null)))},n.renderImageUpload=function(){if(null!==n.state.auth&&void 0!==n.state.auth&&""!==n.state.auth)return r.a.createElement(B.a,null,r.a.createElement(te.a,{top:!0,style:{maxWidth:"500px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.image}),r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:n.handleFile})),r.a.createElement(p.a,{color:"primary",onClick:n.uploadImage},"Upload"),r.a.createElement("p",null,r.a.createElement("span",{style:{fontWeight:"500"}},"Image id:")," ",n.state.imageId,r.a.createElement(p.a,{color:"link",onClick:n.copyId,className:"fa fa-copy"}))))},n.state={apiError:"",isLoading:!1},n.renderForm=n.renderForm.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.renderImageUpload=n.renderImageUpload.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,{className:"mt-5"},r.a.createElement(F.a,null,r.a.createElement(M.a,{className:"col-lg-3"}),r.a.createElement(M.a,{className:"col-lg-6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,null),r.a.createElement(W.a,null,this.renderForm(),this.renderImageUpload()))),r.a.createElement(M.a,{className:"col-lg-3"})),this.renderError(),this.renderSpinner())}}]),a}(r.a.Component),we=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(Y.a,null,this.props.data.name),r.a.createElement(H.a,null,this.props.data.category),r.a.createElement(G.a,null,this.props.data.description),r.a.createElement(N.b,{to:{pathname:"course/edit",state:{course:this.props.data}}},r.a.createElement(p.a,null,"View")))))}}]),a}(r.a.Component),ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.getCourses=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=3;break}return e.next=3,O.a.get(x.getState().apiUrl+"/course",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({courses:e.data.courses}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={courses:[],apiError:"",isLoading:!0},n.getCourses=n.getCourses.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.getCourses(),n}return Object(i.a)(a,[{key:"render",value:function(){var e;return null!=this.state.courses&&void 0!==this.state.courses&&(e=this.state.courses.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(we,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"course/edit",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New Course"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Courses"),r.a.createElement(F.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),Ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={image:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return""===this.state.image&&(console.log("hello"),O.a.get(x.getState().storageUrl+"/mentor/"+this.props.data.imageId,{headers:{auth:x.getState().auth}}).then((function(t){t.data.status&&e.setState({image:t.data.url})}))),r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(te.a,{src:this.state.image}),r.a.createElement(W.a,null,r.a.createElement(Y.a,{style:{textAlign:"left"}},this.props.data.name),r.a.createElement(H.a,{style:{textAlign:"left"}},this.props.data.designation),r.a.createElement(G.a,{style:{textAlign:"left"}},this.props.data.description),r.a.createElement(N.b,{to:{pathname:"mentor/edit",state:{mentor:this.props.data}}},r.a.createElement(p.a,null,"View")))))}}]),a}(r.a.Component),xe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleFile=function(e,t){var a=n.state.imageFiles;if(a[t]=e.target.files[0],n.setState({imageFiles:a}),null!=n.state.imageFiles[t]){var r=new FileReader;r.onload=function(e){var a=n.state.imageDatas;a[t]=e.target.result,n.setState({imageDatas:a})},r.readAsDataURL(n.state.imageFiles[t])}},n.renderImage=function(e){return null!=n.state.imageDatas[e]?r.a.createElement("img",{style:{height:"inherit",width:"inherit"},src:n.state.imageDatas[e],alt:e}):null!=n.props.imageIds[e]?r.a.createElement(le,{parameter:"course/cover",imageId:n.props.imageIds[e]}):r.a.createElement("div",null)},n.uploadImage=function(e,t){n.props.spinnerStart(!0);var a=new FormData;a.append("coverImage",n.state.imageFiles[t]),null==n.props.imageIds[t]?O.a.post(x.getState().storageUrl+"/course/cover",a,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status&&n.props.onUpload(t,e.data.imageId)})):O.a.put(x.getState().storageUrl+"/course/cover/"+n.props.imageIds[t],a,{headers:{auth:x.getState().auth}}).then((function(e){n.props.spinnerStart(!1)}))},n.state={imageFiles:{},imageDatas:{}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"3"},this.renderImage("courseCardLight"),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Course Card Light"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:function(t){e.handleFile(t,"courseCardLight")}})),r.a.createElement(p.a,{color:"primary",onClick:function(t){e.uploadImage(t,"courseCardLight")}},"Upload")),r.a.createElement(M.a,{lg:"3"},this.renderImage("courseCardDark"),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Course Card Dark"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:function(t){e.handleFile(t,"courseCardDark")}})),r.a.createElement(p.a,{color:"primary",onClick:function(t){e.uploadImage(t,"courseCardDark")}},"Upload")),r.a.createElement(M.a,{lg:"3"},this.renderImage("infoCardLight"),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Info Card Light"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:function(t){e.handleFile(t,"infoCardLight")}})),r.a.createElement(p.a,{color:"primary",onClick:function(t){e.uploadImage(t,"infoCardLight")}},"Upload")),r.a.createElement(M.a,{lg:"3"},this.renderImage("infoCardDark"),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"file"},"Info Card Dark"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:function(t){e.handleFile(t,"infoCardDark")}})),r.a.createElement(p.a,{color:"primary",onClick:function(t){e.uploadImage(t,"infoCardDark")}},"Upload")))))}}]),a}(r.a.Component),ke=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({subSectionUpdate:!1}),null===n.props.state.location||"new"===n.props.state.location.state){e.next=9;break}if(void 0===x.getState().auth){e.next=9;break}return n.setState({isLoading:!0}),e.next=6,O.a.get(x.getState().apiUrl+"/course/"+n.props.state.location.state.course._id,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){var a,r,s,o,l,i,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.status){e.next=33;break}(a=t.data.course).tags={},n.setState({course:a}),n.setState({newSectionIndex:n.state.course.sections.length}),e.t0=Q.a.keys(a.sections);case 6:if((e.t1=e.t0()).done){e.next=22;break}r=e.t1.value,e.t2=Q.a.keys(a.sections[r].modules);case 9:if((e.t3=e.t2()).done){e.next=20;break}s=e.t3.value,o=Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.sections[r].modules[s].subModules[l],e.next=3,O.a.get(x.getState().apiUrl+"/course/submodule/"+t,{headers:{auth:x.getState().auth}}).then((function(e){if(e.data.status){var a=n.state.subSections;a[t]=e.data.subModule,n.setState({subSections:a})}}));case 3:case"end":return e.stop()}}),e)})),e.t4=Q.a.keys(a.sections[r].modules[s].subModules);case 13:if((e.t5=e.t4()).done){e.next=18;break}return l=e.t5.value,e.delegateYield(o(),"t6",16);case 16:e.next=13;break;case 18:e.next=9;break;case 20:e.next=6;break;case 22:i=Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(x.getState().apiUrl+"/mentor/"+a.coaches[t],{headers:{auth:x.getState().auth}}).then((function(e){if(e.data.status){var r=n.state.coaches;r[a.coaches[t]]=e.data.mentor,n.setState({coaches:r})}}));case 2:case"end":return e.stop()}}),e)})),e.t7=Q.a.keys(a.coaches);case 24:if((e.t8=e.t7()).done){e.next=29;break}return c=e.t8.value,e.delegateYield(i(c),"t9",27);case 27:e.next=24;break;case 29:console.log(n.state),n.setState({isLoading:!1}),e.next=34;break;case 33:n.setState({apiError:t.data.message,isLoading:!1});case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:n.setState({numberOfSubSections:Object.keys(n.state.subSections).length}),O.a.get(x.getState().apiUrl+"/mentor/coach",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status&&0!==e.data.coaches.length&&n.setState({allCoaches:e.data.coaches,newCoach:e.data.coaches[0].name,newCoachId:e.data.coaches[0]._id,newVideoAuthor:e.data.coaches[0]._id})})),O.a.get(x.getState().apiUrl+"/questions",{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status&&n.setState({allFullLengthTests:e.data.collections,newFullLengthTest:e.data.collections[0].name,newFullLengthTestId:e.data.collections[0]._id})}));case 9:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{style:{zIndex:"5",margin:"auto",position:"absolute",top:"100px",left:"100px",bottom:"100px",right:"50px",height:"50px",width:"50px"},color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToCourses=function(){return n.state.success?r.a.createElement(m.a,{to:"/course"}):r.a.createElement("p",null)},n.handleFile=function(e){n.setState({file:e.target.files[0]})},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleCourseDetailChange=function(e){var t=n.state.course;t[e.target.name]=e.target.value,n.setState({course:t})},n.onTagChange=function(e){var t=n.state.course;t.tags[e.target.name]=e.target.checked,n.setState({course:t},(function(){console.log(n.state.course.tags)}))},n.handleSubmit=function(){n.setState({isLoading:!0}),void 0!==x.getState().auth&&(null!==n.props.state.location&&"new"===n.props.state.location.state?O.a.post(x.getState().apiUrl+"/course/partial",n.state.course,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(console.log(e.data),n.setState({isLoading:!1,success:!0})):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message,isLoading:!1}))})):O.a.put(x.getState().apiUrl+"/course/"+n.state.course._id,n.state.course,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message,isLoading:!1}))})))},n.cancelSubSectionSubmission=Object(U.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.newSubSection;case 1:if(!(t.sectionalQuestions.length>0)){e.next=6;break}return e.next=4,O.a.delete(x.getState().apiUrl+"/questions/"+t.sectionalQuestions[0],{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(t.sectionalQuestions.splice(0,1),n.setState({newSubSection:t})):n.setState({apiError:"Could not delete files"})}));case 4:e.next=1;break;case 6:if(!(t.previousYearQuestions.length>0)){e.next=11;break}return e.next=9,O.a.delete(x.getState().apiUrl+"/questions/"+t.previousYearQuestions[0],{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(t.previousYearQuestions.splice(0,1),n.setState({newSubSection:t})):n.setState({apiError:"Could not delete files"})}));case 9:e.next=6;break;case 11:if(!(t.handoutIds.length>0)){e.next=16;break}return e.next=14,O.a.delete(x.getState().storageUrl+"/course/handout/"+n.state.newSubSection.handoutIds[0],{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?(t.handoutIds.splice(0,1),n.setState({newSubSection:t})):n.setState({apiError:"Could not delete files"})})).catch((function(e){n.setState({apiError:"Could not delete files"})}));case 14:e.next=11;break;case 16:n.setState({subSectionForm:!1});case 17:case"end":return e.stop()}}),e)}))),n.setCourseName=function(e){var t=n.state.course;t.name=e.target.value,n.setState({course:t})},n.submitSubSection=function(){n.setState({isLoading:!0});var e=n.state.course,t=n.state.subSections;if(console.log(n.state.newSubSection),x.getState().auth){var a=n.state.newSubSection;a.courseId=n.state.course._id,a.sectionalTests=a.previousYearQuestions.length+a.sectionalQuestions.length,O.a.post(x.getState().apiUrl+"/course/submodule/partial",a,{headers:{auth:x.getState().auth}}).then((function(a){a.data.status?(n.setState({changed:!0}),t[a.data.subModule._id]=a.data.subModule,n.setState({subSections:t}),e.sections[n.state.sectionIndex].modules[n.state.moduleIndex].subModules.push(a.data.subModule._id),n.setState({course:e}),n.setState({subSectionForm:!1,isLoading:!1,subSectionUpdate:!1,newSubSection:{name:"",previousYearQuestions:[],sectionalQuestions:[],videoURLs:[],handoutIds:[]}})):n.setState({isLoading:!1,apiError:a.data.message})}))}},n.addSection=function(){var e=n.state.course;null==e.sections&&(e.sections=[],n.setState({course:e})),n.state.newSectionIndex>=0&&n.state.newSectionIndex<=n.state.course.sections.length&&(e.sections.splice(n.state.newSectionIndex,0,{name:n.state.newSection,modules:[]}),n.setState({course:e,newSection:"",newSectionIndex:n.state.newSectionIndex+1}))},n.addModule=function(e){var t=n.state.course;null==t.sections[e].modules&&(t.sections[e].modules=[],n.setState({course:t})),t.sections[e].modules.push({name:n.state.newModule,subModules:[],questions:[]}),n.setState({course:t,newModule:""})},n.handleDelete=function(){n.setState({isLoading:!0}),void 0!==x.getState().auth&&(null!==n.props.state.location&&"new"===n.props.state.location.state?n.setState({success:!0}):O.a.delete(x.getState().apiUrl+"/course/"+n.state.course._id,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message,isLoading:!1}))})))},n.deleteSection=function(e){var t=n.state.course,a=0;for(var r in t.sections[e].modules)if(t.sections[e].modules[r].subModules.length>0){a=1;break}if(1===a)alert("delete all sub modules inside the module of the section");else{t.sections.splice(e,1);var s=n.state.selectedSection;s=0,0===t.sections.length&&(s=-1),n.setState({selectedSection:s,course:t,newSectionIndex:n.state.course.sections.length})}},n.deleteModule=function(e,t){var a=n.state.course;a.sections[e].modules[t].subModules.length>0?alert("delete all sub modules inside the module"):(a.sections[e].modules.splice(t,1),n.setState({course:a}))},n.deleteSubSection=function(e,t,a){var r=n.state.course,s=r.sections[e].modules[t].subModules[a];O.a.delete(x.getState().apiUrl+"/course/submodule/"+s,{headers:{auth:x.getState().auth}}).then((function(o){if(o.data.status){n.setState({changed:!0});var l=n.state.newSubSection;n.setState({newSubSection:n.state.subSections[s]}),n.cancelSubSectionSubmission(),n.setState({newSubSection:l});var i=n.state.subSections;delete i[s],n.setState({subSections:i}),r.sections[e].modules[t].subModules.splice(a,1),n.setState({course:r})}}))},n.renderSubSectionViewButton=function(e,t,a){if(!1===n.state.changed)return r.a.createElement(N.b,{to:{pathname:"/course/viewSubModule",state:{subModule:n.state.subSections[n.state.course.sections[e].modules[t].subModules[a]],sectionName:n.state.course.sections[e].name}}},r.a.createElement(p.a,null,"View"))},n.renderSectionSelector=function(){if(null!=n.state.course.sections)return n.state.course.sections.map((function(e,t){return r.a.createElement(p.a,{key:t,className:"m-2",color:"primary",onClick:function(){n.setState({selectedSection:t})}},e.name)}))},n.renderCoaches=function(){if(n.state.course.coaches&&n.state.coaches)return n.state.course.coaches.map((function(e,t){var a=n.state.coaches[e];return null!=a&&void 0!==a?r.a.createElement(M.a,{lg:"3",className:"mb-2",key:t},r.a.createElement(Ce,{data:a})):r.a.createElement("div",{key:t})}))},n.renderCoachOptions=function(){if(n.state.allCoaches)return n.state.allCoaches.map((function(e){return r.a.createElement("option",{key:e._id},e.name)}))},n.renderFullLengthTests=function(){if(n.state.course.fullLengthTests&&n.state.allFullLengthTests)return n.state.course.fullLengthTests.map((function(e,t){var a=n.state.allFullLengthTests.filter((function(t){return t._id===e}))[0];return a=null!=a?a.name:e,r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",a,r.a.createElement(N.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(p.a,{color:"link",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(){var e=n.state.course;e.fullLengthTests.splice(t,1),n.setState({course:e})}})))}))},n.renderFullLengthtestOptions=function(){if(n.state.allFullLengthTests)return n.state.allFullLengthTests.map((function(e){return r.a.createElement("option",{key:e._id},e.name)}))},n.renderSubSections=function(e,t){if(n.state.course.sections[e].modules[t].subModules)return n.state.course.sections[e].modules[t].subModules.map((function(a,s){if(n.state.subSections[a]){var o=n.state.subSections[a].sectionalQuestions.length+n.state.subSections[a].previousYearQuestions.length;return n.state.subSections[a].directQuestions&&(o+=n.state.subSections[a].directQuestions.length),n.state.subSections[a].practiceQuestions&&(o+=n.state.subSections[a].practiceQuestions.length),n.state.subSections[a].newPatternQuestions&&(o+=n.state.subSections[a].newPatternQuestions.length),r.a.createElement(M.a,{lg:"4",className:"mt-3",key:s},r.a.createElement(B.a,null,r.a.createElement(Y.a,null,r.a.createElement("h6",null,"Sub module: ",n.state.subSections[a].name)),r.a.createElement(W.a,null,r.a.createElement("p",null,"Number of Videos: ",n.state.subSections[a].videoURLs.length),r.a.createElement("p",null,"Number of Tests: ",o),r.a.createElement("p",null,"Handout: ",n.state.subSections[a].handoutIds.length),n.renderSubSectionViewButton(e,t,s),r.a.createElement(p.a,{className:"m-1",color:"danger",onClick:function(){n.deleteSubSection(e,t,s)}},"Delete Sub Section"))))}return r.a.createElement("div",{key:s})}))},n.renderModules=function(e){if(null!=n.state.course.sections[e].modules)return n.state.course.sections[e].modules.map((function(t,a){return r.a.createElement(M.a,{lg:"12",className:"mt-3",key:a},r.a.createElement(B.a,null,r.a.createElement(Y.a,null,r.a.createElement("h5",null,"Module: ",t.name)),r.a.createElement(W.a,null,r.a.createElement(F.a,null,n.renderSubSections(e,a),r.a.createElement(M.a,{lg:"4",className:"mt-3"},r.a.createElement(B.a,null,r.a.createElement(Y.a,null,"Add new sub module"),r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0},r.a.createElement(p.a,{style:{marginLeft:"auto",marginRight:"auto"},color:"primary",onClick:function(){null!==n.props.state.location&&"new"===n.props.state.location.state?alert("You must submit the course before adding sub modules"):n.setState({subSectionForm:!0,sectionIndex:e,moduleIndex:a})}},"Add Sub Module")))),r.a.createElement(B.a,{className:"mt-3"},r.a.createElement(p.a,{className:"m-3",color:"danger",onClick:function(){n.deleteModule(e,a)}},"Delete this Module")))))))}))},n.renderSections=function(){if(null!==n.state.course.sections&&void 0!==n.state.course.sections&&0!==n.state.course.sections.length&&-1!==n.state.selectedSection){var e=n.state.selectedSection,t=n.state.course.sections[e];return r.a.createElement("div",null,r.a.createElement(B.a,{className:"m-3"},r.a.createElement(Y.a,null,r.a.createElement("h4",null,t.name)),r.a.createElement(W.a,null,r.a.createElement(F.a,null,n.renderModules(e),r.a.createElement(M.a,{lg:"10",className:"mt-3"},r.a.createElement(B.a,null,r.a.createElement(Y.a,null,"Add new Module"),r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0},r.a.createElement(M.a,{lg:"2"},r.a.createElement(Z.a,{for:"newModule"},"Module Name")),r.a.createElement(M.a,{lg:"8"},r.a.createElement(ee.a,{type:"text",name:"newModule",id:"newModule",value:n.state.newModule||"",onChange:n.handleChange})),r.a.createElement(M.a,{lg:"2"},r.a.createElement(p.a,{color:"primary",onClick:function(){n.addModule(e)}},"Add Module")))))),r.a.createElement(M.a,{lg:"2",style:{marginTop:"auto",marginBottom:"auto"}},r.a.createElement(p.a,{className:"m-3",color:"danger",onClick:function(){n.deleteSection(e)}},"Delete this section"))))))}},n.renderModuleQuestions=function(e,t){return n.state.course.sections[e].modules[t].questions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderSectionalQuestions=function(){return n.state.newSubSection.sectionalQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderPreviousYearQuestions=function(){return n.state.newSubSection.previousYearQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderPracticeQuestions=function(){return n.state.newSubSection.practiceQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderDirectQuestions=function(){return n.state.newSubSection.directQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderNewPatternQuestions=function(){return n.state.newSubSection.newPatternQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderHandouts=function(){return n.state.newSubSection.handoutIds.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderVideos=function(){return n.state.newSubSection.videoURLs.map((function(e,t){var a;return n.state.allCoaches&&(a=n.state.allCoaches.filter((function(t){return t._id===e.author}))[0].name),r.a.createElement("div",{style:{textAlign:"left"},key:t},r.a.createElement("p",null,t+1,". ",e.title),r.a.createElement("p",null,"id:  ",e.url),r.a.createElement("p",null,"Desc:  ",e.description),r.a.createElement("p",null,"author:  ",a),r.a.createElement("p",null,"duration:  ",e.duration))}))},n.renderWhatYouWillLearn=function(){return null!=n.state.course.whatYouWillLearn?n.state.course.whatYouWillLearn.map((function(e,t){return r.a.createElement(F.a,{key:t},r.a.createElement(M.a,{lg:"10"},r.a.createElement("p",{key:t,style:{textAlign:"left"}},t+1,") ",e)),r.a.createElement(M.a,{lg:"2"},r.a.createElement(p.a,{color:"danger",className:"fa fa-trash",onClick:function(e){var a=n.state.course;a.whatYouWillLearn.splice(t,1),n.setState({course:a})}})))})):r.a.createElement("div",null)},n.renderFAQ=function(){return null!=n.state.course.FAQ?n.state.course.FAQ.map((function(e,t){return r.a.createElement(F.a,{key:t},r.a.createElement(M.a,{lg:"12"},r.a.createElement("p",{style:{textAlign:"left"}},"Q) ",e.question)),r.a.createElement(M.a,{lg:"10"},r.a.createElement("p",{style:{textAlign:"left"}},"A) ",e.answer)),r.a.createElement(M.a,{lg:"2"},r.a.createElement(p.a,{color:"danger",className:"fa fa-trash",onClick:function(e){var a=n.state.course;a.FAQ.splice(t,1),n.setState({course:a})}})))})):r.a.createElement("div",null)},n.uploadImage=function(e,t){var a=n.state.course;null==a.imageIds&&(a.imageIds={}),a.imageIds[e]=t,n.setState({course:a}),O.a.put(x.getState().apiUrl+"/course/"+n.state.course._id,n.state.course,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))},n.spinnerStart=function(e){n.setState({isLoading:e})},n.renderAdditionalDetails=function(){if(n.state.renderAdditionalDetails)return r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12"},r.a.createElement(xe,{imageIds:n.state.course.imageIds||{},onUpload:n.uploadImage,spinnerStart:n.spinnerStart})),r.a.createElement(M.a,{lg:"6"},r.a.createElement("h5",null,"What you will learn"),n.renderWhatYouWillLearn(),r.a.createElement(ee.a,{type:"text",name:"newWhatYouWillLearn",id:"newWhatYouWillLearn",value:n.state.newWhatYouWillLearn||"",onChange:n.handleChange}),r.a.createElement(p.a,{color:"primary",className:"mt-2",onClick:function(e){var t=n.state.course;null==n.state.course.whatYouWillLearn&&(t.whatYouWillLearn=[]),t.whatYouWillLearn.push(n.state.newWhatYouWillLearn),n.setState({course:t,newWhatYouWillLearn:""})}},"Add")),r.a.createElement(M.a,{lg:"6"},r.a.createElement("h5",null,"FAQ"),n.renderFAQ(),r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"newQuestion"},"Question"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{type:"text",name:"newQuestion",id:"newQuestion",value:n.state.newQuestion||"",onChange:n.handleChange}))),r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"newAnswer"},"Answer"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{sm:10,type:"text",name:"newAnswer",id:"newAnswer",value:n.state.newAnswer||"",onChange:n.handleChange}))),r.a.createElement(p.a,{color:"primary",className:"mt-2",onClick:function(e){var t=n.state.course;null==n.state.course.FAQ&&(t.FAQ=[]),t.FAQ.push({question:n.state.newQuestion,answer:n.state.newAnswer}),n.setState({course:t,newWhatYouWillLearn:""})}},"Add")),r.a.createElement(M.a,{lg:"12"},r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:n.state.course.tags.whatsNew||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"whatsNew"},"Whats new")),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"other",id:"other",value:n.state.course.tags.other||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"other"},"Other"))),r.a.createElement(M.a,{lg:"12"},r.a.createElement("h2",{style:{textAlign:"left"},className:"mt-3 mb-3"},"Coaches"),r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(F.a,null,n.renderCoaches()),r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(Z.a,{for:"newCoach"},"Coach"),r.a.createElement(ee.a,{type:"select",name:"newCoach",id:"newCoach",placeholder:"Select new coach",value:n.state.newCoach,onChange:function(e){n.setState({newCoach:e.target.value});var t=n.state.allCoaches.filter((function(t){return t.name===e.target.value}))[0];n.setState({newCoachId:t._id})}},n.renderCoachOptions()),r.a.createElement(p.a,{className:"mt-2",color:"primary",onClick:function(){n.state.course.coaches.push(n.state.newCoachId);var e=n.state.coaches;e[n.state.newCoachId]=n.state.allCoaches.filter((function(e){return e._id===n.state.newCoachId}))[0],n.setState({coaches:e}),console.log(n.state)}},"Add"))))),r.a.createElement(M.a,{lg:"12"},r.a.createElement("h2",{style:{textAlign:"left"},className:"mt-3 mb-3"},"Full length tests"),r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(F.a,null,n.renderFullLengthTests()),r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(Z.a,{for:"newFullLengthTest"},"Full Length Test"),r.a.createElement(ee.a,{type:"select",name:"newFullLengthTest",id:"newFullLengthTest",placeholder:"Select new test",value:n.state.newFullLengthTest,onChange:function(e){n.setState({newFullLengthTest:e.target.value});var t=n.state.allFullLengthTests.filter((function(t){return t.name===e.target.value}))[0];console.log(t),n.setState({newFullLengthTestId:t._id})}},n.renderFullLengthtestOptions()),r.a.createElement(p.a,{className:"mt-2",color:"primary",onClick:function(){var e=n.state.course;e.fullLengthTests||(e.fullLengthTests=[]),e.fullLengthTests.push(n.state.newFullLengthTestId),console.log(e.fullLengthTests),n.setState({course:e})}},"Add"))))))},n.state={success:!1,apiError:"",isLoading:!1,isSubmitting:!1,subSectionForm:!1,course:{available:!1,tags:{}},subSections:{},coaches:{},newSubSection:{name:"",previousYearQuestions:[],sectionalQuestions:[],practiceQuestions:[],directQuestions:[],newPatternQuestions:[],videoURLs:[],handoutIds:[]},questionCollectionType:"Sectional Test Questions",selectedSection:0,changed:!1,renderAdditionalDetails:!1,newSectionIndex:0},n.renderError=n.renderError.bind(Object(d.a)(n)),n.redirectToCourses=n.redirectToCourses.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.renderSections=n.renderSections.bind(Object(d.a)(n)),n.renderModules=n.renderModules.bind(Object(d.a)(n)),n.addModule=n.addModule.bind(Object(d.a)(n)),n.renderSubSectionViewButton=n.renderSubSectionViewButton.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.state.subSectionForm?r.a.createElement(V.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"8",style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement("div",null,r.a.createElement("h2",null,"Create New Sub Section"),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12"},this.renderError(),this.renderSpinner()),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"name"},"Name"),r.a.createElement(ee.a,{type:"text",name:"name",id:"name",placeholder:"Enter sub section name",value:this.state.newSubSection.name||"",onChange:function(t){var a=e.state.newSubSection;a.name=t.target.value,e.setState({newSubSection:a},(function(){console.log(e.state)}))}}))),r.a.createElement(M.a,{lg:"6"},r.a.createElement("p",null," Question Collections"),r.a.createElement(B.a,null,r.a.createElement(W.a,{style:{marginRight:"auto"}},r.a.createElement("p",{style:{textAlign:"left"}},"Sectional tests: "),this.renderSectionalQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Previous year question tests"),this.renderPreviousYearQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Practice question:"),this.renderPracticeQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Direct questions:"),this.renderDirectQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"New Pattern Questions:"),this.renderNewPatternQuestions(),r.a.createElement(X.a,{row:!0},r.a.createElement(ee.a,{className:"m-2",type:"select",name:"questionCollectionType",id:"questionCollectionType",value:this.state.questionCollectionType,onChange:function(t){e.setState({questionCollectionType:t.target.value})}},r.a.createElement("option",null,"Sectional Test Questions"),r.a.createElement("option",null,"Previous Year Questions"),r.a.createElement("option",null,"Practice Questions"),r.a.createElement("option",null,"Direct Questions"),r.a.createElement("option",null,"New Pattern Questions")),r.a.createElement(ee.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(p.a,{className:"m-2",color:"primary",onClick:function(){e.setState({isLoading:!0});var t=e.state.newSubSection,a=new FormData;a.append("file",e.state.file),a.append("type",e.state.questionCollectionType),a.append("section",e.state.course.sections[e.state.selectedSection].name),O.a.post(x.getState().apiUrl+"/questions",a,{headers:{auth:x.getState().auth}}).then((function(a){a.data.status?("Sectional Test Questions"===e.state.questionCollectionType?t.sectionalQuestions.push(a.data.questionCollection._id):"Previous Year Questions"===e.state.questionCollectionType?t.previousYearQuestions.push(a.data.questionCollection._id):"Practice Questions"===e.state.questionCollectionType?t.practiceQuestions.push(a.data.questionCollection._id):"Direct Questions"===e.state.questionCollectionType?t.directQuestions.push(a.data.questionCollection._id):"New Pattern Questions"===e.state.questionCollectionType&&t.newPatternQuestions.push(a.data.questionCollection._id),e.setState({newSubSection:t},(function(){}))):a.data.message&&e.setState({apiError:a.data.message}),e.setState({isLoading:!1})}))}},"Add"))))),r.a.createElement(M.a,{lg:"6"},r.a.createElement("p",null," Handouts"),r.a.createElement(B.a,null,r.a.createElement(W.a,{style:{marginRight:"auto"}},this.renderHandouts(),r.a.createElement(X.a,{row:!0},r.a.createElement(ee.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(p.a,{className:"m-2",color:"primary",onClick:Object(U.a)(Q.a.mark((function t(){var a,n;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),a=e.state.newSubSection,(n=new FormData).append("handoutFile",e.state.file),t.next=6,O.a.post(x.getState().storageUrl+"/course/handout",n,{headers:{auth:x.getState().auth}}).then((function(t){t.data.status?(a.handoutIds.push(t.data.fileId),e.setState({newSubSection:a})):t.data.message&&e.setState({apiError:t.data.message}),e.setState({isLoading:!1})})).catch((function(t){e.setState({apiError:"could not upload, error: "+t,isLoading:!1})}));case 6:case"end":return t.stop()}}),t)})))},"Add"))))),r.a.createElement(M.a,{lg:"12",className:"mt-3"},r.a.createElement("p",null," Videos"),r.a.createElement(B.a,null,r.a.createElement(W.a,null,this.renderVideos(),r.a.createElement(X.a,{row:!0},r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoTitle"},"Title")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"text",name:"newVideoTitle",id:"newVideoTitle",value:this.state.newVideoTitle||"",onChange:this.handleChange})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideo"},"Video ID")),r.a.createElement(M.a,{className:"m-1",lg:"3"},r.a.createElement(ee.a,{type:"text",name:"newVideo",id:"newVideo",value:this.state.newVideo||"",onChange:this.handleChange})),r.a.createElement(M.a,{lg:"1"}),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoDuration"},"Duration")),r.a.createElement(M.a,{className:"m-1",lg:"3"},r.a.createElement(ee.a,{type:"text",name:"newVideoDuration",id:"newVideoDuration",value:this.state.newVideoDuration||"",onChange:this.handleChange})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoDescription"},"Description")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"text",name:"newVideoDescription",id:"newVideoDescription",value:this.state.newVideoDescription||"",onChange:this.handleChange})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoAuthor"},"Author")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"select",name:"newVideoAuthor",id:"newVideoAuthor",value:this.state.newVideoAuthor||"",onChange:function(t){var a=e.state.allCoaches.filter((function(e){return e.name===t.target.value}))[0]._id;e.setState({newVideoAuthor:a})}},this.renderCoachOptions())),r.a.createElement(M.a,{lg:"2"},r.a.createElement(p.a,{color:"primary",onClick:function(){var t=e.state.newSubSection,a={url:e.state.newVideo,description:e.state.newVideoDescription,author:e.state.newVideoAuthor,duration:e.state.newVideoDuration,title:e.state.newVideoTitle};t.videoURLs.push(a),e.setState({newSubSection:t,newVideo:"",newVideoDescription:"",newVideoAuthor:"",newVideoTitle:"",newVideoDuration:""}),console.log(e.state)}},"Add"))))))),r.a.createElement(p.a,{className:"m-3",onClick:this.cancelSubSectionSubmission},"Cancel"),r.a.createElement(p.a,{className:"m-3",color:"primary",onClick:this.submitSubSection},"Submit")))))):r.a.createElement(V.a,null,r.a.createElement("h1",null,"Course Editor"),r.a.createElement(ae.a,{className:"mt-4"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"name",sm:2},"Course Name"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{type:"text",name:"name",id:"name",value:this.state.course.name||"",onChange:function(t){var a=e.state.course;a.name=t.target.value,e.setState({course:a})}})))),r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"duration",sm:2},"Course Duration"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{type:"text",name:"duration",id:"duration",value:this.state.course.duration||"",onChange:function(t){var a=e.state.course;a.duration=t.target.value,e.setState({course:a})}}))))),r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"smallDescription",sm:2},"Small Description"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{type:"text",rows:"5",name:"smallDescription",id:"smallDescription",value:this.state.course.smallDescription||"",onChange:function(t){var a=e.state.course;a.smallDescription=t.target.value,e.setState({course:a})}})))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"description",sm:2},"Course Description"),r.a.createElement(M.a,{sm:10},r.a.createElement(ee.a,{type:"textarea",rows:"5",name:"description",id:"description",value:this.state.course.description||"",onChange:function(t){var a=e.state.course;a.description=t.target.value,e.setState({course:a})}})))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"6"},r.a.createElement(Z.a,{for:"available"},"Is course available")),r.a.createElement(M.a,{lg:"5"},r.a.createElement(ee.a,{className:"m-2",type:"select",name:"available",id:"available",value:this.state.course.available||!1,onChange:function(t){var a=e.state.course;a.available=t.target.value,e.setState({course:a})}},r.a.createElement("option",null,"true"),r.a.createElement("option",null,"false")))))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0},r.a.createElement(F.a,null,r.a.createElement(M.a,{style:{marginTop:"auto",marginBottom:"auto"},lg:"3"},r.a.createElement(Z.a,{for:"price"},"price")),r.a.createElement(M.a,{lg:"5"},r.a.createElement(ee.a,{className:"m-2",type:"text",name:"price",id:"price",value:this.state.course.price||"",onChange:function(t){var a=e.state.course;a.price=t.target.value,e.setState({course:a})}}))))),r.a.createElement(M.a,{lg:"12",className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"classHours"},"Class hours"),r.a.createElement(M.a,{sm:5},r.a.createElement(ee.a,{type:"text",name:"classHours",id:"classHours",value:this.state.course.classHours||"",onChange:this.handleCourseDetailChange})))),r.a.createElement(M.a,{lg:"3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"studyNotes"},"Study notes"),r.a.createElement(M.a,{sm:5},r.a.createElement(ee.a,{type:"text",name:"studyNotes",id:"studyNotes",value:this.state.course.studyNotes||"",onChange:this.handleCourseDetailChange})))),r.a.createElement(M.a,{lg:"3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"tests"},"Tests"),r.a.createElement(M.a,{sm:5},r.a.createElement(ee.a,{type:"text",name:"tests",id:"tests",value:this.state.course.tests||"",onChange:this.handleCourseDetailChange})))),r.a.createElement(M.a,{lg:"3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"exams"},"Exams"),r.a.createElement(M.a,{sm:5},r.a.createElement(ee.a,{type:"text",name:"exams",id:"exams",value:this.state.course.exams||"",onChange:this.handleCourseDetailChange})))))),r.a.createElement(M.a,null,r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"renderAdditionalDetails",id:"renderAdditionalDetails",value:this.state.renderAdditionalDetails||"",onChange:function(t){e.setState({renderAdditionalDetails:t.target.checked})}}),r.a.createElement(Z.a,{for:"renderAdditionalDetails"},"Show Additional Details")))),this.renderAdditionalDetails(),r.a.createElement("h2",{style:{textAlign:"left"},className:"mt-3 mb-3"},"Sections"),r.a.createElement("div",{style:{textAlign:"left"}},this.renderSectionSelector()),this.renderSections(),r.a.createElement("h4",{className:"m-3",style:{textAlign:"left"}},"Add New Section"),r.a.createElement(M.a,{lg:"6"},r.a.createElement(B.a,{className:"mt-3"},r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0},r.a.createElement(M.a,{lg:"2"},r.a.createElement(Z.a,{for:"newSection"},"Section Name")),r.a.createElement(M.a,{lg:"4"},r.a.createElement(ee.a,{type:"text",name:"newSection",id:"newSection",value:this.state.newSection||"",onChange:this.handleChange})),r.a.createElement(M.a,{lg:"2"},r.a.createElement(ee.a,{type:"number",name:"newSectionIndex",id:"newSectionIndex",value:this.state.newSectionIndex,onChange:this.handleChange})),r.a.createElement(M.a,{lg:"4"},r.a.createElement(p.a,{color:"primary",onClick:this.addSection},"Add section"))))))),r.a.createElement(F.a,{className:"m-4"},r.a.createElement(M.a,{className:"lg-2"},r.a.createElement(p.a,{color:"danger",onClick:this.handleDelete},"Delete")),r.a.createElement(M.a,{className:"lg-2"},r.a.createElement(p.a,{color:"primary",onClick:this.handleSubmit},"Submit"))),this.renderSpinner(),this.renderError(),this.redirectToCourses())}}]),a}(r.a.Component),Le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{style:{zIndex:"5",margin:"auto",position:"absolute",top:"100px",left:"100px",bottom:"100px",right:"50px",height:"50px",width:"50px"},color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToCourses=function(){return n.state.success?r.a.createElement(m.a,{to:"/course"}):r.a.createElement("p",null)},n.handleFile=function(e){n.setState({file:e.target.files[0]})},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleVideoDetailChange=function(e,t){var a=n.state.subModule;a.videoURLs[t][e.target.name]=e.target.value,n.setState({subModule:a})},n.renderCoachOptions=function(){if(n.state.allCoaches)return n.state.allCoaches.map((function(e){return r.a.createElement("option",{key:e._id},e.name)}))},n.deleteQuestionCollection=function(e,t){var a=n.state.subModule,r=a[e][t];a[e].splice(t,1),console.log(r),n.setState({subModule:a}),O.a.put(x.getState().apiUrl+"/course/"+n.state.subModule._id+"/submodule",n.state.subModule,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?O.a.delete(x.getState().apiUrl+"/questions/"+r,{headers:{auth:x.getState().auth}}).then((function(e){})):n.setState({apiError:"something went wrong.. Go back"})}))},n.renderSectionalQuestions=function(){return n.state.subModule.sectionalQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(N.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(p.a,{color:"primary",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(e){n.deleteQuestionCollection("sectionalQuestions",t)}})))}))},n.renderPreviousYearQuestions=function(){return n.state.subModule.previousYearQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(N.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(p.a,{color:"link",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(e){n.deleteQuestionCollection("previousYearQuestions",t)}})))}))},n.renderPracticeQuestions=function(){return n.state.subModule.practiceQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(N.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(p.a,{color:"link",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(e){n.deleteQuestionCollection("practiceQuestions",t)}})))}))},n.renderDirectQuestions=function(){return n.state.subModule.directQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(N.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(p.a,{color:"link",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(e){n.deleteQuestionCollection("directQuestions",t)}})))}))},n.renderNewPatternQuestions=function(){return n.state.subModule.newPatternQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(N.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(p.a,{color:"link",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(e){n.deleteQuestionCollection("newPatternQuestions",t)}})))}))},n.renderHandouts=function(){return n.state.subModule.handoutIds.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(p.a,{color:"primary",style:{marginLeft:"10px"},className:"fa fa-eye",onClick:function(){x.getState().auth&&(n.setState({isLoading:!0}),O.a.get(x.getState().storageUrl+"/course/handout/"+e,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),n.setState({pdf:e.data.url,pdfView:!0,isLoading:!1})})))}}),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(){var a=n.state.subModule;a.handoutIds.splice(t,1),n.setState({subModule:a}),O.a.put(x.getState().apiUrl+"/course/"+n.state.subModule._id+"/submodule",n.state.subModule,{headers:{auth:x.getState().auth}}).then((function(t){console.log(t.data),t.data.status?O.a.delete(x.getState().storageUrl+"/course/handout/"+e,{headers:{auth:x.getState().auth}}).then((function(e){})):n.setState({apiError:"something went wrong.. Go back"})}))}})))}))},n.renderVideos=function(){return n.state.subModule.videoURLs.map((function(e,t){var a;return console.log(e.author),n.state.allCoaches&&(a=n.state.allCoaches.filter((function(t){return t._id===e.author}))[0].name),r.a.createElement("div",{key:t},r.a.createElement(B.a,{className:"mb-3"},r.a.createElement(W.a,null,r.a.createElement(X.a,{row:!0},r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"title"},"Title")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"text",name:"title",id:"title",value:n.state.subModule.videoURLs[t].title||"",onChange:function(e){n.handleVideoDetailChange(e,t)}})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"url"},"Video ID")),r.a.createElement(M.a,{className:"m-1",lg:"3"},r.a.createElement(ee.a,{type:"text",name:"url",id:"url",value:n.state.subModule.videoURLs[t].url||"",onChange:function(e){n.handleVideoDetailChange(e,t)}})),r.a.createElement(M.a,{lg:"1"}),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"duration"},"Duration")),r.a.createElement(M.a,{className:"m-1",lg:"3"},r.a.createElement(ee.a,{type:"text",name:"duration",id:"duration",value:n.state.subModule.videoURLs[t].duration||"",onChange:function(e){n.handleVideoDetailChange(e,t)}})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"description"},"Description")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"text",name:"description",id:"description",value:n.state.subModule.videoURLs[t].description||"",onChange:function(e){n.handleVideoDetailChange(e,t)}})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"author"},"Author")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"select",name:"author",id:"author",value:a||"",onChange:function(e){var a=n.state.allCoaches.filter((function(t){return t.name===e.target.value}))[0]._id,r=n.state.subModule;r.videoURLs[t].author=a,n.setState({subModule:r})}},n.renderCoachOptions())))),r.a.createElement("div",{className:"mb-2"},r.a.createElement(N.b,{to:{}},r.a.createElement(p.a,{color:"primary",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(p.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(){var e=n.state.subModule;e.videoURLs.splice(t,1),n.setState({subModule:e}),O.a.put(x.getState().apiUrl+"/course/"+n.state.subModule._id+"/submodule",n.state.subModule,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status||n.setState({apiError:"something went wrong.. Go back"})}))}}))))}))},n.state={success:!1,apiError:"",isLoading:!1,subModule:n.props.state.location.state.subModule,pdfView:!1,questionCollectionType:"Sectional Test Questions"},n.renderError=n.renderError.bind(Object(d.a)(n)),n.redirectToCourses=n.redirectToCourses.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get(x.getState().apiUrl+"/mentor/coach",{headers:{auth:x.getState().auth}}).then((function(t){t.data.status&&0!==t.data.coaches.length&&e.setState({allCoaches:t.data.coaches,newCoach:t.data.coaches[0].name,newCoachId:t.data.coaches[0]._id,newVideoAuthor:t.data.coaches[0]._id})}))}},{key:"render",value:function(){var e=this;return this.state.pdfView?r.a.createElement(V.a,null,r.a.createElement("iframe",{title:"iframe",width:"100%",height:"500px",src:this.state.pdf}),r.a.createElement(p.a,{color:"primary",onClick:function(){e.setState({pdfView:!1})}},"Go back")):r.a.createElement(V.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"10",style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement("div",null,r.a.createElement("h2",null,"Create New Sub Section"),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"12"},this.renderError(),this.renderSpinner()),r.a.createElement(M.a,{lg:"12"},r.a.createElement("h3",null,this.state.subModule.name)),r.a.createElement(M.a,{lg:"6"},r.a.createElement("p",null," Question Collections"),r.a.createElement(B.a,null,r.a.createElement(W.a,{style:{marginRight:"auto"}},r.a.createElement("p",{style:{textAlign:"left"}},"Sectional tests: "),this.renderSectionalQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Previous year question tests:"),this.renderPreviousYearQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Practice question:"),this.renderPracticeQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Direct questions:"),this.renderDirectQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"New Pattern Questions:"),this.renderNewPatternQuestions(),r.a.createElement(X.a,{row:!0},r.a.createElement(ee.a,{className:"m-2",type:"select",name:"questionCollectionType",id:"questionCollectionType",value:this.state.questionCollectionType,onChange:function(t){e.setState({questionCollectionType:t.target.value})}},r.a.createElement("option",null,"Sectional Test Questions"),r.a.createElement("option",null,"Previous Year Questions"),r.a.createElement("option",null,"Practice Questions"),r.a.createElement("option",null,"Direct Questions"),r.a.createElement("option",null,"New Pattern Questions")),r.a.createElement(ee.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(p.a,{className:"m-2",color:"primary",onClick:function(){e.setState({isLoading:!0});var t=e.state.subModule,a=new FormData;a.append("file",e.state.file),a.append("type",e.state.questionCollectionType),a.append("section",e.props.state.location.state.sectionName),O.a.post(x.getState().apiUrl+"/questions",a,{headers:{auth:x.getState().auth}}).then((function(a){a.data.status?("Sectional Test Questions"===e.state.questionCollectionType?t.sectionalQuestions.push(a.data.questionCollection._id):"Previous Year Questions"===e.state.questionCollectionType?t.previousYearQuestions.push(a.data.questionCollection._id):"Practice Questions"===e.state.questionCollectionType?t.practiceQuestions.push(a.data.questionCollection._id):"Direct Questions"===e.state.questionCollectionType?t.directQuestions.push(a.data.questionCollection._id):"New Pattern Questions"===e.state.questionCollectionType&&t.newPatternQuestions.push(a.data.questionCollection._id),e.setState({subModule:t},(function(){O.a.put(x.getState().apiUrl+"/course/"+e.state.subModule._id+"/submodule",e.state.subModule,{headers:{auth:x.getState().auth}}).then((function(t){console.log(t.data),t.data.status||(O.a.delete(x.getState().apiUrl+"/questions/"+a.data.questionCollection._id),e.setState({apiError:"Could not update"}))}))}))):a.data.message&&e.setState({apiError:a.data.message}),e.setState({isLoading:!1})}))}},"Add"))))),r.a.createElement(M.a,{lg:"6"},r.a.createElement("p",null," Handouts"),r.a.createElement(B.a,null,r.a.createElement(W.a,{style:{marginRight:"auto"}},this.renderHandouts(),r.a.createElement(X.a,{row:!0},r.a.createElement(ee.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(p.a,{className:"m-2",color:"primary",onClick:Object(U.a)(Q.a.mark((function t(){var a,n;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),a=e.state.subModule,(n=new FormData).append("handoutFile",e.state.file),t.next=6,O.a.post(x.getState().storageUrl+"/course/handout",n,{headers:{auth:x.getState().auth}}).then((function(t){t.data.status?(console.log(t.data),a.handoutIds.push(t.data.handoutId),e.setState({subModule:a},(function(){O.a.put(x.getState().apiUrl+"/course/"+e.state.subModule._id+"/submodule",e.state.subModule,{headers:{auth:x.getState().auth}}).then((function(a){console.log(a.data),a.data.status||(O.a.delete(x.getState().storageUrl+"/course/handout/"+t.data.fileId),e.setState({apiError:"Could not update"}))}))}))):t.data.message&&e.setState({apiError:t.data.message}),e.setState({isLoading:!1})})).catch((function(t){e.setState({apiError:"could not upload, error: "+t,isLoading:!1})}));case 6:case"end":return t.stop()}}),t)})))},"Add"))))),r.a.createElement(M.a,{lg:"12",className:"mt-3"},r.a.createElement("p",null," Videos"),r.a.createElement(B.a,null,r.a.createElement(W.a,null,this.renderVideos(),r.a.createElement(X.a,{row:!0},r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoTitle"},"Title")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"text",name:"newVideoTitle",id:"newVideoTitle",value:this.state.newVideoTitle||"",onChange:this.handleChange})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideo"},"Video ID")),r.a.createElement(M.a,{className:"m-1",lg:"3"},r.a.createElement(ee.a,{type:"text",name:"newVideo",id:"newVideo",value:this.state.newVideo||"",onChange:this.handleChange})),r.a.createElement(M.a,{lg:"1"}),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoDuration"},"Duration")),r.a.createElement(M.a,{className:"m-1",lg:"3"},r.a.createElement(ee.a,{type:"text",name:"newVideoDuration",id:"newVideoDuration",value:this.state.newVideoDuration||"",onChange:this.handleChange})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoDescription"},"Description")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"text",name:"newVideoDescription",id:"newVideoDescription",value:this.state.newVideoDescription||"",onChange:this.handleChange})),r.a.createElement(M.a,{className:"m-1",lg:"2"},r.a.createElement(Z.a,{for:"newVideoAuthor"},"Author")),r.a.createElement(M.a,{className:"m-1",lg:"9"},r.a.createElement(ee.a,{type:"select",name:"newVideoAuthor",id:"newVideoAuthor",value:this.state.newVideoAuthor||"",onChange:function(t){var a=e.state.allCoaches.filter((function(e){return e.name===t.target.value}))[0]._id;e.setState({newVideoAuthor:a})}},this.renderCoachOptions())),r.a.createElement(M.a,{lg:"2"},r.a.createElement(p.a,{color:"primary",onClick:function(){var t=e.state.subModule,a={url:e.state.newVideo,description:e.state.newVideoDescription,author:e.state.newVideoAuthor,duration:e.state.newVideoDuration,title:e.state.newVideoTitle};t.videoURLs.push(a),e.setState({subModule:t,newVideo:"",newVideoDescription:"",newVideoAuthor:"",newVideoTitle:"",newVideoDuration:""}),O.a.put(x.getState().apiUrl+"/course/"+e.state.subModule._id+"/submodule",e.state.subModule,{headers:{auth:x.getState().auth}}).then((function(t){console.log(t.data),t.data.status||e.setState({apiError:"could not update"})}))}},"Add"))),r.a.createElement("div",null,r.a.createElement(p.a,{color:"primary",onClick:function(t){O.a.put(x.getState().apiUrl+"/course/"+e.state.subModule._id+"/submodule",e.state.subModule,{headers:{auth:x.getState().auth}}).then((function(t){console.log(t.data),t.data.status?e.props.history.goBack():e.setState({apiError:"could not update"})}))}},"Submit")))))))))))}}]),a}(r.a.Component),Ne=Object(m.g)(Le),Ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=5;break}return e.next=3,O.a.get(x.getState().apiUrl+"/mentor/mentor",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({mentors:e.data.mentors}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:return e.next=5,O.a.get(x.getState().apiUrl+"/mentor/coach",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({coaches:e.data.coaches}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={mentors:[],coaches:[],apiError:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e,t;return null!=this.state.mentors&&void 0!==this.state.mentors&&(e=this.state.mentors.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(Ce,{data:e}))}))),null!=this.state.coaches&&void 0!==this.state.coaches&&(t=this.state.coaches.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(Ce,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"mentor/edit",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New Mentor"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Mentors"),r.a.createElement(F.a,{className:"mt-3"},e),r.a.createElement("h1",{style:{margin:"auto"}},"Coaches"),r.a.createElement(F.a,{className:"mt-3"},t),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),Oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.props.state.location||"new"===n.props.state.location.state){e.next=5;break}if(void 0===x.getState().auth){e.next=5;break}return n.setState({isLoading:!0}),e.next=5,O.a.get(x.getState().apiUrl+"/mentor/"+n.props.state.location.state.mentor._id,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.status?(console.log(t.data.mentor),n.setState(t.data.mentor),O.a.get(x.getState().storageUrl+"/mentor/"+n.props.state.location.state.mentor.imageId,{headers:{auth:x.getState().auth}}).then((function(e){var t=e.data.url;n.setState({image:t})})),n.setState({isLoading:!1})):n.setState({apiError:t.data.message,isLoading:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToMentors=function(){return n.state.success?r.a.createElement(m.a,{to:"/mentor"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleFile=function(e){if(e.target.files&&e.target.files[0]){n.setState({file:e.target.files[0]});var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.handleSubmit=function(){var e=Object(U.a)(Q.a.mark((function e(t){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0}),void 0===x.getState().auth){e.next=16;break}if(a=new FormData,null===n.props.state.location||"new"===n.props.state.location.state){e.next=13;break}if(null==n.state.file){e.next=10;break}return a.append("mentorImage",n.state.file),e.next=8,O.a.put(x.getState().storageUrl+"/mentor/"+n.state.imageId,a,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.status){e.next=4;break}n.setState({imageId:t.data.imageId,file:void 0,image:void 0},(function(){O.a.put(x.getState().apiUrl+"/mentor/"+n.props.state.location.state.mentor._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})),e.next=10;break;case 4:if("file not found"!==t.data.message){e.next=9;break}return e.next=7,O.a.post(x.getState().storageUrl+"/mentor",a,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){O.a.put(x.getState().apiUrl+"/mentor/"+n.props.state.location.state.mentor._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 7:e.next=10;break;case 9:n.setState({apiError:"could not upload image"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=11;break;case 10:n.setState({image:void 0},(function(){O.a.put(x.getState().apiUrl+"/mentor/"+n.props.state.location.state.mentor._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))}));case 11:e.next=16;break;case 13:return a.append("mentorImage",n.state.file),e.next=16,O.a.post(x.getState().storageUrl+"/mentor",a,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){O.a.post(x.getState().apiUrl+"/mentor",n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderDeleteButton=function(){if(null!==n.props.state.location&&"new"!==n.props.state.location.state)return r.a.createElement(p.a,{className:"m-3",color:"danger",onClick:function(){n.setState({isLoading:!0}),O.a.delete(x.getState().storageUrl+"/mentor/"+n.state.imageId,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?O.a.delete(x.getState().apiUrl+"/mentor/"+n.state._id,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({isLoading:!1,apiError:e.data.message})})).catch((function(e){n.setState({apiError:e})})):n.setState({isLoading:!1,apiError:"could not delete image"+e.data.message})}))}},"Delete")},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t},(function(){console.log(n.state.tags)}))},n.renderTags=function(){if(null!==n.props.state.location&&"new"===n.props.state.location.state)return r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:n.state.tags.whatsNew||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"whatsNew"},"Whats new")),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"other",id:"other",value:n.state.tags.other||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"other"},"Other")))},n.state={isLoading:!1,apiError:"",type:"Mentor",tags:{}},n.renderDeleteButton=n.renderDeleteButton.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,null,r.a.createElement("h1",null,"Create New Mentor"),r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"400px"},src:this.state.image,alt:""}),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"name"},"Name"),r.a.createElement(ee.a,{type:"text",name:"name",id:"name",placeholder:"Enter Mentor name",value:this.state.name||"",onChange:this.handleChange})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"designation"},"Designation"),r.a.createElement(ee.a,{type:"text",name:"designation",id:"designation",placeholder:"Enter designation",value:this.state.designation||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"1"}),r.a.createElement(M.a,{lg:"5",style:{marginLeft:"auto"}},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"type"},"Type"),r.a.createElement(ee.a,{type:"select",name:"type",id:"type",placeholder:"Enter type",value:this.state.type||"",onChange:this.handleChange},r.a.createElement("option",null,"Mentor"),r.a.createElement("option",null,"Coach"))),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"type"},"Mentor Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:this.handleFile})))),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"previewVideoUrl"},"Preview Video"),r.a.createElement(ee.a,{type:"text",name:"previewVideoUrl",id:"previewVideoUrl",placeholder:"Enter url for preview video",value:this.state.previewVideoUrl||"",onChange:this.handleChange})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"textarea",name:"description",id:"description",placeholder:"Enter description",value:this.state.description||"",onChange:this.handleChange})),r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"bio"},"Bio"),r.a.createElement(ee.a,{type:"textarea",rows:"5",name:"bio",id:"bio",placeholder:"Enter bio",value:this.state.bio||"",onChange:this.handleChange})),this.renderDeleteButton(),r.a.createElement(p.a,{className:"m-3",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToMentors(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),je=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.data.imageId&&O.a.get(x.getState().storageUrl+"/news/"+this.props.data.imageId,{headers:{auth:x.getState().auth}}).then((function(t){var a="data:"+t.headers["content-type"]+";base64,"+t.data;e.setState({image:a})})),r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(te.a,{src:this.state.image}),r.a.createElement(W.a,null,r.a.createElement(Y.a,{style:{textAlign:"left"}},this.props.data.title),r.a.createElement(G.a,{style:{textAlign:"left"}},this.props.data.body),r.a.createElement(N.b,{to:{pathname:"whatsnew/edit",state:{whatsNew:this.props.data}}},r.a.createElement(p.a,null,"View")))))}}]),a}(r.a.Component),De=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=3;break}return e.next=3,O.a.get(x.getState().apiUrl+"/news",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(n.setState({whatsNews:e.data.whatsNews}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={whatsNews:[],apiError:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e;return null!=this.state.whatsNews&&void 0!==this.state.whatsNews&&(e=this.state.whatsNews.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(je,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"whatsnew/edit",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New WhatsNew"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Whats New!"),r.a.createElement(F.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),Te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.props.state.location||"new"===n.props.state.location.state){e.next=5;break}if(void 0===x.getState().auth){e.next=5;break}return n.setState({isLoading:!0}),e.next=5,O.a.get(x.getState().apiUrl+"/news/"+n.props.state.location.state.whatsNew._id,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.status?(console.log(t.data.whatsNew),n.setState(t.data.whatsNew),n.props.state.location.state.whatsNew.imageId&&O.a.get(x.getState().storageUrl+"/news/"+n.props.state.location.state.whatsNew.imageId,{headers:{auth:x.getState().auth}}).then((function(e){var t="data:"+e.headers["content-type"]+";base64,"+e.data;n.setState({image:t})})),n.setState({isLoading:!1})):n.setState({apiError:t.data.message,isLoading:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToMentors=function(){return n.state.success?r.a.createElement(m.a,{to:"/whatsnew"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleFile=function(e){if(e.target.files&&e.target.files[0]){n.setState({file:e.target.files[0]});var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.handleSubmit=function(e){n.setState({isLoading:!0});var t={};if(t.title=n.state.title,t.body=n.state.body,t.imageId=n.state.imageId,void 0!==x.getState().auth){var a=new FormData;null!==n.props.state.location&&"new"!==n.props.state.location.state?n.state.file?(a.append("whatsNewImage",n.state.file),O.a.put(x.getState().storageUrl+"/news/"+n.state.imageId,a,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(t.imageId=e.data.imageId,O.a.put(x.getState().apiUrl+"/news/"+n.props.state.location.state.whatsNew._id,t,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))):n.setState({apiError:"could not upload image",isLoading:!1})}))):O.a.put(x.getState().apiUrl+"/news/"+n.props.state.location.state.whatsNew._id,t,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})})):(a.append("whatsNewImage",n.state.file),O.a.post(x.getState().storageUrl+"/news",a,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(t.imageId=e.data.imageId,O.a.post(x.getState().apiUrl+"/news",t,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))):n.setState({apiError:"could not upload image",isLoading:!1})})))}},n.renderDeleteButton=function(){if(null!==n.props.state.location&&"new"!==n.props.state.location.state)return r.a.createElement(p.a,{className:"m-3",color:"danger",onClick:function(){n.setState({isLoading:!0}),O.a.delete(x.getState().apiUrl+"/news/"+n.state._id,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({isLoading:!1,apiError:e.data.message})})).catch((function(e){n.setState({apiError:e})}))}},"Delete")},n.state={isLoading:!1,apiError:""},n.renderDeleteButton=n.renderDeleteButton.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,null,r.a.createElement("h1",null,"Create Whats New!"),r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"400px"},src:this.state.image,alt:""}),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"title"},"Title"),r.a.createElement(ee.a,{type:"text",name:"title",id:"title",placeholder:"Enter Title for whats new",value:this.state.title||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"5",style:{marginLeft:"auto"}},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"type"},"Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:this.handleFile}))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"text",name:"description",id:"description",value:this.state.description||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0,className:"mt-3"},r.a.createElement(Z.a,{for:"body"},"Body"),r.a.createElement(ee.a,{type:"textarea",rows:"5",name:"body",id:"body",placeholder:"Enter the content",value:this.state.body||"",onChange:this.handleChange})))),this.renderDeleteButton(),r.a.createElement(p.a,{className:"m-3",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToMentors(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),Qe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirect=function(){if(n.state.success)return r.a.createElement(m.a,{to:"/admin"})},n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderApiResponse=function(){if(""!==n.state.apiResponse)return r.a.createElement(q.a,{className:"mt-3",color:"success"},n.state.apiResponse)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.handleChange=function(e){console.log(n.state),n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){n.setState({apiError:"",apiResponse:"",isLoading:!0});var t={email:n.state.email,privilege:n.state.privilege};O.a.post(x.getState().apiUrl+"/admins",t,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({apiResponse:"Admin added successfully",isLoading:!1}):n.setState({apiError:"could not add: "+e.data.message,isLoading:!1})}))},n.state={privilege:"admin",apiError:"",apiResponse:"",isLoading:!1},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.redirect=n.redirect.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,{className:"mt-5"},r.a.createElement(F.a,null,r.a.createElement(M.a,{className:"col-lg-3"}),r.a.createElement(M.a,{className:"col-lg-6"},r.a.createElement(B.a,null,r.a.createElement(Y.a,null),r.a.createElement(W.a,null,r.a.createElement("div",null,r.a.createElement("h2",null,"Add new Admin"),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"email"},"Email"),r.a.createElement(ee.a,{type:"email",name:"email",id:"email",placeholder:"Enter email of the user",onChange:this.handleChange})),r.a.createElement(X.a,{row:!0},r.a.createElement(Z.a,{for:"privilege"},"Privilege"),r.a.createElement(ee.a,{type:"select",name:"privilege",id:"privilege",placeholder:"Enter privilege given to the user",onChange:this.handleChange},r.a.createElement("option",null,"admin"),r.a.createElement("option",null,"editor"))),r.a.createElement(p.a,{color:"primary",onClick:this.handleSubmit},"Submit")))))),r.a.createElement(M.a,{className:"col-lg-3"})),this.redirect(),this.renderError(),this.renderApiResponse(),this.renderSpinner(),this.checkLogin())}}]),a}(r.a.Component),Ue=a(148),qe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=3;break}return e.next=3,O.a.get(x.getState().apiUrl+"/admins",{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){var a,r,s;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.status){e.next=12;break}a=[],r=Q.a.mark((function e(n){var r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data.admins[n],e.next=3,O.a.get(x.getState().apiUrl+"/admins/"+t.data.admins[n].uid,{headers:{auth:x.getState().auth}}).then((function(e){r.name=e.data.admin.name,r.email=e.data.admin.email,r.phone=e.data.admin.phone,r.changedPrivilege=r.privileges}));case 3:a.push(r);case 4:case"end":return e.stop()}}),e)})),e.t0=Q.a.keys(t.data.admins);case 4:if((e.t1=e.t0()).done){e.next=9;break}return s=e.t1.value,e.delegateYield(r(s),"t2",7);case 7:e.next=4;break;case 9:n.setState({admins:a,isLoading:!1}),e.next=14;break;case 12:n.setState({apiError:t.data.message}),n.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderApiResponse=function(){if(""!==n.state.apiResponse)return r.a.createElement(q.a,{className:"mt-3",color:"success"},n.state.apiResponse)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={admins:[],apiError:"",apiResponse:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this;return null!=this.state.admins&&void 0!==this.state.admins&&(e=this.state.admins.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.phone),r.a.createElement("td",null,e.privileges),r.a.createElement("td",null,r.a.createElement(ee.a,{type:"select",name:"privilege",id:"privilege",placeholder:"Enter privilege given to the user",value:e.changedPrivilege,onChange:function(e){var n=t.state.admins;n[a].changedPrivilege=e.target.value,t.setState({admins:n})}},r.a.createElement("option",null,"admin"),r.a.createElement("option",null,"editor"))),r.a.createElement("td",null,r.a.createElement(p.a,{color:"danger",className:"fa fa-trash",onClick:function(){t.setState({isLoading:!0,apiError:"",apiResponse:""}),O.a.delete(x.getState().apiUrl+"/admins/"+e.uid,{headers:{auth:x.getState().auth}}).then((function(e){(console.log(e.data),e.data.status)?(t.state.admins.splice(a,1),t.setState({isLoading:!1})):t.setState({isLoading:!0,apiError:"could not delete: "+e.data.message})}))}}),r.a.createElement(p.a,{color:"primary",className:"fa fa-edit ml-2",onClick:function(){t.setState({isLoading:!0,apiError:"",apiResponse:""}),O.a.put(x.getState().apiUrl+"/admins/"+e.uid,{privilege:t.state.admins[a].changedPrivilege},{headers:{auth:x.getState().auth}}).then((function(e){if(e.data.status){var n=t.state.admins;n[a].privileges=n[a].changedPrivilege,t.setState({admins:n}),t.setState({apiResponse:"Successfully changed",isLoading:!1})}else t.setState({apiError:"Could not change privilege: "+e.data.message,isLoading:!1})}))}})))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"admin/new",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New Admin"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Administrators"),r.a.createElement(F.a,{className:"mt-3"},r.a.createElement(Ue.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SL no."),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Privileges"),r.a.createElement("th",null,"Change Privileges"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,e))),this.renderError(),this.renderApiResponse()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),Ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(Y.a,null,this.props.data.title),r.a.createElement(N.b,{to:{pathname:"blog/edit",state:{blog:this.props.data}}},r.a.createElement(p.a,null,"View")))))}}]),a}(r.a.Component),Me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=3;break}return e.next=3,O.a.get(x.getState().apiUrl+"/blog",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(console.log(e.data),n.setState({blogs:e.data.blog}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={blogs:[],apiError:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e;return null!=this.state.blogs&&void 0!==this.state.blogs&&(e=this.state.blogs.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(Ae,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"blog/edit",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New Blog"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Blogs"),r.a.createElement(F.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),Fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.props.state.location||"new"===n.props.state.location.state){e.next=5;break}if(void 0===x.getState().auth){e.next=5;break}return n.setState({isLoading:!0}),e.next=5,O.a.get(x.getState().apiUrl+"/blog/"+n.props.state.location.state.blog._id,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.status?(console.log(t.data.blog),n.setState(t.data.blog),console.log(t.data.blog.body),O.a.get(x.getState().storageUrl+"/blog/"+n.props.state.location.state.blog.imageId,{headers:{auth:x.getState().auth}}).then((function(e){n.setState({image:e.data.url})})),n.setState({isLoading:!1})):n.setState({apiError:t.data.message,isLoading:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToMentors=function(){return n.state.success?r.a.createElement(m.a,{to:"/blog"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleFile=function(e){if(e.target.files&&e.target.files[0]){n.setState({file:e.target.files[0]});var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.handleSubmit=function(){var e=Object(U.a)(Q.a.mark((function e(t){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0}),void 0===x.getState().auth){e.next=16;break}if(a=new FormData,null===n.props.state.location||"new"===n.props.state.location.state){e.next=13;break}if(null==n.state.file){e.next=10;break}return a.append("blogImage",n.state.file),e.next=8,O.a.put(x.getState().storageUrl+"/blog/"+n.state.imageId,a,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.status){e.next=4;break}n.setState({imageId:t.data.imageId,file:void 0,image:void 0},(function(){O.a.put(x.getState().apiUrl+"/blog/"+n.props.state.location.state.blog._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})),e.next=10;break;case 4:if("file not found"!==t.data.message){e.next=9;break}return e.next=7,O.a.post(x.getState().storageUrl+"/blog",a,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){O.a.put(x.getState().apiUrl+"/blog/"+n.props.state.location.state.blog._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 7:e.next=10;break;case 9:n.setState({apiError:"could not upload image"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=11;break;case 10:n.setState({image:void 0},(function(){O.a.put(x.getState().apiUrl+"/blog/"+n.props.state.location.state.blog._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))}));case 11:e.next=16;break;case 13:return a.append("blogImage",n.state.file),e.next=16,O.a.post(x.getState().storageUrl+"/blog",a,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){O.a.post(x.getState().apiUrl+"/blog",n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderDeleteButton=function(){if(null!==n.props.state.location&&"new"!==n.props.state.location.state)return r.a.createElement(p.a,{className:"m-3",color:"danger",onClick:function(){n.setState({isLoading:!0}),O.a.delete(x.getState().storageUrl+"/blog/"+n.state.imageId,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?O.a.delete(x.getState().apiUrl+"/blog/"+n.state._id,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({isLoading:!1,apiError:e.data.message})})).catch((function(e){n.setState({apiError:e})})):n.setState({isLoading:!1,apiError:"could not delete image"+e.data.message})}))}},"Delete")},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t},(function(){console.log(n.state.tags)}))},n.onMetaChange=function(e){var t=n.state.meta;t[e.target.name]=e.target.value,n.setState({meta:t})},n.renderMeta=function(){return n.state.showMeta?r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{className:"m-2",row:!0},r.a.createElement(Z.a,{for:"title"},"Title"),r.a.createElement(ee.a,{type:"text",name:"title",id:"title",value:n.state.meta.title||"",onChange:n.onMetaChange}))),r.a.createElement(M.a,{lg:"6"},r.a.createElement(X.a,{className:"m-2",row:!0},r.a.createElement(Z.a,{for:"image"},"Image"),r.a.createElement(ee.a,{type:"text",name:"image",id:"image",value:n.state.meta.image||"",onChange:n.onMetaChange}))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{className:"m-2",row:!0},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"textarea",name:"description",id:"description",value:n.state.meta.description||"",onChange:n.onMetaChange})))):r.a.createElement("div",null)},n.renderTags=function(){if(null!==n.props.state.location&&"new"===n.props.state.location.state)return r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:n.state.tags.whatsNew||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"whatsNew"},"Whats new")),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"other",id:"other",value:n.state.tags.other||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"other"},"Other")))},n.renderBody=function(){return"string"===typeof n.state.body?r.a.createElement(re.a,{editor:oe.a,data:n.state.body,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({body:a})},onBlur:function(e,t){},onFocus:function(e,t){}}):n.state.body.map((function(e,t){return"text"===e.type?r.a.createElement(F.a,{key:t},r.a.createElement(M.a,{lg:"10"},r.a.createElement(re.a,{editor:oe.a,data:e.content,onInit:function(e){},onChange:function(e,a){var r=a.getData(),s=n.state.body;s[t].content=r,n.setState({body:s})},onBlur:function(e,t){},onFocus:function(e,t){}})),r.a.createElement(M.a,{lg:"2"},r.a.createElement(p.a,{style:{textAlign:"center"},color:"danger",className:"fa fa-trash",onClick:function(e){var a=n.state.body;a.splice(t,1),n.setState({body:a})}}))):"image"===e.type?r.a.createElement(F.a,{key:t},r.a.createElement(M.a,{lg:"10"},r.a.createElement(le,{parameter:"blog",imageId:e.content})),r.a.createElement(M.a,{lg:"2"},r.a.createElement(p.a,{className:"m-2 fa fa-trash",color:"danger",onClick:function(e){var a=n.state.body,r=n.state.body[t].content;null!==n.props.state.location&&"new"!==n.props.state.location.state?(a.splice(t,1),O.a.put(x.getState().apiUrl+"/blog/"+n.state._id,{body:n.state.body},{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?O.a.delete(x.getState().storageUrl+"/blog/"+r,{headers:{auth:x.getState().auth}}).then((function(e){n.setState({isLoading:!1})})):n.setState({apiError:e.data.message,isLoading:!1,body:a})}))):(a.splice(t,1),O.a.delete(x.getState().storageUrl+"/blog/"+r,{headers:{auth:x.getState().auth}}).then((function(e){n.setState({isLoading:!1})})))}}))):r.a.createElement("div",null)}))},n.renderEditor=function(){return"string"!==typeof n.state.body&&"text"===n.state.currentEditor?r.a.createElement("div",null,r.a.createElement(re.a,{editor:oe.a,data:n.state.newText,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({newText:a})},onBlur:function(e,t){},onFocus:function(e,t){}}),r.a.createElement(p.a,{className:"m-2",color:"primary",onClick:function(e){var t={type:"text",content:n.state.newText},a=n.state.body;a.push(t),n.setState({body:a,currentEditor:"",newText:""})}},"Add")):"string"!==typeof n.state.body&&"image"===n.state.currentEditor?r.a.createElement("div",null,r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"400px"},src:n.state.image2,alt:""}),r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"blogFile"},"image"),r.a.createElement(ee.a,{type:"file",name:"blogFile",id:"blogFile",onChange:function(e){if(e.target.files&&e.target.files[0]){n.setState({blogFile:e.target.files[0]});var t=new FileReader;t.onload=function(e){n.setState({image2:e.target.result})},t.readAsDataURL(e.target.files[0])}}})),r.a.createElement(p.a,{color:"primary",className:"m-2",onClick:function(e){n.setState({isLoading:!0});var t=new FormData;t.append("blogImage",n.state.blogFile),O.a.post(x.getState().storageUrl+"/blog",t,{headers:{auth:x.getState().auth}}).then((function(e){if(e.data.status){var t={type:"image",content:e.data.imageId},a=n.state.body;a.push(t),n.setState({body:a}),n.setState({currentEditor:"",blogImage:void 0,image2:void 0}),null!==n.props.state.location&&"new"!==n.props.state.location.state?O.a.put(x.getState().apiUrl+"/blog/"+n.state._id,{body:n.state.body},{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})})):n.setState({isLoading:!1})}else n.setState({apiError:e.data.message}),n.setState({isLoading:!1});console.log(n.state)}))}},"Add")):void 0},n.state={isLoading:!1,apiError:"",showMeta:!1,meta:{},category:"NewUpdates",body:[],newText:"",images:[]},n.renderDeleteButton=n.renderDeleteButton.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(V.a,null,r.a.createElement("h1",null,"Create New Blog"),r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"400px"},src:this.state.image,alt:""}),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"title"},"Title"),r.a.createElement(ee.a,{type:"text",name:"title",id:"title",placeholder:"Enter title",value:this.state.title||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"5"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"author"},"Author"),r.a.createElement(ee.a,{type:"text",name:"author",id:"author",placeholder:"Enter author name",value:this.state.author||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"2"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"category"},"Category"),r.a.createElement(ee.a,{type:"select",name:"category",id:"category",value:this.state.category,onChange:this.handleChange},r.a.createElement("option",null,"NewUpdates"),r.a.createElement("option",null,"Opportunities"),r.a.createElement("option",null,"Interviews")))),r.a.createElement(M.a,{lg:"8"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"textarea",name:"description",id:"description",value:this.state.description||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"type"},"Blog Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:this.handleFile})))),r.a.createElement("div",{className:"m-2"},r.a.createElement("h5",null,"Body"),r.a.createElement(B.a,null,r.a.createElement(W.a,null,this.renderBody())),r.a.createElement(p.a,{className:"m-2",onClick:function(t){e.setState({currentEditor:"text"})}},"Add text "),r.a.createElement(p.a,{color:"primary",className:"m-2",onClick:function(t){e.setState({currentEditor:"image"})}}," Add Image "),this.renderEditor()),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"showMeta",id:"showMeta",onChange:function(t){e.setState({showMeta:t.target.checked})}}),r.a.createElement(Z.a,{for:"other"},"Show meta tags")),r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"3"}),r.a.createElement(M.a,{lg:"6"},this.renderMeta()),r.a.createElement(M.a,{lg:"3"})),this.renderDeleteButton(),r.a.createElement(p.a,{className:"m-3",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToMentors(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),Ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(Y.a,null,this.props.data.name),r.a.createElement(H.a,null,this.props.data.role),r.a.createElement(N.b,{to:{pathname:"team/edit",state:{team:this.props.data}}},r.a.createElement(p.a,null,"View")))))}}]),a}(r.a.Component),_e=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===x.getState().auth){e.next=3;break}return e.next=3,O.a.get(x.getState().apiUrl+"/team",{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?(console.log(e.data),n.setState({team:e.data.team}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={team:[],apiError:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e;return null!=this.state.team&&void 0!==this.state.team&&(e=this.state.team.map((function(e){return r.a.createElement(M.a,{lg:"3",key:e._id},r.a.createElement(Ve,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(N.b,{style:{marginLeft:"auto"},to:{pathname:"team/edit",state:"new"}},r.a.createElement(p.a,{className:"mt-2 mr-4",color:"primary"},"Create New Member"))),r.a.createElement(V.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Team"),r.a.createElement(F.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),Pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(U.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.props.state.location||"new"===n.props.state.location.state){e.next=5;break}if(void 0===x.getState().auth){e.next=5;break}return n.setState({isLoading:!0}),e.next=5,O.a.get(x.getState().apiUrl+"/team/"+n.props.state.location.state.team._id,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.status?(console.log("storage call"),n.setState(t.data.team),O.a.get(x.getState().storageUrl+"/team/"+n.props.state.location.state.team.imageId,{headers:{auth:x.getState().auth}}).then((function(e){n.setState({image:e.data.url})})),n.setState({isLoading:!1})):n.setState({apiError:t.data.message,isLoading:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(q.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(A.a,{color:"primary"})},n.checkLogin=function(){return void 0===x.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToMentors=function(){return n.state.success?r.a.createElement(m.a,{to:"/team"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleFile=function(e){if(e.target.files&&e.target.files[0]){n.setState({file:e.target.files[0]});var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.handleSubmit=function(){var e=Object(U.a)(Q.a.mark((function e(t){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0}),void 0===x.getState().auth){e.next=16;break}if(a=new FormData,null===n.props.state.location||"new"===n.props.state.location.state){e.next=13;break}if(null==n.state.file){e.next=10;break}return a.append("teamImage",n.state.file),e.next=8,O.a.put(x.getState().storageUrl+"/team/"+n.state.imageId,a,{headers:{auth:x.getState().auth}}).then(function(){var e=Object(U.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.status){e.next=4;break}n.setState({imageId:t.data.imageId,file:void 0,image:void 0},(function(){O.a.put(x.getState().apiUrl+"/team/"+n.props.state.location.state.team._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})),e.next=10;break;case 4:if("file not found"!==t.data.message){e.next=9;break}return e.next=7,O.a.post(x.getState().storageUrl+"/team",a,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){O.a.put(x.getState().apiUrl+"/team/"+n.props.state.location.state.team._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 7:e.next=10;break;case 9:n.setState({apiError:"could not upload image"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=11;break;case 10:n.setState({image:void 0},(function(){O.a.put(x.getState().apiUrl+"/team/"+n.props.state.location.state.team._id,n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))}));case 11:e.next=16;break;case 13:return a.append("teamImage",n.state.file),e.next=16,O.a.post(x.getState().storageUrl+"/team",a,{headers:{auth:x.getState().auth}}).then((function(e){console.log(e.data),e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){O.a.post(x.getState().apiUrl+"/team",n.state,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderDeleteButton=function(){if(null!==n.props.state.location&&"new"!==n.props.state.location.state)return r.a.createElement(p.a,{className:"m-3",color:"danger",onClick:function(){n.setState({isLoading:!0}),O.a.delete(x.getState().apiUrl+"/team/"+n.state._id,{headers:{auth:x.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({isLoading:!1,apiError:e.data.message})})).catch((function(e){n.setState({apiError:e})}))}},"Delete")},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t},(function(){console.log(n.state.tags)}))},n.renderTags=function(){if(null!==n.props.state.location&&"new"===n.props.state.location.state)return r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:n.state.tags.whatsNew||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"whatsNew"},"Whats new")),r.a.createElement(X.a,{className:"ml-4",row:!0},r.a.createElement(ee.a,{type:"checkbox",name:"other",id:"other",value:n.state.tags.other||"",onChange:n.onTagChange}),r.a.createElement(Z.a,{for:"other"},"Other")))},n.state={isLoading:!1,apiError:"",teamType:"Mentors"},n.renderDeleteButton=n.renderDeleteButton.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(V.a,null,r.a.createElement("h1",null,"Create New Member"),r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"400px"},src:this.state.image,alt:""}),r.a.createElement(ae.a,{className:"m-3"},r.a.createElement(F.a,null,r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"name"},"Name"),r.a.createElement(ee.a,{type:"text",name:"name",id:"name",placeholder:"Enter name",value:this.state.name||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"role"},"Role"),r.a.createElement(ee.a,{type:"text",name:"role",id:"role",placeholder:"Enter role",value:this.state.role||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"teamType"},"Team"),r.a.createElement(ee.a,{type:"select",name:"teamType",id:"teamType",value:this.state.teamType,onChange:this.handleChange},r.a.createElement("option",null,"Operations Team"),r.a.createElement("option",null,"The leads"),r.a.createElement("option",null,"Mentors"),r.a.createElement("option",null,"Accounts Team"),r.a.createElement("option",null,"HR Team"),r.a.createElement("option",null,"Academics Team"),r.a.createElement("option",null,"Coaches"),r.a.createElement("option",null,"Engineering Team"),r.a.createElement("option",null,"Outreach Team"),r.a.createElement("option",null,"Social Media Team"),r.a.createElement("option",null,"Design Team"),r.a.createElement("option",null,"Administration Team"),r.a.createElement("option",null,"Multimedia Team"),r.a.createElement("option",null,"Research Team")))),r.a.createElement(M.a,{lg:"8"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"description"},"Description"),r.a.createElement(ee.a,{type:"textarea",name:"description",id:"description",value:this.state.description||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"file"},"Member Image"),r.a.createElement(ee.a,{type:"file",name:"file",id:"file",onChange:this.handleFile}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"linkedIn"},"linkedIn"),r.a.createElement(ee.a,{type:"text",name:"linkedIn",id:"linkedIn",value:this.state.linkedIn||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"instagram"},"Instagram"),r.a.createElement(ee.a,{type:"text",name:"instagram",id:"instagram",value:this.state.instagram||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"4"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"blog"},"Blog"),r.a.createElement(ee.a,{type:"text",name:"blog",id:"blog",value:this.state.blog||"",onChange:this.handleChange}))),r.a.createElement(M.a,{lg:"12"},r.a.createElement(X.a,{row:!0,className:"m-2"},r.a.createElement(Z.a,{for:"bio"},"Bio"),r.a.createElement(ee.a,{type:"textarea",rows:"7",name:"bio",id:"bio",value:this.state.bio||"",onChange:this.handleChange})))),this.renderDeleteButton(),r.a.createElement(p.a,{className:"m-3",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToMentors(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),Re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).renderNav=function(){if("/storage"!==e.props.location.pathname)return r.a.createElement(D,null)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.renderNav(),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(m.a,{to:"/digest"})}}),r.a.createElement(m.b,{exact:!0,path:"/digest",render:function(e){return r.a.createElement($,null)}}),r.a.createElement(m.b,{path:"/digest/edit",render:function(e){return r.a.createElement(ie,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(ue,null)}}),r.a.createElement(m.b,{exact:!0,path:"/question",render:function(e){return r.a.createElement(ge,null)}}),r.a.createElement(m.b,{exact:!0,path:"/question/view",render:function(e){return r.a.createElement(Se,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/question/new",render:function(e){return r.a.createElement(be,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/storage",render:function(e){return r.a.createElement(ve,null)}}),r.a.createElement(m.b,{exact:!0,path:"/course",render:function(e){return r.a.createElement(ye,null)}}),r.a.createElement(m.b,{exact:!0,path:"/course/edit",render:function(e){return r.a.createElement(ke,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/course/viewSubModule",render:function(e){return r.a.createElement(Ne,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/mentor",render:function(e){return r.a.createElement(Ie,null)}}),r.a.createElement(m.b,{exact:!0,path:"/mentor/edit",render:function(e){return r.a.createElement(Oe,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/whatsnew",render:function(e){return r.a.createElement(De,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/whatsnew/edit",render:function(e){return r.a.createElement(Te,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/admin/new",render:function(e){return r.a.createElement(Qe,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(qe,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/blog",render:function(e){return r.a.createElement(Me,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/blog/edit",render:function(e){return r.a.createElement(Fe,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/team",render:function(e){return r.a.createElement(_e,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/team/edit",render:function(e){return r.a.createElement(Pe,{state:e})}})))}}]),a}(r.a.Component),Be=Object(m.g)(Object(k.b)((function(e){return{auth:e}}))(Re));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k.a,{store:x},r.a.createElement(N.a,null,r.a.createElement(Be,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){e.exports=a(123)},73:function(e,t,a){},74:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.158e1f64.chunk.js.map