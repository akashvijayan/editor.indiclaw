(this["webpackJsonpeditor.indiclaw"]=this["webpackJsonpeditor.indiclaw"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),o=a.n(s),i=(a(70),a(71),a(72),a(9)),l=a(10),c=a(12),u=a(11),m=(a(73),a(14)),d=a(4),g=a(120),h=a(121),p=a(122),E=a(123),f=a(124),S=a(125),b=a(13),v=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toggle=function(){n.setState({isOpen:!n.state.isOpen})},n.isLoggedIn=function(){if(void 0===n.props.isLoggedIn||!1===n.props.isLoggedIn)return r.a.createElement(g.a,{className:"ml-auto",navbar:!0},r.a.createElement(h.a,null,r.a.createElement(b.b,{style:{color:"grey"},to:"/login"},"Login")))},n.state={isOpen:!1},n.toggle=n.toggle.bind(Object(d.a)(n)),n.isLoggedIn=n.isLoggedIn.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,{color:"light",light:!0,expand:"md"},r.a.createElement(E.a,null,"Indic Law"),r.a.createElement(f.a,{onClick:this.toggle}),r.a.createElement(S.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(g.a,{className:"mr-auto",navbar:!0},r.a.createElement(h.a,null,r.a.createElement(b.b,{style:{color:"grey"},className:"m-3",to:"/digest"},"Digest")),r.a.createElement(h.a,null,r.a.createElement(b.b,{style:{color:"grey"},className:"m-3",to:"/course"},"Courses")),r.a.createElement(h.a,null,r.a.createElement(b.b,{style:{color:"grey"},className:"m-3",to:"/question"},"Questions")),r.a.createElement(h.a,null,r.a.createElement(b.b,{style:{color:"grey"},className:"m-3",to:"/mentor"},"Mentors")),r.a.createElement(h.a,null,r.a.createElement(b.b,{style:{color:"grey"},className:"m-3",to:"/whatsnew"},"Whats new")),r.a.createElement(h.a,null,r.a.createElement(b.b,{style:{color:"grey"},className:"m-3",to:"/admin"},"Admins"))),this.isLoggedIn())))}}]),a}(r.a.Component),w=a(6),y=a.n(w),C=a(15),x=a(142),N=a(132),L=a(133),k=a(134),O=a(131),j=a(135),I=a(126),D=a(127),q=a(128),U=a(129),M=a(130),T=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(D.a,null,r.a.createElement(q.a,null,this.props.data.title),r.a.createElement(U.a,null,this.props.data.digestType),r.a.createElement(M.a,{dangerouslySetInnerHTML:{__html:this.props.data.news}}),r.a.createElement(b.b,{to:{pathname:"digest/edit",state:{digest:this.props.data,isEdit:!0}}},r.a.createElement(O.a,null,"Edit")))))}}]),a}(r.a.Component),Q=a(2),A=a.n(Q),F=a(21);var R=a(39),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{apiUrl:"https://api.indiclaw.com",storageUrl:"https://storage.indiclaw.com"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"saveLoginAuth":return e.auth=t.payload,Object(R.a)(Object(R.a)({},e),{},{auth:t.payload});case"getLoginAuth":case"getAPIUrl":case"getStorageUrl":default:return e}},V=a(30),P=a(64),B=Object(V.c)(_,Object(V.a)(P.a)),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getDigests()},n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.getDigests=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.getState().auth){e.next=3;break}return e.next=3,A.a.get(B.getState().apiUrl+"/digest",{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({digests:e.data.digests}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={digests:[],apiError:"",isLoading:!0},n.getDigests=n.getDigests.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e;return null!=this.state.digests&&void 0!==this.state.digests&&(e=this.state.digests.map((function(e){return r.a.createElement(L.a,{lg:"3",key:e._id},r.a.createElement(T,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(b.b,{style:{marginLeft:"auto"},to:{pathname:"digest/edit",state:"new"}},r.a.createElement(O.a,{className:"mt-2 mr-4",color:"primary"},"Create New Digest"))),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Digests"),r.a.createElement(k.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),W=Object(F.b)((function(e){return{auth:e}}),(function(e){return{getAuth:function(){return e({type:"getLoginAuth"})}}}))(Y),H=a(18),G=a(136),J=a(137),z=a(138),$=a(139),K=a(140),X=a(25),Z=a.n(X),ee=a(26),te=a.n(ee),ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{style:{zIndex:"5",margin:"auto",position:"absolute",top:"100px",left:"100px",bottom:"100px",right:"50px",height:"50px",width:"50px"},color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToDigests=function(){return n.state.success?r.a.createElement(m.a,{to:"/digest"}):r.a.createElement("p",null)},n.submitDigest=function(){n.setState({digestImage:"",image:""},(function(){null!=n.props.state.location&&n.props.state.location.state.isEdit?void 0!==B.getState().auth&&A.a.put(B.getState().apiUrl+"/digest/"+n.props.state.location.state.digest._id,n.state,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0}):n.setState({apiError:e.data.message,isLoading:!1})})):void 0!==B.getState().auth&&A.a.post(B.getState().apiUrl+"/digest",n.state,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0}):n.setState({apiError:e.data.message,isLoading:!1})}))}))},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){var e=Object(C.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0,isSubmitting:!0}),a=new FormData,null===n.state.removeImageId||void 0===n.state.removeImageId||""===n.state.removeImageId){e.next=13;break}if(null===n.state.digestImage||void 0===n.state.digestImage||""===n.state.digestImage){e.next=9;break}return a.append("digestImage",n.state.digestImage),e.next=7,A.a.put(B.getState().storageUrl+"/digest/"+n.state.removeImageId,a,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status&&(n.setState({imageId:e.data.imageId}),n.submitDigest())}));case 7:e.next=11;break;case 9:return e.next=11,A.a.delete(B.getState().storageUrl+"/digest/"+n.state.removeImageId,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status&&n.submitDigest()}));case 11:e.next=20;break;case 13:if(null===n.state.digestImage||void 0===n.state.digestImage||""===n.state.digestImage){e.next=19;break}return a.append("digestImage",n.state.digestImage),e.next=17,A.a.post(B.getState().storageUrl+"/digest",a,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status&&(n.setState({imageId:e.data.imageId}),n.submitDigest())}));case 17:e.next=20;break;case 19:n.submitDigest();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(){void 0!==B.getState().auth&&A.a.delete(B.getState().apiUrl+"/digest/"+n.props.state.location.state.digest._id,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0}):n.setState({apiError:e.data.message})})).catch((function(e){console.log(e)}))},n.handleFile=function(e){if(null!==n.state.imageId&&void 0!==n.state.imageId&&""!==n.state.imageId&&(n.setState({removeImageId:n.state.imageId}),n.setState({imageId:""})),n.setState({digestImage:e.target.files[0]}),e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}n.setState({apiError:""})},n.uploadImage=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n.removeImage=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({digestImage:""}),null!==n.state.imageId&&void 0!==n.state.imageId&&""!==n.state.imageId&&(n.setState({removeImageId:n.state.imageId}),n.setState({imageId:""},(function(){})));case 2:case"end":return e.stop()}}),e)}))),n.renderImagePart=function(){return null!=n.state.imageId&&""!==n.state.imageId||null!=n.state.digestImage&&""!==n.state.digestImage?null!=n.state.imageId&&""!==n.state.imageId||null==n.state.digestImage&&""===n.state.digestImage?null!==n.state.imageId&&void 0!==n.state.imageId&&""!==n.state.imageId&&!1===n.state.isSubmitting&&null==n.state.digestImage?(console.log(B.getState().storageUrl+"/digest/"+n.state.imageId),A.a.get(B.getState().storageUrl+"/digest/"+n.state.imageId,{headers:{auth:B.getState().auth}}).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==n.state.image&&void 0!==n.state.image&&""!==n.state.image||n.setState({image:"data:"+t.headers["content-type"]+";base64,"+t.data});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"12",className:"mb-3"},r.a.createElement(I.a,null,r.a.createElement($.a,{top:!0,style:{maxWidth:"500px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.image}),r.a.createElement(D.a,null,r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"file"},"Choose file and upload to change Image"),r.a.createElement(z.a,{type:"file",name:"file",id:"file",onChange:n.handleFile})),r.a.createElement(O.a,{className:"ml-1",color:"danger",onClick:n.removeImage},"Remove this Image")))))):void 0:r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"12",className:"mb-3"},r.a.createElement(I.a,null,r.a.createElement($.a,{top:!0,style:{maxWidth:"500px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.image}),r.a.createElement(D.a,null,r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"file"},"Choose file to change Image"),r.a.createElement(z.a,{type:"file",name:"file",id:"file",onChange:n.handleFile})),r.a.createElement(O.a,{className:"ml-1",color:"danger",onClick:n.removeImage},"Remove this Image"))))):r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"4"}),r.a.createElement(L.a,{lg:"4",className:"m-3"},r.a.createElement(I.a,null,r.a.createElement(D.a,null,r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"file"},"Image"),r.a.createElement(z.a,{type:"file",name:"file",id:"file",onChange:n.handleFile}))))))},n.populateFields=function(){return"CurrentAffairs"===n.state.digestType||"History"===n.state.digestType?r.a.createElement(k.a,{className:"mt-3"},r.a.createElement(L.a,{lg:"3"}),r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,null,r.a.createElement(q.a,{className:"mt-2"},"Learnings"),r.a.createElement(D.a,null,r.a.createElement(Z.a,{editor:te.a,data:n.state.learnings,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({learnings:a})},onBlur:function(e,t){},onFocus:function(e,t){}}))))):"Judgements"===n.state.digestType?r.a.createElement(k.a,{className:"mt-3"},r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,null,r.a.createElement(q.a,{className:"mt-2"},"Laws"),r.a.createElement(D.a,null,r.a.createElement(Z.a,{editor:te.a,data:n.state.laws,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({laws:a})},onBlur:function(e,t){},onFocus:function(e,t){}})))),r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,null,r.a.createElement(q.a,{className:"mt-2"},"Ratio"),r.a.createElement(D.a,null,r.a.createElement(Z.a,{editor:te.a,data:n.state.ratio,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({ratio:a})},onBlur:function(e,t){},onFocus:function(e,t){}}))))):"Bills/Laws"===n.state.digestType?r.a.createElement(k.a,{className:"mt-3"},r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,null,r.a.createElement(q.a,{className:"mt-2"},"Features"),r.a.createElement(D.a,null,r.a.createElement(Z.a,{editor:te.a,data:n.state.features,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({features:a})},onBlur:function(e,t){},onFocus:function(e,t){}})))),r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,null,r.a.createElement(q.a,{className:"mt-2"},"Dialogue"),r.a.createElement(D.a,null,r.a.createElement(Z.a,{editor:te.a,data:n.state.dialogue,onInit:function(e){},onChange:function(e,t){var a=t.getData();n.setState({dialogue:a})},onBlur:function(e,t){},onFocus:function(e,t){}}))))):void 0},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t})},n.renderTags=function(){if(null!==n.props.state.location&&"new"===n.props.state.location.state)return r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:n.state.tags.whatsNew||"",onChange:n.onTagChange}),r.a.createElement(J.a,{for:"whatsNew"},"Whats new")),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"other",id:"other",value:n.state.tags.other||"",onChange:n.onTagChange}),r.a.createElement(J.a,{for:"other"},"Other")))},null!==n.props.state.location&&"new"!==n.props.state.location.state?(n.state={title:"",digestType:"",news:"",context:"",learnings:"",laws:"",ratio:"",features:"",dialogue:"",tags:{},success:!1,apiError:"",isLoading:!0,isSubmitting:!1},void 0!==B.getState().auth&&A.a.get(B.getState().apiUrl+"/digest/"+n.props.state.location.state.digest._id,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState(e.data.digest),n.setState({success:!1,digestType:n.props.state.location.state.digest.digestType,isLoading:!1,tags:{}})):n.setState({apiError:e.data.message,isLoading:!1})}))):n.state={title:"",digestType:"CurrentAffairs",news:"",context:"",learnings:"",laws:"",ratio:"",features:"",dialogue:"",tags:{},success:!1,apiError:"",isLoading:!1,isSubmitting:!1},n.populateFields=n.populateFields.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.redirectToDigests=n.redirectToDigests.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.renderImagePart=n.renderImagePart.bind(Object(d.a)(n)),n.handleFile=n.handleFile.bind(Object(d.a)(n)),n.uploadImage=n.uploadImage.bind(Object(d.a)(n)),n.submitDigest=n.submitDigest.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(j.a,null,r.a.createElement("h1",null,"Digest Editor"),this.renderImagePart(),r.a.createElement(K.a,{className:"mt-4"},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"6"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"digestType",sm:2},"Category"),r.a.createElement(L.a,{sm:10},r.a.createElement(z.a,{type:"select",name:"digestType",id:"digestType",value:this.state.digestType,onChange:this.handleChange},r.a.createElement("option",null,"CurrentAffairs"),r.a.createElement("option",null,"Judgements"),r.a.createElement("option",null,"Bills/Laws"),r.a.createElement("option",null,"History"))))),r.a.createElement(L.a,{lg:"6"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"title",sm:2},"Title"),r.a.createElement(L.a,{sm:10},r.a.createElement(z.a,{type:"text",name:"title",id:"title",value:this.state.title,onChange:this.handleChange})))),r.a.createElement(L.a,{lg:"12"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"description",sm:1},"Description"),r.a.createElement(L.a,{sm:11},r.a.createElement(z.a,{type:"textarea",rows:"3",name:"description",id:"description",value:this.state.description,onChange:this.handleChange})))),r.a.createElement(L.a,{lg:"12"},this.renderTags()))),r.a.createElement(k.a,{className:"mt-4"},r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,null,r.a.createElement(q.a,{className:"mt-2"},"News"),r.a.createElement(D.a,null,r.a.createElement(Z.a,{editor:te.a,data:this.state.news,onInit:function(e){},onChange:function(t,a){var n=a.getData();e.setState({news:n})},onBlur:function(e,t){},onFocus:function(e,t){}})))),r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,null,r.a.createElement(q.a,{className:"mt-2"},"Context"),r.a.createElement(D.a,null,r.a.createElement(Z.a,{editor:te.a,data:this.state.context,onInit:function(e){},onChange:function(t,a){var n=a.getData();e.setState({context:n})},onBlur:function(e,t){},onFocus:function(e,t){}}))))),this.populateFields(),r.a.createElement(k.a,{className:"m-4"},r.a.createElement(L.a,{className:"lg-2"},r.a.createElement(O.a,{color:"danger",onClick:this.handleDelete},"Delete")),r.a.createElement(L.a,{className:"lg-2"},r.a.createElement(O.a,{color:"primary",onClick:this.handleSubmit},"Submit"))),this.checkLogin(),this.renderSpinner(),this.renderError(),this.redirectToDigests())}}]),a}(r.a.Component),ne=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).redirect=function(){if(n.state.success)return r.a.createElement(m.a,{to:"/digest"})},n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){n.state.isLogin?(n.setState({isLoading:!0}),A.a.post(B.getState().apiUrl+"/users/login",n.state).then((function(e){!0===e.data.status?(n.props.saveAuth(e.headers.auth),void 0!==B.getState().auth?n.setState({success:!0}):(n.setState({apiError:"Could not log you in"}),n.setState({isLoading:!1}))):null!==e.data.message?(n.setState({apiError:e.data.message}),n.setState({isLoading:!1})):(n.setState({apiError:"Could not log you in"}),n.setState({isLoading:!1}))}))):A.a.post(B.getState().apiUrl+"/users",n.state).then((function(e){})).then((function(){A.a.post(B.getState().apiUrl+"/users/login",n.state).then((function(e){!0===e.data.status?(n.props.saveAuth(e.headers.auth),void 0!==B.getState().auth?n.setState({success:!0}):n.setState({apiError:"Could not log you in"})):null!==e.data.message?n.setState({apiError:e.data.message}):n.setState({apiError:"Could not log you in"})}))}))},n.renderForm=function(){return n.state.isLogin?r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"email"},"Email"),r.a.createElement(z.a,{type:"email",name:"email",id:"email",placeholder:"Enter email",onChange:n.handleChange})),r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"password"},"Password"),r.a.createElement(z.a,{type:"password",name:"password",id:"password",placeholder:"password",onChange:n.handleChange})),r.a.createElement(O.a,{color:"primary",onClick:n.handleSubmit},"Submit"),r.a.createElement("br",null),r.a.createElement(O.a,{color:"link",onClick:function(){n.setState({isLogin:!1})}},"Sign Up"))):r.a.createElement("div",null,r.a.createElement("h2",null,"Sign Up"),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"name"},"Name"),r.a.createElement(z.a,{type:"text",name:"name",id:"name",placeholder:"Enter name",onChange:n.handleChange})),r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"email"},"Email"),r.a.createElement(z.a,{type:"email",name:"email",id:"email",placeholder:"Enter email",onChange:n.handleChange})),r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"phone"},"Phone Number"),r.a.createElement(z.a,{type:"phone",name:"phone",id:"phone",placeholder:"Enter phone number",onChange:n.handleChange})),r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"password"},"Password"),r.a.createElement(z.a,{type:"password",name:"password",id:"password",placeholder:"password",onChange:n.handleChange})),r.a.createElement(O.a,{color:"primary",onClick:n.handleSubmit},"Submit"),r.a.createElement("br",null),r.a.createElement(O.a,{color:"link",onClick:function(){n.setState({isLogin:!0})}},"Log in")))},n.state={isLogin:!0,apiError:"",isLoading:!1},n.renderForm=n.renderForm.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.redirect=n.redirect.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,{className:"mt-5"},r.a.createElement(k.a,null,r.a.createElement(L.a,{className:"col-lg-3"}),r.a.createElement(L.a,{className:"col-lg-6"},r.a.createElement(I.a,null,r.a.createElement(q.a,null),r.a.createElement(D.a,null,this.renderForm()))),r.a.createElement(L.a,{className:"col-lg-3"})),this.redirect(),this.renderError(),this.renderSpinner())}}]),a}(r.a.Component),re=Object(F.b)((function(e){return{auth:e}}),(function(e){return{saveAuth:function(t){return e(function(e){return{type:"saveLoginAuth",payload:e}}(t))}}}))(ne),se=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(D.a,null,r.a.createElement(q.a,null,this.props.data.name),r.a.createElement(U.a,null,this.props.data.type),r.a.createElement(M.a,null,this.props.data.description),r.a.createElement(b.b,{to:{pathname:"question/view",state:{questionCollectionId:this.props.data._id}}},r.a.createElement(O.a,null,"View")))))}}]),a}(r.a.Component),oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.getQuestionCollections=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.getState().auth){e.next=3;break}return e.next=3,A.a.get(B.getState().apiUrl+"/questions",{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({questionCollections:e.data.collections}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={questionCollections:[],apiError:"",isLoading:!0},n.getQuestionCollections=n.getQuestionCollections.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.getQuestionCollections(),n}return Object(l.a)(a,[{key:"render",value:function(){var e;return null!=this.state.questionCollections&&void 0!==this.state.questionCollections&&(e=this.state.questionCollections.map((function(e){return r.a.createElement(L.a,{lg:"3",key:e._id},r.a.createElement(se,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(b.b,{style:{marginLeft:"auto"},to:{pathname:"question/new",state:"new"}},r.a.createElement(O.a,{className:"mt-2 mr-4",color:"primary"},"Create New Collection"))),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Question Collections"),r.a.createElement(k.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),ie=Object(F.b)((function(e){return{auth:e}}),(function(e){return{getAuth:function(){return e({type:"getLoginAuth"})}}}))(oe),le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderExplanation=function(e,t){if(e.explanation)return r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"explanation"}," Explanation "),r.a.createElement(z.a,{type:"textarea",rows:"5",name:"explanation",id:"explanation",value:e.explanation,onChange:function(e){n.props.handleChangeFunction(e,n.props.index,t)}}))},n.renderImage=function(e){if(e.imageId)return A.a.get(B.getState().storageUrl+"/question/"+e.imageId,{headers:{auth:B.getState().auth}}).then((function(e){""===n.state.imageData&&n.setState({imageData:"data:"+e.headers["content-type"]+";base64,"+e.data})})),r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:"500px",maxHeight:"300px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.imageData,alt:"img"}))},n.state={imageData:""},n.renderExplanation=n.renderExplanation.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this;return null!=this.props.questions&&void 0!==this.props.questions&&(e=this.props.questions.questions.map((function(e,a){return r.a.createElement(L.a,{lg:"12",key:a,className:"m-3"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"questionNumber"},"Question Number"),r.a.createElement(z.a,{type:"text",name:"questionNumber",id:"questionNumber",value:e.questionNumber,onChange:function(e){t.props.handleChangeFunction(e,t.props.index,a)}})),r.a.createElement("h5",{style:{textAlign:"left"}},"Options"),r.a.createElement("ul",{style:{textAlignVertical:"center",textAlign:"left"}},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"options[0]"},"A) "),r.a.createElement(z.a,{type:"text",name:"options[0]",id:"options[0]",value:e.options[0],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,0)}})),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"options[1]"},"B) "),r.a.createElement(z.a,{type:"text",name:"options[1]",id:"options[1]",value:e.options[1],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,1)}})),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"options[2]"},"C) "),r.a.createElement(z.a,{type:"text",name:"options[2]",id:"options[2]",value:e.options[2],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,2)}})),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"options[3]"},"D) "),r.a.createElement(z.a,{type:"text",name:"options[3]",id:"options[3]",value:e.options[3],onChange:function(e){t.props.handleOptionChange(e,t.props.index,a,3)}}))),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"answer"}," Answer "),r.a.createElement(z.a,{type:"text",name:"answer",id:"answer",value:e.answer,onChange:function(e){t.props.handleChangeFunction(e,t.props.index,a)}})),t.renderExplanation(e,a),t.renderImage(e))}))),r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(D.a,null,e)))}}]),a}(r.a.Component),ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.getQuestionCollection=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.getState().auth){e.next=4;break}return t=n.props.state.location.state.questionCollectionId,e.next=4,A.a.get(B.getState().apiUrl+"/questions/"+t,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({collection:e.data.collection}),n.setState({questionData:e.data.questionData}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 4:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToQuestions=function(){return n.state.success?r.a.createElement(m.a,{to:"/question"}):r.a.createElement("p",null)},n.renderDirection=function(e){if(n.state.questionData[e].direction)return r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"direction"},"Direction"),r.a.createElement(z.a,{type:"text",name:"direction",id:"direction",value:n.state.questionData[e].direction,onChange:function(t){n.handleQuestionDataChange(t,e)}}))},n.renderLegalPrinciple=function(e){if(n.state.questionData[e].legalPrinciple)return r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"legalPrinciple"},"Legal Principle"),r.a.createElement(z.a,{type:"textarea",rows:"15",name:"legalPrinciple",id:"legalPrinciple",value:n.state.questionData[e].legalPrinciple,onChange:function(t){n.handleQuestionDataChange(t,e)}}))},n.renderImage=function(e,t){if(e.imageId)return A.a.get(B.getState().storageUrl+"/question/"+e.imageId,{headers:{auth:B.getState().auth}}).then(function(){var e=Object(C.a)(y.a.mark((function e(a){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=n.state.questionData[t].imageData&&""!==n.state.questionData[t].imageData||((r=n.state.questionData)[t].imageData="data:"+a.headers["content-type"]+";base64,"+a.data,n.setState({questionData:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:"500px",maxHeight:"300px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.questionData[t].imageData,alt:"img"}))},n.deleteCollection=function(){void 0!==B.getState().auth&&(n.setState({isLoading:!0}),A.a.delete(B.getState().apiUrl+"/questions/"+n.props.state.location.state.questionCollectionId,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({isLoading:!1}),n.setState({success:!0})):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message}))})).catch((function(e){n.setState({isLoading:!1}),console.log(e)})))},n.handleCollectionDataChange=function(e){var t=n.state.collection;t[e.target.name]=e.target.value,n.setState({collection:t})},n.handleQuestionDataChange=function(e,t){var a=n.state.questionData;a[t][e.target.name]=e.target.value,n.setState({questionData:a})},n.handleSubQuestionsDataChange=function(e,t,a){var r=n.state.questionData;r[t].questions[a][e.target.name]=e.target.value,n.setState({questionData:r})},n.handleSubQuestionOptionChange=function(e,t,a,r){var s=n.state.questionData;s[t].questions[a].options[r]=e.target.value,n.setState({questionData:s})},n.updateQuestion=function(){if(null!=B.getState().auth){n.setState({isLoading:!0});var e=n.state.questionData[n.state.questionIndex]._id;A.a.put(B.getState().apiUrl+"/questions/"+e+"/question",n.state.questionData[n.state.questionIndex],{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({questionIndex:0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))}},n.updateCollection=function(){if(null!=B.getState().auth){n.setState({isLoading:!0});var e=n.state.collection._id;A.a.put(B.getState().apiUrl+"/questions/"+e,n.state.collection,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({apiError:e.data.message,isLoading:!1})}))}},n.renderQuestionSelector=function(){if(null!=n.state.questionData&&void 0!==n.state.questionData)return n.state.questionData.map((function(e,t){return r.a.createElement(O.a,{key:t,className:"m-2",color:"primary",onClick:function(){n.setState({questionIndex:t})}}," ",t+1," ")}))},n.renderSelectedQuestion=function(){if(null!=n.state.questionData&&void 0!==n.state.questionData)return r.a.createElement(L.a,{lg:"12"},r.a.createElement(I.a,{className:"m-3"},r.a.createElement(D.a,null,r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"12"},r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"questionType"},"Question Type"),r.a.createElement(z.a,{type:"text",name:"questionType",id:"questionType",value:n.state.questionData[n.state.questionIndex].questionType,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"section"},"Section"),r.a.createElement(z.a,{type:"text",name:"section",id:"section",value:n.state.questionData[n.state.questionIndex].section,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"topic"},"Topic"),r.a.createElement(z.a,{type:"text",name:"topic",id:"topic",value:n.state.questionData[n.state.questionIndex].topic,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"sourceExam"},"Source Exam"),r.a.createElement(z.a,{type:"text",name:"sourceExam",id:"sourceExam",value:n.state.questionData[n.state.questionIndex].sourceExam,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"difficultyLevel"},"Difficulty Level"),r.a.createElement(z.a,{type:"text",name:"difficultyLevel",id:"difficultyLevel",value:n.state.questionData[n.state.questionIndex].difficultyLevel,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"Time"},"Time"),r.a.createElement(z.a,{type:"text",name:"Time",id:"Time",value:n.state.questionData[n.state.questionIndex].Time,onChange:function(e){n.handleQuestionDataChange(e,n.state.questionIndex)}}))),n.renderDirection(n.state.questionIndex),n.renderLegalPrinciple(n.state.questionIndex)),r.a.createElement(L.a,{lg:"6"},n.renderImage(n.state.questionData[n.state.questionIndex],n.state.questionIndex))),r.a.createElement(le,{questions:n.state.questionData[n.state.questionIndex],index:n.state.questionIndex,handleChangeFunction:n.handleSubQuestionsDataChange,handleOptionChange:n.handleSubQuestionOptionChange}),r.a.createElement(O.a,{className:"mt-3",color:"primary",onClick:n.updateQuestion},"Update Question"))))},n.state={apiError:"",isLoading:!0,collection:{},questionIndex:0},n.getQuestionCollection=n.getQuestionCollection.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.redirectToQuestions=n.redirectToQuestions.bind(Object(d.a)(n)),n.renderDirection=n.renderDirection.bind(Object(d.a)(n)),n.renderLegalPrinciple=n.renderLegalPrinciple.bind(Object(d.a)(n)),n.getQuestionCollection(),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},this.state.collection.name||""),r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"type"},"Type"),r.a.createElement(z.a,{type:"text",name:"type",id:"type",value:this.state.collection.type||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(L.a,{lg:"2"}),r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"category"},"Category"),r.a.createElement(z.a,{type:"text",name:"category",id:"category",value:this.state.collection.category||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(L.a,{lg:"3"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"time"},"Time"),r.a.createElement(z.a,{type:"text",name:"time",id:"time",value:this.state.collection.time||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(L.a,{lg:"1"}),r.a.createElement(L.a,{lg:"3"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"numberOfQuestions"},"Number of Questions"),r.a.createElement(z.a,{type:"text",name:"numberOfQuestions",id:"numberOfQuestions",value:this.state.collection.numberOfQuestions||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(L.a,{lg:"1"}),r.a.createElement(L.a,{lg:"3"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"maxMarks"},"Max marks"),r.a.createElement(z.a,{type:"text",name:"maxMarks",id:"maxMarks",value:this.state.collection.maxMarks||"",onChange:this.handleCollectionDataChange}))),r.a.createElement(L.a,{lg:"12"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"description"},"Description"),r.a.createElement(z.a,{type:"textarea",rows:"6",name:"description",id:"description",value:this.state.collection.description||"",onChange:this.handleCollectionDataChange})))),r.a.createElement(k.a,{className:"mt-3"},r.a.createElement("h3",null,"Questions"),this.renderQuestionSelector(),this.renderSelectedQuestion()),this.renderError()),this.checkLogin(),this.renderSpinner(),this.redirectToQuestions(),r.a.createElement(O.a,{className:"m-5",color:"danger",onClick:this.deleteCollection},"Delete Collection"),r.a.createElement(O.a,{className:"m-5",color:"primary",onClick:this.updateCollection},"Update Collection"))}}]),a}(r.a.Component),ue=Object(F.b)((function(e){return{auth:e}}),(function(e){return{getAuth:function(){return e({type:"getLoginAuth"})}}}))(ce),me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToQuestion=function(){return n.state.success?r.a.createElement(m.a,{to:"/question"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.handleFile=function(e){n.setState({file:e.target.files[0]})},n.handleSubmit=function(e){n.setState({isLoading:!0});var t=new FormData;t.append("file",n.state.file),t.append("name",n.state.name),t.append("type",n.state.type),t.append("category",n.state.category),t.append("description",n.state.description),void 0!==B.getState().auth&&A.a.post(B.getState().apiUrl+"/questions",t,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message})}))},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t},(function(){console.log(n.state.tags)}))},n.state={isLoading:!1,apiError:"",tags:{}},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement("h1",null,"Create New Question Collection"),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"name"},"Name"),r.a.createElement(z.a,{type:"text",name:"name",id:"name",placeholder:"Enter collection name",onChange:this.handleChange})),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"category"},"Category"),r.a.createElement(z.a,{type:"text",name:"category",id:"category",placeholder:"Enter category",onChange:this.handleChange}))),r.a.createElement(L.a,{lg:"1"}),r.a.createElement(L.a,{lg:"5",style:{marginLeft:"auto"}},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"type"},"Type"),r.a.createElement(z.a,{type:"text",name:"type",id:"type",placeholder:"Enter type",onChange:this.handleChange})),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"type"},"Question Excel Sheet"),r.a.createElement(z.a,{type:"file",name:"file",id:"file",onChange:this.handleFile})))),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"description"},"Description"),r.a.createElement(z.a,{type:"textarea",name:"description",id:"description",placeholder:"Enter description",onChange:this.handleChange})),r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:this.state.tags.whatsNew||"",onChange:this.onTagChange}),r.a.createElement(J.a,{for:"whatsNew"},"Whats new")),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"other",id:"other",value:this.state.tags.other||"",onChange:this.onTagChange}),r.a.createElement(J.a,{for:"other"},"Other")),r.a.createElement(O.a,{color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToQuestion(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),de=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){n.setState({isLoading:!0}),A.a.post(B.getState().apiUrl+"/users/login",n.state).then((function(e){!0===e.data.status?n.setState({auth:e.headers.auth},(function(){n.setState({isLoading:!1})})):null!==e.data.message?(n.setState({apiError:e.data.message}),n.setState({isLoading:!1})):(n.setState({apiError:"Could not log you in"}),n.setState({isLoading:!1}))}))},n.handleFile=function(e){if(n.setState({uploadImage:e.target.files[0]}),e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}n.setState({apiError:""})},n.uploadImage=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.state.uploadImage||void 0===n.state.uploadImage||""===n.state.uploadImage){e.next=5;break}return(t=new FormData).append("questionImage",n.state.uploadImage),e.next=5,A.a.post(B.getState().storageUrl+"/question",t,{headers:{auth:n.state.auth}}).then((function(e){e.data.status&&(console.log(e.data),n.setState({imageId:e.data.imageId}))})).catch((function(e){console.log(e),n.setState({apiError:"error"})}));case 5:case"end":return e.stop()}}),e)}))),n.copyId=function(){var e=n.state.imageId;navigator.clipboard.writeText(e).then((function(){console.log("Copying to clipboard was successful!")}),(function(e){console.error("Could not copy text: ",e)}))},n.renderForm=function(){if(null===n.state.auth||void 0===n.state.auth||""===n.state.auth)return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"email"},"Email"),r.a.createElement(z.a,{type:"email",name:"email",id:"email",placeholder:"Enter email",onChange:n.handleChange})),r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"password"},"Password"),r.a.createElement(z.a,{type:"password",name:"password",id:"password",placeholder:"password",onChange:n.handleChange})),r.a.createElement(O.a,{color:"primary",onClick:n.handleSubmit},"Submit"),r.a.createElement("br",null)))},n.renderImageUpload=function(){if(null!==n.state.auth&&void 0!==n.state.auth&&""!==n.state.auth)return r.a.createElement(I.a,null,r.a.createElement($.a,{top:!0,style:{maxWidth:"500px",objectFit:"cover",marginLeft:"auto",marginRight:"auto"},width:"100%",src:n.state.image}),r.a.createElement(D.a,null,r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"file"},"Image"),r.a.createElement(z.a,{type:"file",name:"file",id:"file",onChange:n.handleFile})),r.a.createElement(O.a,{color:"primary",onClick:n.uploadImage},"Upload"),r.a.createElement("p",null,r.a.createElement("span",{style:{fontWeight:"500"}},"Image id:")," ",n.state.imageId,r.a.createElement(O.a,{color:"link",onClick:n.copyId,className:"fa fa-copy"}))))},n.state={apiError:"",isLoading:!1},n.renderForm=n.renderForm.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.renderImageUpload=n.renderImageUpload.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,{className:"mt-5"},r.a.createElement(k.a,null,r.a.createElement(L.a,{className:"col-lg-3"}),r.a.createElement(L.a,{className:"col-lg-6"},r.a.createElement(I.a,null,r.a.createElement(q.a,null),r.a.createElement(D.a,null,this.renderForm(),this.renderImageUpload()))),r.a.createElement(L.a,{className:"col-lg-3"})),this.renderError(),this.renderSpinner())}}]),a}(r.a.Component),ge=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(D.a,null,r.a.createElement(q.a,null,this.props.data.name),r.a.createElement(U.a,null,this.props.data.category),r.a.createElement(M.a,null,this.props.data.description),r.a.createElement(b.b,{to:{pathname:"course/edit",state:{course:this.props.data}}},r.a.createElement(O.a,null,"View")))))}}]),a}(r.a.Component),he=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.getCourses=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.getState().auth){e.next=3;break}return e.next=3,A.a.get(B.getState().apiUrl+"/course",{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({courses:e.data.courses}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={courses:[],apiError:"",isLoading:!0},n.getCourses=n.getCourses.bind(Object(d.a)(n)),n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.getCourses(),n}return Object(l.a)(a,[{key:"render",value:function(){var e;return null!=this.state.courses&&void 0!==this.state.courses&&(e=this.state.courses.map((function(e){return r.a.createElement(L.a,{lg:"3",key:e._id},r.a.createElement(ge,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(b.b,{style:{marginLeft:"auto"},to:{pathname:"course/edit",state:"new"}},r.a.createElement(O.a,{className:"mt-2 mr-4",color:"primary"},"Create New Course"))),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Courses"),r.a.createElement(k.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({subSectionUpdate:!1}),null===n.props.state.location||"new"===n.props.state.location.state){e.next=8;break}if(void 0===B.getState().auth){e.next=8;break}return n.setState({isLoading:!0}),e.next=6,A.a.get(B.getState().apiUrl+"/course/"+n.props.state.location.state.course._id,{headers:{auth:B.getState().auth}}).then(function(){var e=Object(C.a)(y.a.mark((function e(t){var a,r,s,o,i,l,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.status){e.next=32;break}(a=t.data.course).tags={},n.setState({course:a}),e.t0=y.a.keys(a.sections);case 5:if((e.t1=e.t0()).done){e.next=21;break}r=e.t1.value,e.t2=y.a.keys(a.sections[r].modules);case 8:if((e.t3=e.t2()).done){e.next=19;break}s=e.t3.value,o=y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.sections[r].modules[s].subModules[i],e.next=3,A.a.get(B.getState().apiUrl+"/course/submodule/"+t,{headers:{auth:B.getState().auth}}).then((function(e){if(e.data.status){var a=n.state.subSections;a[t]=e.data.subModule,n.setState({subSections:a})}}));case 3:case"end":return e.stop()}}),e)})),e.t4=y.a.keys(a.sections[r].modules[s].subModules);case 12:if((e.t5=e.t4()).done){e.next=17;break}return i=e.t5.value,e.delegateYield(o(),"t6",15);case 15:e.next=12;break;case 17:e.next=8;break;case 19:e.next=5;break;case 21:l=y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get(B.getState().apiUrl+"/mentor/"+a.coaches[t],{headers:{auth:B.getState().auth}}).then((function(e){if(e.data.status){var r=n.state.coaches;r[a.coaches[t]]=e.data.mentor,n.setState({coaches:r})}}));case 2:case"end":return e.stop()}}),e)})),e.t7=y.a.keys(a.coaches);case 23:if((e.t8=e.t7()).done){e.next=28;break}return c=e.t8.value,e.delegateYield(l(c),"t9",26);case 26:e.next=23;break;case 28:console.log(n.state),n.setState({isLoading:!1}),e.next=33;break;case 32:n.setState({apiError:t.data.message,isLoading:!1});case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:n.setState({numberOfSubSections:Object.keys(n.state.subSections).length}),A.a.get(B.getState().apiUrl+"/mentor/coach",{headers:{auth:B.getState().auth}}).then((function(e){e.data.status&&0!=e.data.coaches.length&&n.setState({allCoaches:e.data.coaches,newCoach:e.data.coaches[0].name,newCoachId:e.data.coaches[0]._id})}));case 8:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{style:{zIndex:"5",margin:"auto",position:"absolute",top:"100px",left:"100px",bottom:"100px",right:"50px",height:"50px",width:"50px"},color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToCourses=function(){return n.state.success?r.a.createElement(m.a,{to:"/course"}):r.a.createElement("p",null)},n.handleFile=function(e){n.setState({file:e.target.files[0]})},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.onTagChange=function(e){var t=n.state.course;t.tags[e.target.name]=e.target.checked,n.setState({course:t},(function(){console.log(n.state.course.tags)}))},n.handleSubmit=function(){n.setState({isLoading:!0}),void 0!==B.getState().auth&&(null!==n.props.state.location&&"new"===n.props.state.location.state?A.a.post(B.getState().apiUrl+"/course/partial",n.state.course,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(console.log(e.data),n.setState({isLoading:!1,success:!0})):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message,isLoading:!1}))})):A.a.put(B.getState().apiUrl+"/course/"+n.state.course._id,n.state.course,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message,isLoading:!1}))})))},n.cancelSubSectionSubmission=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.newSubSection;case 1:if(!(t.sectionalQuestions.length>0)){e.next=6;break}return e.next=4,A.a.delete(B.getState().apiUrl+"/questions/"+t.sectionalQuestions[0],{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(t.sectionalQuestions.splice(0,1),n.setState({newSubSection:t})):n.setState({apiError:"Could not delete files"})}));case 4:e.next=1;break;case 6:if(!(t.previousYearQuestions.length>0)){e.next=11;break}return e.next=9,A.a.delete(B.getState().apiUrl+"/questions/"+t.previousYearQuestions[0],{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(t.previousYearQuestions.splice(0,1),n.setState({newSubSection:t})):n.setState({apiError:"Could not delete files"})}));case 9:e.next=6;break;case 11:if(!(t.handoutIds.length>0)){e.next=16;break}return e.next=14,A.a.delete(B.getState().storageUrl+"/course/handout/"+n.state.newSubSection.handoutIds[0],{headers:{auth:B.getState().auth}}).then((function(e){console.log(e.data),e.data.status?(t.handoutIds.splice(0,1),n.setState({newSubSection:t})):n.setState({apiError:"Could not delete files"})})).catch((function(e){n.setState({apiError:"Could not delete files"})}));case 14:e.next=11;break;case 16:n.setState({subSectionForm:!1});case 17:case"end":return e.stop()}}),e)}))),n.setCourseName=function(e){var t=n.state.course;t.name=e.target.value,n.setState({course:t})},n.submitSubSection=function(){n.setState({isLoading:!0});var e=n.state.course,t=n.state.subSections;if(console.log(n.state.newSubSection),B.getState().auth){var a=n.state.newSubSection;a.courseId=n.state.course._id,a.sectionalTests=a.previousYearQuestions.length+a.sectionalQuestions.length,A.a.post(B.getState().apiUrl+"/course/submodule/partial",a,{headers:{auth:B.getState().auth}}).then((function(a){a.data.status?(n.setState({changed:!0}),t[a.data.subModule._id]=a.data.subModule,n.setState({subSections:t}),e.sections[n.state.sectionIndex].modules[n.state.moduleIndex].subModules.push(a.data.subModule._id),n.setState({course:e}),n.setState({subSectionForm:!1,isLoading:!1,subSectionUpdate:!1,newSubSection:{name:"",previousYearQuestions:[],sectionalQuestions:[],videoURLs:[],handoutIds:[]}})):n.setState({isLoading:!1,apiError:a.data.message})}))}},n.addSection=function(){var e=n.state.course;null==e.sections&&(e.sections=[],n.setState({course:e})),e.sections.push({name:n.state.newSection,modules:[]}),n.setState({course:e,newSection:""})},n.addModule=function(e){var t=n.state.course;null==t.sections[e].modules&&(t.sections[e].modules=[],n.setState({course:t})),t.sections[e].modules.push({name:n.state.newModule,subModules:[],questions:[]}),n.setState({course:t,newModule:""})},n.handleDelete=function(){n.setState({isLoading:!0}),void 0!==B.getState().auth&&(null!==n.props.state.location&&"new"===n.props.state.location.state?n.setState({success:!0}):A.a.delete(B.getState().apiUrl+"/course/"+n.state.course._id,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):(n.setState({isLoading:!1}),n.setState({apiError:e.data.message,isLoading:!1}))})))},n.deleteSection=function(e){var t=n.state.course,a=0;for(var r in t.sections[e].modules)if(t.sections[e].modules[r].subModules.length>0){a=1;break}if(1===a)alert("delete all sub modules inside the module of the section");else{t.sections.splice(e,1);var s=n.state.selectedSection;s=0,0===t.sections.length&&(s=-1),n.setState({selectedSection:s,course:t})}},n.deleteModule=function(e,t){var a=n.state.course;a.sections[e].modules[t].subModules.length>0?alert("delete all sub modules inside the module"):(a.sections[e].modules.splice(t,1),n.setState({course:a}))},n.deleteSubSection=function(e,t,a){var r=n.state.course,s=r.sections[e].modules[t].subModules[a];A.a.delete(B.getState().apiUrl+"/course/submodule/"+s,{headers:{auth:B.getState().auth}}).then((function(o){if(o.data.status){n.setState({changed:!0});var i=n.state.newSubSection;n.setState({newSubSection:n.state.subSections[s]}),n.cancelSubSectionSubmission(),n.setState({newSubSection:i});var l=n.state.subSections;delete l[s],n.setState({subSections:l}),r.sections[e].modules[t].subModules.splice(a,1),n.setState({course:r})}}))},n.renderSubSectionViewButton=function(e,t,a){if(!1===n.state.changed)return r.a.createElement(b.b,{to:{pathname:"/course/viewSubModule",state:{subModule:n.state.subSections[n.state.course.sections[e].modules[t].subModules[a]]}}},r.a.createElement(O.a,null,"View"))},n.renderSectionSelector=function(){if(null!=n.state.course.sections)return n.state.course.sections.map((function(e,t){return r.a.createElement(O.a,{key:t,className:"m-2",color:"primary",onClick:function(){n.setState({selectedSection:t})}},e.name)}))},n.renderCoaches=function(){if(n.state.course.coaches&&n.state.coaches)return n.state.course.coaches.map((function(e,t){var a=n.state.coaches[e];return null!=a&&void 0!==a?(A.a.get(B.getState().storageUrl+"/digest/"+a.imageId,{headers:{auth:B.getState().auth}}).then((function(e){var t="data:"+e.headers["content-type"]+";base64,"+e.data,r=n.state.coaches;r[a._id].image=t,n.setState({coaches:r})})),r.a.createElement(L.a,{lg:"3",className:"mb-2",key:t},r.a.createElement(I.a,null,r.a.createElement($.a,{src:a.image}),r.a.createElement(D.a,null,r.a.createElement(q.a,{style:{textAlign:"left"}},a.name),r.a.createElement(U.a,{style:{textAlign:"left"}},a.designation),r.a.createElement(M.a,{style:{textAlign:"left"}},a.description),r.a.createElement(O.a,{color:"danger",onClick:function(){var e=n.state.course;e.coaches.splice(t,1),n.setState({course:e})}},"Remove Coach"))))):r.a.createElement("div",{key:t})}))},n.renderCoachOptions=function(){if(n.state.allCoaches)return n.state.allCoaches.map((function(e){return r.a.createElement("option",{key:e._id},e.name)}))},n.renderSubSections=function(e,t){if(n.state.course.sections[e].modules[t].subModules)return n.state.course.sections[e].modules[t].subModules.map((function(a,s){return n.state.subSections[a]?r.a.createElement(L.a,{lg:"4",className:"mt-3",key:s},r.a.createElement(I.a,null,r.a.createElement(q.a,null,r.a.createElement("h6",null,"Sub module: ",n.state.subSections[a].name)),r.a.createElement(D.a,null,r.a.createElement("p",null,"Number of Videos: ",n.state.subSections[a].videoURLs.length),r.a.createElement("p",null,"Number of Tests: ",n.state.subSections[a].sectionalQuestions.length+n.state.subSections[a].previousYearQuestions.length),r.a.createElement("p",null,"Handout: ",n.state.subSections[a].handoutIds.length),n.renderSubSectionViewButton(e,t,s),r.a.createElement(O.a,{className:"m-1",color:"danger",onClick:function(){n.deleteSubSection(e,t,s)}},"Delete Sub Section")))):r.a.createElement("div",{key:s})}))},n.renderModules=function(e){if(null!=n.state.course.sections[e].modules)return n.state.course.sections[e].modules.map((function(t,a){return r.a.createElement(L.a,{lg:"12",className:"mt-3",key:a},r.a.createElement(I.a,null,r.a.createElement(q.a,null,r.a.createElement("h5",null,"Module: ",t.name)),r.a.createElement(D.a,null,r.a.createElement(k.a,null,n.renderSubSections(e,a),r.a.createElement(L.a,{lg:"4",className:"mt-3"},r.a.createElement(I.a,null,r.a.createElement(q.a,null,"Add new sub module"),r.a.createElement(D.a,null,r.a.createElement(G.a,{row:!0},r.a.createElement(O.a,{style:{marginLeft:"auto",marginRight:"auto"},color:"primary",onClick:function(){null!==n.props.state.location&&"new"===n.props.state.location.state?alert("You must submit the course before adding sub modules"):n.setState({subSectionForm:!0,sectionIndex:e,moduleIndex:a})}},"Add Sub Module")))),r.a.createElement(I.a,null,r.a.createElement(q.a,null,"Add questions to module"),r.a.createElement(D.a,{style:{marginRight:"auto"}},n.renderModuleQuestions(e,a),r.a.createElement(G.a,{row:!0},r.a.createElement(z.a,{type:"file",name:"newQuestionCollectionId",id:"newQuestionCollectionId",onChange:n.handleFile}),r.a.createElement(O.a,{className:"m-2",color:"primary",onClick:function(){var t=n.state.course,r=new FormData;r.append("file",n.state.file),A.a.post(B.getState().apiUrl+"/questions",r,{headers:{auth:B.getState().auth}}).then((function(r){r.data.status&&(t.sections[e].modules[a].questions.push(r.data.questionCollection._id),n.setState({course:t}))}))}},"Add")))),r.a.createElement(I.a,{className:"mt-3"},r.a.createElement(O.a,{className:"m-3",color:"danger",onClick:function(){n.deleteModule(e,a)}},"Delete this Module")))))))}))},n.renderSections=function(){if(null!==n.state.course.sections&&void 0!==n.state.course.sections&&0!==n.state.course.sections.length&&-1!==n.state.selectedSection){var e=n.state.selectedSection,t=n.state.course.sections[e];return r.a.createElement("div",null,r.a.createElement(I.a,{className:"m-3"},r.a.createElement(q.a,null,r.a.createElement("h4",null,t.name)),r.a.createElement(D.a,null,r.a.createElement(k.a,null,n.renderModules(e),r.a.createElement(L.a,{lg:"10",className:"mt-3"},r.a.createElement(I.a,null,r.a.createElement(q.a,null,"Add new Module"),r.a.createElement(D.a,null,r.a.createElement(G.a,{row:!0},r.a.createElement(L.a,{lg:"2"},r.a.createElement(J.a,{for:"newModule"},"Module Name")),r.a.createElement(L.a,{lg:"8"},r.a.createElement(z.a,{type:"text",name:"newModule",id:"newModule",value:n.state.newModule||"",onChange:n.handleChange})),r.a.createElement(L.a,{lg:"2"},r.a.createElement(O.a,{color:"primary",onClick:function(){n.addModule(e)}},"Add Module")))))),r.a.createElement(L.a,{lg:"2",style:{marginTop:"auto",marginBottom:"auto"}},r.a.createElement(O.a,{className:"m-3",color:"danger",onClick:function(){n.deleteSection(e)}},"Delete this section"))))))}},n.renderModuleQuestions=function(e,t){return n.state.course.sections[e].modules[t].questions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderSectionalQuestions=function(){return n.state.newSubSection.sectionalQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderPreviousYearQuestions=function(){return n.state.newSubSection.previousYearQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderHandouts=function(){return n.state.newSubSection.handoutIds.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e))}))},n.renderVideos=function(){return n.state.newSubSection.videoURLs.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e.url),r.a.createElement("p",null,"Desc:  ",e.description))}))},n.state={success:!1,apiError:"",isLoading:!1,isSubmitting:!1,subSectionForm:!1,course:{available:!1,tags:{}},subSections:{},coaches:{},newSubSection:{name:"",previousYearQuestions:[],sectionalQuestions:[],videoURLs:[],handoutIds:[]},questionCollectionType:"Sectional Test Questions",selectedSection:0,changed:!1},n.renderError=n.renderError.bind(Object(d.a)(n)),n.redirectToCourses=n.redirectToCourses.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.renderSections=n.renderSections.bind(Object(d.a)(n)),n.renderModules=n.renderModules.bind(Object(d.a)(n)),n.addModule=n.addModule.bind(Object(d.a)(n)),n.renderSubSectionViewButton=n.renderSubSectionViewButton.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.state.subSectionForm?r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"8",style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement("div",null,r.a.createElement("h2",null,"Create New Sub Section"),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"12"},this.renderError(),this.renderSpinner()),r.a.createElement(L.a,{lg:"12"},r.a.createElement(G.a,{row:!0,className:"m-2"},r.a.createElement(J.a,{for:"name"},"Name"),r.a.createElement(z.a,{type:"text",name:"name",id:"name",placeholder:"Enter sub section name",value:this.state.newSubSection.name||"",onChange:function(t){var a=e.state.newSubSection;a.name=t.target.value,e.setState({newSubSection:a},(function(){console.log(e.state)}))}}))),r.a.createElement(L.a,{lg:"6"},r.a.createElement("p",null," Question Collections"),r.a.createElement(I.a,null,r.a.createElement(D.a,{style:{marginRight:"auto"}},r.a.createElement("p",{style:{textAlign:"left"}},"Sectional tests: "),this.renderSectionalQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Previous year question tests"),this.renderPreviousYearQuestions(),r.a.createElement(G.a,{row:!0},r.a.createElement(z.a,{className:"m-2",type:"select",name:"questionCollectionType",id:"questionCollectionType",value:this.state.questionCollectionType,onChange:function(t){e.setState({questionCollectionType:t.target.value})}},r.a.createElement("option",null,"Sectional Test Questions"),r.a.createElement("option",null,"Previous Year Questions")),r.a.createElement(z.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(O.a,{className:"m-2",color:"primary",onClick:function(){e.setState({isLoading:!0});var t=e.state.newSubSection,a=new FormData;a.append("file",e.state.file),A.a.post(B.getState().apiUrl+"/questions",a,{headers:{auth:B.getState().auth}}).then((function(a){a.data.status?("Sectional Test Questions"===e.state.questionCollectionType?t.sectionalQuestions.push(a.data.questionCollection._id):"Previous Year Questions"===e.state.questionCollectionType&&t.previousYearQuestions.push(a.data.questionCollection._id),e.setState({newSubSection:t},(function(){}))):a.data.message&&e.setState({apiError:a.data.message}),e.setState({isLoading:!1})}))}},"Add"))))),r.a.createElement(L.a,{lg:"6"},r.a.createElement("p",null," Handouts"),r.a.createElement(I.a,null,r.a.createElement(D.a,{style:{marginRight:"auto"}},this.renderHandouts(),r.a.createElement(G.a,{row:!0},r.a.createElement(z.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(O.a,{className:"m-2",color:"primary",onClick:Object(C.a)(y.a.mark((function t(){var a,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),a=e.state.newSubSection,(n=new FormData).append("handoutFile",e.state.file),t.next=6,A.a.post(B.getState().storageUrl+"/course/handout",n,{headers:{auth:B.getState().auth}}).then((function(t){t.data.status?(a.handoutIds.push(t.data.fileId),e.setState({newSubSection:a})):t.data.message&&e.setState({apiError:t.data.message}),e.setState({isLoading:!1})})).catch((function(t){e.setState({apiError:"could not upload, error: "+t,isLoading:!1})}));case 6:case"end":return t.stop()}}),t)})))},"Add"))))),r.a.createElement(L.a,{lg:"12",className:"mt-3"},r.a.createElement("p",null," Videos"),r.a.createElement(I.a,null,r.a.createElement(D.a,null,this.renderVideos(),r.a.createElement(G.a,{row:!0},r.a.createElement(L.a,{className:"m-1",lg:"2"},r.a.createElement(J.a,{for:"newVideo"},"ID")),r.a.createElement(L.a,{className:"m-1",lg:"9"},r.a.createElement(z.a,{type:"text",name:"newVideo",id:"newVideo",value:this.state.newVideo||"",onChange:this.handleChange})),r.a.createElement(L.a,{className:"m-1",lg:"2"},r.a.createElement(J.a,{for:"newVideoDescription"},"Description")),r.a.createElement(L.a,{className:"m-1",lg:"9"},r.a.createElement(z.a,{type:"text",name:"newVideoDescription",id:"newVideoDescription",value:this.state.newVideoDescription||"",onChange:this.handleChange})),r.a.createElement(L.a,{lg:"2"},r.a.createElement(O.a,{color:"primary",onClick:function(){var t=e.state.newSubSection,a={url:e.state.newVideo,description:e.state.newVideoDescription};t.videoURLs.push(a),e.setState({newSubSection:t,newVideo:"",newVideoDescription:""}),console.log(e.state)}},"Add"))))))),r.a.createElement(O.a,{className:"m-3",onClick:this.cancelSubSectionSubmission},"Cancel"),r.a.createElement(O.a,{className:"m-3",color:"primary",onClick:this.submitSubSection},"Submit")))))):r.a.createElement(j.a,null,r.a.createElement("h1",null,"Course Editor"),r.a.createElement(K.a,{className:"mt-4"},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"6"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"name",sm:2},"Course Name"),r.a.createElement(L.a,{sm:10},r.a.createElement(z.a,{type:"text",name:"name",id:"name",value:this.state.course.name||"",onChange:function(t){var a=e.state.course;a.name=t.target.value,e.setState({course:a})}})))),r.a.createElement(L.a,{lg:"6"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"duration",sm:2},"Course Duration"),r.a.createElement(L.a,{sm:10},r.a.createElement(z.a,{type:"text",name:"duration",id:"duration",value:this.state.course.duration||"",onChange:function(t){var a=e.state.course;a.duration=t.target.value,e.setState({course:a})}}))))),r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"12"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"description",sm:2},"Course Description"),r.a.createElement(L.a,{sm:10},r.a.createElement(z.a,{type:"textarea",rows:"5",name:"description",id:"description",value:this.state.course.description||"",onChange:function(t){var a=e.state.course;a.description=t.target.value,e.setState({course:a})}})))),r.a.createElement(L.a,{lg:"4"},r.a.createElement(G.a,{row:!0},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"6"},r.a.createElement(J.a,{for:"available"},"Is course available")),r.a.createElement(L.a,{lg:"5"},r.a.createElement(z.a,{className:"m-2",type:"select",name:"available",id:"available",value:this.state.course.available||!1,onChange:function(t){var a=e.state.course;a.available=t.target.value,e.setState({course:a})}},r.a.createElement("option",null,"true"),r.a.createElement("option",null,"false")))))),r.a.createElement(L.a,{lg:"4"},r.a.createElement(G.a,{row:!0},r.a.createElement(k.a,null,r.a.createElement(L.a,{style:{marginTop:"auto",marginBottom:"auto"},lg:"3"},r.a.createElement(J.a,{for:"price"},"price")),r.a.createElement(L.a,{lg:"5"},r.a.createElement(z.a,{className:"m-2",type:"text",name:"price",id:"price",value:this.state.course.price||"",onChange:function(t){var a=e.state.course;a.price=t.target.value,e.setState({course:a})}}))))),r.a.createElement(L.a,{lg:"12"},r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:this.state.course.tags.whatsNew||"",onChange:this.onTagChange}),r.a.createElement(J.a,{for:"whatsNew"},"Whats new")),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"other",id:"other",value:this.state.course.tags.other||"",onChange:this.onTagChange}),r.a.createElement(J.a,{for:"other"},"Other")))),r.a.createElement("h2",{style:{textAlign:"left"},className:"mt-3 mb-3"},"Coaches"),r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(k.a,null,this.renderCoaches()),r.a.createElement(I.a,null,r.a.createElement(D.a,null,r.a.createElement(J.a,{for:"newCoach"},"Coach"),r.a.createElement(z.a,{type:"select",name:"newCoach",id:"newCoach",placeholder:"Select new coach",value:this.state.newCoach,onChange:function(t){e.setState({newCoach:t.target.value});var a=e.state.allCoaches.filter((function(e){return e.name===t.target.value}))[0];e.setState({newCoachId:a._id})}},this.renderCoachOptions()),r.a.createElement(O.a,{className:"mt-2",color:"primary",onClick:function(){e.state.course.coaches.push(e.state.newCoachId);var t=e.state.coaches;t[e.state.newCoachId]=e.state.allCoaches.filter((function(t){return t._id===e.state.newCoachId}))[0],e.setState({coaches:t}),console.log(e.state)}},"Add")))),r.a.createElement("h2",{style:{textAlign:"left"},className:"mt-3 mb-3"},"Sections"),r.a.createElement("div",{style:{textAlign:"left"}},this.renderSectionSelector()),this.renderSections(),r.a.createElement("h4",{className:"m-3",style:{textAlign:"left"}},"Add New Section"),r.a.createElement(L.a,{lg:"6"},r.a.createElement(I.a,{className:"mt-3"},r.a.createElement(D.a,null,r.a.createElement(G.a,{row:!0},r.a.createElement(L.a,{lg:"2"},r.a.createElement(J.a,{for:"newSection"},"Section Name")),r.a.createElement(L.a,{lg:"6"},r.a.createElement(z.a,{type:"text",name:"newSection",id:"newSection",value:this.state.newSection||"",onChange:this.handleChange})),r.a.createElement(L.a,{lg:"4"},r.a.createElement(O.a,{color:"primary",onClick:this.addSection},"Add section"))))))),r.a.createElement(k.a,{className:"m-4"},r.a.createElement(L.a,{className:"lg-2"},r.a.createElement(O.a,{color:"danger",onClick:this.handleDelete},"Delete")),r.a.createElement(L.a,{className:"lg-2"},r.a.createElement(O.a,{color:"primary",onClick:this.handleSubmit},"Submit"))),this.renderSpinner(),this.renderError(),this.redirectToCourses())}}]),a}(r.a.Component),Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{style:{zIndex:"5",margin:"auto",position:"absolute",top:"100px",left:"100px",bottom:"100px",right:"50px",height:"50px",width:"50px"},color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToCourses=function(){return n.state.success?r.a.createElement(m.a,{to:"/course"}):r.a.createElement("p",null)},n.handleFile=function(e){n.setState({file:e.target.files[0]})},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.renderSectionalQuestions=function(){return n.state.subModule.sectionalQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(b.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(O.a,{color:"primary",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(O.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(){var a=n.state.subModule;a.sectionalQuestions.splice(t,1),n.setState({subModule:a}),A.a.put(B.getState().apiUrl+"/course/"+n.state.subModule._id+"/submodule",n.state.subModule,{headers:{auth:B.getState().auth}}).then((function(t){console.log(t.data),t.data.status?A.a.delete(B.getState().apiUrl+"/questions/"+e,{headers:{auth:B.getState().auth}}).then((function(e){})):n.setState({apiError:"something went wrong.. Go back"})}))}})))}))},n.renderPreviousYearQuestions=function(){return n.state.subModule.previousYearQuestions.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(b.b,{to:{pathname:"/question/view",state:{questionCollectionId:e}}},r.a.createElement(O.a,{color:"link",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(O.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(){var a=n.state.subModule;a.previousYearQuestions.splice(t,1),n.setState({subModule:a}),A.a.put(B.getState().apiUrl+"/course/"+n.state.subModule._id+"/submodule",n.state.subModule,{headers:{auth:B.getState().auth}}).then((function(t){console.log(t.data),t.data.status?A.a.delete(B.getState().apiUrl+"/questions/"+e,{headers:{auth:B.getState().auth}}).then((function(e){})):n.setState({apiError:"something went wrong.. Go back"})}))}})))}))},n.renderHandouts=function(){return n.state.subModule.handoutIds.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e,r.a.createElement(O.a,{color:"primary",style:{marginLeft:"10px"},className:"fa fa-eye",onClick:function(){B.getState().auth&&(n.setState({isLoading:!0}),A.a.get(B.getState().storageUrl+"/course/handout/"+e,{headers:{auth:B.getState().auth}}).then((function(e){console.log(e.data),n.setState({pdf:"data:application/pdf;base64,"+e.data,pdfView:!0,isLoading:!1})})))}}),r.a.createElement(O.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(){var a=n.state.subModule;a.handoutIds.splice(t,1),n.setState({subModule:a}),A.a.put(B.getState().apiUrl+"/course/"+n.state.subModule._id+"/submodule",n.state.subModule,{headers:{auth:B.getState().auth}}).then((function(t){console.log(t.data),t.data.status?A.a.delete(B.getState().storageUrl+"/course/handout/"+e,{headers:{auth:B.getState().auth}}).then((function(e){})):n.setState({apiError:"something went wrong.. Go back"})}))}})))}))},n.renderVideos=function(){return n.state.subModule.videoURLs.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,t+1,". ",e.url),r.a.createElement("p",null,"Desc:  ",e.description),r.a.createElement(b.b,{to:{}},r.a.createElement(O.a,{color:"primary",style:{marginLeft:"10px"},className:"fa fa-eye"})),r.a.createElement(O.a,{color:"danger",style:{marginLeft:"10px"},className:"fa fa-trash",onClick:function(){var e=n.state.subModule;e.videoURLs.splice(t,1),n.setState({subModule:e}),A.a.put(B.getState().apiUrl+"/course/"+n.state.subModule._id+"/submodule",n.state.subModule,{headers:{auth:B.getState().auth}}).then((function(e){console.log(e.data),e.data.status||n.setState({apiError:"something went wrong.. Go back"})}))}}))}))},n.state={success:!1,apiError:"",isLoading:!1,subModule:n.props.state.location.state.subModule,pdfView:!1,questionCollectionType:"Sectional Test Questions"},n.renderError=n.renderError.bind(Object(d.a)(n)),n.redirectToCourses=n.redirectToCourses.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.state.pdfView?r.a.createElement(j.a,null,r.a.createElement("iframe",{title:"iframe",Style:"display:block",width:"100%",height:"500px",src:this.state.pdf}),r.a.createElement(O.a,{color:"primary",onClick:function(){e.setState({pdfView:!1})}},"Go back")):r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"10",style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement("div",null,r.a.createElement("h2",null,"Create New Sub Section"),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"12"},this.renderError(),this.renderSpinner()),r.a.createElement(L.a,{lg:"12"},r.a.createElement("h3",null,this.state.subModule.name)),r.a.createElement(L.a,{lg:"6"},r.a.createElement("p",null," Question Collections"),r.a.createElement(I.a,null,r.a.createElement(D.a,{style:{marginRight:"auto"}},r.a.createElement("p",{style:{textAlign:"left"}},"Sectional tests: "),this.renderSectionalQuestions(),r.a.createElement("p",{style:{textAlign:"left"}},"Previous year question tests:"),this.renderPreviousYearQuestions(),r.a.createElement(G.a,{row:!0},r.a.createElement(z.a,{className:"m-2",type:"select",name:"questionCollectionType",id:"questionCollectionType",value:this.state.questionCollectionType,onChange:function(t){e.setState({questionCollectionType:t.target.value})}},r.a.createElement("option",null,"Sectional Test Questions"),r.a.createElement("option",null,"Previous Year Questions")),r.a.createElement(z.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(O.a,{className:"m-2",color:"primary",onClick:function(){e.setState({isLoading:!0});var t=e.state.subModule,a=new FormData;a.append("file",e.state.file),A.a.post(B.getState().apiUrl+"/questions",a,{headers:{auth:B.getState().auth}}).then((function(a){a.data.status?("Sectional Test Questions"===e.state.questionCollectionType?t.sectionalQuestions.push(a.data.questionCollection._id):"Previous Year Questions"===e.state.questionCollectionType&&t.previousYearQuestions.push(a.data.questionCollection._id),e.setState({subModule:t},(function(){A.a.put(B.getState().apiUrl+"/course/"+e.state.subModule._id+"/submodule",e.state.subModule,{headers:{auth:B.getState().auth}}).then((function(t){console.log(t.data),t.data.status||(A.a.delete(B.getState().apiUrl+"/questions/"+a.data.questionCollection._id),e.setState({apiError:"Could not update"}))}))}))):a.data.message&&e.setState({apiError:a.data.message}),e.setState({isLoading:!1})}))}},"Add"))))),r.a.createElement(L.a,{lg:"6"},r.a.createElement("p",null," Handouts"),r.a.createElement(I.a,null,r.a.createElement(D.a,{style:{marginRight:"auto"}},this.renderHandouts(),r.a.createElement(G.a,{row:!0},r.a.createElement(z.a,{className:"m-2",type:"file",onChange:this.handleFile}),r.a.createElement(O.a,{className:"m-2",color:"primary",onClick:Object(C.a)(y.a.mark((function t(){var a,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),a=e.state.subModule,(n=new FormData).append("handoutFile",e.state.file),t.next=6,A.a.post(B.getState().storageUrl+"/course/handout",n,{headers:{auth:B.getState().auth}}).then((function(t){t.data.status?(a.handoutIds.push(t.data.fileId),e.setState({subModule:a},(function(){A.a.put(B.getState().apiUrl+"/course/"+e.state.subModule._id+"/submodule",e.state.subModule,{headers:{auth:B.getState().auth}}).then((function(a){console.log(a.data),a.data.status||(A.a.delete(B.getState().storageUrl+"/course/handout/"+t.data.fileId),e.setState({apiError:"Could not update"}))}))}))):t.data.message&&e.setState({apiError:t.data.message}),e.setState({isLoading:!1})})).catch((function(t){e.setState({apiError:"could not upload, error: "+t,isLoading:!1})}));case 6:case"end":return t.stop()}}),t)})))},"Add"))))),r.a.createElement(L.a,{lg:"12",className:"mt-3"},r.a.createElement("p",null," Videos"),r.a.createElement(I.a,null,r.a.createElement(D.a,null,this.renderVideos(),r.a.createElement(G.a,{row:!0},r.a.createElement(L.a,{className:"m-1",lg:"2"},r.a.createElement(J.a,{for:"newVideo"},"ID")),r.a.createElement(L.a,{className:"m-1",lg:"9"},r.a.createElement(z.a,{type:"text",name:"newVideo",id:"newVideo",value:this.state.newVideo||"",onChange:this.handleChange})),r.a.createElement(L.a,{className:"m-1",lg:"2"},r.a.createElement(J.a,{for:"newVideoDescription"},"Description")),r.a.createElement(L.a,{className:"m-1",lg:"9"},r.a.createElement(z.a,{type:"text",name:"newVideoDescription",id:"newVideoDescription",value:this.state.newVideoDescription||"",onChange:this.handleChange})),r.a.createElement(L.a,{lg:"2"},r.a.createElement(O.a,{color:"primary",onClick:function(){var t=e.state.subModule,a={url:e.state.newVideo,description:e.state.newVideoDescription};t.videoURLs.push(a),e.setState({subModule:t,newVideo:"",newVideoDescription:""}),A.a.put(B.getState().apiUrl+"/course/"+e.state.subModule._id+"/submodule",e.state.subModule,{headers:{auth:B.getState().auth}}).then((function(t){console.log(t.data),t.data.status||e.setState({apiError:"could not update"})}))}},"Add"))))))))))))}}]),a}(r.a.Component),fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return A.a.get(B.getState().storageUrl+"/mentor/"+this.props.data.imageId,{headers:{auth:B.getState().auth}}).then((function(t){var a="data:"+t.headers["content-type"]+";base64,"+t.data;e.setState({image:a})})),r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement($.a,{src:this.state.image}),r.a.createElement(D.a,null,r.a.createElement(q.a,{style:{textAlign:"left"}},this.props.data.name),r.a.createElement(U.a,{style:{textAlign:"left"}},this.props.data.designation),r.a.createElement(M.a,{style:{textAlign:"left"}},this.props.data.description),r.a.createElement(b.b,{to:{pathname:"mentor/edit",state:{mentor:this.props.data}}},r.a.createElement(O.a,null,"View")))))}}]),a}(r.a.Component),Se=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.getState().auth){e.next=5;break}return e.next=3,A.a.get(B.getState().apiUrl+"/mentor",{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({mentors:e.data.mentors}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:return e.next=5,A.a.get(B.getState().apiUrl+"/mentor/coach",{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({coaches:e.data.coaches}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={mentors:[],coaches:[],apiError:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t;return null!=this.state.mentors&&void 0!==this.state.mentors&&(e=this.state.mentors.map((function(e){return r.a.createElement(L.a,{lg:"3",key:e._id},r.a.createElement(fe,{data:e}))}))),null!=this.state.coaches&&void 0!==this.state.coaches&&(t=this.state.coaches.map((function(e){return r.a.createElement(L.a,{lg:"3",key:e._id},r.a.createElement(fe,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(b.b,{style:{marginLeft:"auto"},to:{pathname:"mentor/edit",state:"new"}},r.a.createElement(O.a,{className:"mt-2 mr-4",color:"primary"},"Create New Mentor"))),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Mentors"),r.a.createElement(k.a,{className:"mt-3"},e),r.a.createElement("h1",{style:{margin:"auto"}},"Coaches"),r.a.createElement(k.a,{className:"mt-3"},t),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),be=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.props.state.location||"new"===n.props.state.location.state){e.next=5;break}if(void 0===B.getState().auth){e.next=5;break}return n.setState({isLoading:!0}),e.next=5,A.a.get(B.getState().apiUrl+"/mentor/"+n.props.state.location.state.mentor._id,{headers:{auth:B.getState().auth}}).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.status?(console.log(t.data.mentor),n.setState(t.data.mentor),A.a.get(B.getState().storageUrl+"/mentor/"+n.props.state.location.state.mentor.imageId,{headers:{auth:B.getState().auth}}).then((function(e){var t="data:"+e.headers["content-type"]+";base64,"+e.data;n.setState({image:t})})),n.setState({isLoading:!1})):n.setState({apiError:t.data.message,isLoading:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToMentors=function(){return n.state.success?r.a.createElement(m.a,{to:"/mentor"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.handleFile=function(e){if(e.target.files&&e.target.files[0]){n.setState({file:e.target.files[0]});var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.handleSubmit=function(){var e=Object(C.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0}),void 0===B.getState().auth){e.next=16;break}if(a=new FormData,null===n.props.state.location||"new"===n.props.state.location.state){e.next=13;break}if(null==n.state.file){e.next=10;break}return a.append("mentorImage",n.state.file),e.next=8,A.a.put(B.getState().storageUrl+"/mentor/"+n.state.imageId,a,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){A.a.put(B.getState().apiUrl+"/mentor/"+n.props.state.location.state.mentor._id,n.state,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 8:e.next=11;break;case 10:n.setState({image:void 0},(function(){A.a.put(B.getState().apiUrl+"/mentor/"+n.props.state.location.state.mentor._id,n.state,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))}));case 11:e.next=16;break;case 13:return a.append("mentorImage",n.state.file),e.next=16,A.a.post(B.getState().storageUrl+"/mentor",a,{headers:{auth:B.getState().auth}}).then((function(e){console.log(e.data),e.data.status?n.setState({imageId:e.data.imageId,file:void 0,image:void 0},(function(){A.a.post(B.getState().apiUrl+"/mentor",n.state,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))})):n.setState({apiError:"could not upload image"})}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderDeleteButton=function(){if(null!==n.props.state.location&&"new"!==n.props.state.location.state)return r.a.createElement(O.a,{className:"m-3",color:"danger",onClick:function(){n.setState({isLoading:!0}),A.a.delete(B.getState().storageUrl+"/mentor/"+n.state.imageId,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?A.a.delete(B.getState().apiUrl+"/mentor/"+n.state._id,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({isLoading:!1,apiError:e.data.message})})).catch((function(e){n.setState({apiError:e})})):n.setState({isLoading:!1,apiError:"could not delete image"+e.data.message})}))}},"Delete")},n.onTagChange=function(e){var t=n.state.tags;t[e.target.name]=e.target.checked,n.setState({tags:t},(function(){console.log(n.state.tags)}))},n.renderTags=function(){if(null!==n.props.state.location&&"new"===n.props.state.location.state)return r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"left"}},"Tags"),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"whatsNew",id:"whatsNew",value:n.state.tags.whatsNew||"",onChange:n.onTagChange}),r.a.createElement(J.a,{for:"whatsNew"},"Whats new")),r.a.createElement(G.a,{className:"ml-4",row:!0},r.a.createElement(z.a,{type:"checkbox",name:"other",id:"other",value:n.state.tags.other||"",onChange:n.onTagChange}),r.a.createElement(J.a,{for:"other"},"Other")))},n.state={isLoading:!1,apiError:"",type:"Mentor",tags:{}},n.renderDeleteButton=n.renderDeleteButton.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement("h1",null,"Create New Mentor"),r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"400px"},src:this.state.image,alt:""}),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"name"},"Name"),r.a.createElement(z.a,{type:"text",name:"name",id:"name",placeholder:"Enter Mentor name",value:this.state.name||"",onChange:this.handleChange})),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"designation"},"Designation"),r.a.createElement(z.a,{type:"text",name:"designation",id:"designation",placeholder:"Enter designation",value:this.state.designation||"",onChange:this.handleChange}))),r.a.createElement(L.a,{lg:"1"}),r.a.createElement(L.a,{lg:"5",style:{marginLeft:"auto"}},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"type"},"Type"),r.a.createElement(z.a,{type:"select",name:"type",id:"type",placeholder:"Enter type",value:this.state.type||"",onChange:this.handleChange},r.a.createElement("option",null,"Mentor"),r.a.createElement("option",null,"Coach"))),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"type"},"Mentor Image"),r.a.createElement(z.a,{type:"file",name:"file",id:"file",onChange:this.handleFile})))),r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"description"},"Description"),r.a.createElement(z.a,{type:"textarea",name:"description",id:"description",placeholder:"Enter description",value:this.state.description||"",onChange:this.handleChange})),this.renderTags(),this.renderDeleteButton(),r.a.createElement(O.a,{className:"m-3",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToMentors(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.props.data.imageId&&A.a.get(B.getState().storageUrl+"/news/"+this.props.data.imageId,{headers:{auth:B.getState().auth}}).then((function(t){var a="data:"+t.headers["content-type"]+";base64,"+t.data;e.setState({image:a})})),r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement($.a,{src:this.state.image}),r.a.createElement(D.a,null,r.a.createElement(q.a,{style:{textAlign:"left"}},this.props.data.title),r.a.createElement(M.a,{style:{textAlign:"left"}},this.props.data.body),r.a.createElement(b.b,{to:{pathname:"whatsnew/edit",state:{whatsNew:this.props.data}}},r.a.createElement(O.a,null,"View")))))}}]),a}(r.a.Component),we=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.getState().auth){e.next=3;break}return e.next=3,A.a.get(B.getState().apiUrl+"/news",{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(n.setState({whatsNews:e.data.whatsNews}),n.setState({isLoading:!1})):(n.setState({apiError:e.data.message}),n.setState({isLoading:!1}))}));case 3:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={whatsNews:[],apiError:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e;return null!=this.state.whatsNews&&void 0!==this.state.whatsNews&&(e=this.state.whatsNews.map((function(e){return r.a.createElement(L.a,{lg:"3",key:e._id},r.a.createElement(ve,{data:e}))}))),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(b.b,{style:{marginLeft:"auto"},to:{pathname:"whatsnew/edit",state:"new"}},r.a.createElement(O.a,{className:"mt-2 mr-4",color:"primary"},"Create New WhatsNew"))),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Whats New!"),r.a.createElement(k.a,{className:"mt-3"},e),this.renderError()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.props.state.location||"new"===n.props.state.location.state){e.next=5;break}if(void 0===B.getState().auth){e.next=5;break}return n.setState({isLoading:!0}),e.next=5,A.a.get(B.getState().apiUrl+"/news/"+n.props.state.location.state.whatsNew._id,{headers:{auth:B.getState().auth}}).then(function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.status?(console.log(t.data.whatsNew),n.setState(t.data.whatsNew),n.props.state.location.state.whatsNew.imageId&&A.a.get(B.getState().storageUrl+"/news/"+n.props.state.location.state.whatsNew.imageId,{headers:{auth:B.getState().auth}}).then((function(e){var t="data:"+e.headers["content-type"]+";base64,"+e.data;n.setState({image:t})})),n.setState({isLoading:!1})):n.setState({apiError:t.data.message,isLoading:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirectToMentors=function(){return n.state.success?r.a.createElement(m.a,{to:"/whatsnew"}):r.a.createElement("p",null)},n.handleChange=function(e){n.setState(Object(H.a)({},e.target.name,e.target.value))},n.handleFile=function(e){if(e.target.files&&e.target.files[0]){n.setState({file:e.target.files[0]});var t=new FileReader;t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0])}},n.handleSubmit=function(e){n.setState({isLoading:!0});var t={};if(t.title=n.state.title,t.body=n.state.body,t.imageId=n.state.imageId,void 0!==B.getState().auth){var a=new FormData;null!==n.props.state.location&&"new"!==n.props.state.location.state?n.state.file?(a.append("whatsNewImage",n.state.file),A.a.put(B.getState().storageUrl+"/news/"+n.state.imageId,a,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(t.imageId=e.data.imageId,A.a.put(B.getState().apiUrl+"/news/"+n.props.state.location.state.whatsNew._id,t,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))):n.setState({apiError:"could not upload image",isLoading:!1})}))):A.a.put(B.getState().apiUrl+"/news/"+n.props.state.location.state.whatsNew._id,t,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})})):(a.append("whatsNewImage",n.state.file),A.a.post(B.getState().storageUrl+"/news",a,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?(t.imageId=e.data.imageId,A.a.post(B.getState().apiUrl+"/news",t,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({success:!0,isLoading:!1}):n.setState({apiError:e.data.message,isLoading:!1})}))):n.setState({apiError:"could not upload image",isLoading:!1})})))}},n.renderDeleteButton=function(){if(null!==n.props.state.location&&"new"!==n.props.state.location.state)return r.a.createElement(O.a,{className:"m-3",color:"danger",onClick:function(){n.setState({isLoading:!0}),A.a.delete(B.getState().apiUrl+"/news/"+n.state._id,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({isLoading:!1,success:!0}):n.setState({isLoading:!1,apiError:e.data.message})})).catch((function(e){n.setState({apiError:e})}))}},"Delete")},n.state={isLoading:!1,apiError:""},n.renderDeleteButton=n.renderDeleteButton.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement("h1",null,"Create Whats New!"),r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"400px"},src:this.state.image,alt:""}),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(k.a,null,r.a.createElement(L.a,{lg:"5"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"title"},"Title"),r.a.createElement(z.a,{type:"text",name:"title",id:"title",placeholder:"Enter Title for whats new",value:this.state.title||"",onChange:this.handleChange}))),r.a.createElement(L.a,{lg:"5",style:{marginLeft:"auto"}},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"type"},"Mentor Image"),r.a.createElement(z.a,{type:"file",name:"file",id:"file",onChange:this.handleFile}))),r.a.createElement(L.a,{lg:"12"},r.a.createElement(G.a,{row:!0,className:"mt-3"},r.a.createElement(J.a,{for:"body"},"Body"),r.a.createElement(z.a,{type:"textarea",rows:"5",name:"body",id:"body",placeholder:"Enter the content",value:this.state.body||"",onChange:this.handleChange})))),this.renderDeleteButton(),r.a.createElement(O.a,{className:"m-3",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null)),this.checkLogin(),this.redirectToMentors(),this.renderSpinner(),this.renderError())}}]),a}(r.a.Component),Ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.redirect=function(){if(n.state.success)return r.a.createElement(m.a,{to:"/admin"})},n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{className:"mt-3",color:"danger"},n.state.apiError)},n.renderApiResponse=function(){if(""!==n.state.apiResponse)return r.a.createElement(x.a,{className:"mt-3",color:"success"},n.state.apiResponse)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.handleChange=function(e){console.log(n.state),n.setState(Object(H.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){n.setState({apiError:"",apiResponse:"",isLoading:!0});var t={email:n.state.email,privilege:n.state.privilege};A.a.post(B.getState().apiUrl+"/admins",t,{headers:{auth:B.getState().auth}}).then((function(e){e.data.status?n.setState({apiResponse:"Admin added successfully",isLoading:!1}):n.setState({apiError:"could not add: "+e.data.message,isLoading:!1})}))},n.state={privilege:"admin",apiError:"",apiResponse:"",isLoading:!1},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n.redirect=n.redirect.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,{className:"mt-5"},r.a.createElement(k.a,null,r.a.createElement(L.a,{className:"col-lg-3"}),r.a.createElement(L.a,{className:"col-lg-6"},r.a.createElement(I.a,null,r.a.createElement(q.a,null),r.a.createElement(D.a,null,r.a.createElement("div",null,r.a.createElement("h2",null,"Add new Admin"),r.a.createElement(K.a,{className:"m-3"},r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"email"},"Email"),r.a.createElement(z.a,{type:"email",name:"email",id:"email",placeholder:"Enter email of the user",onChange:this.handleChange})),r.a.createElement(G.a,{row:!0},r.a.createElement(J.a,{for:"privilege"},"Privilege"),r.a.createElement(z.a,{type:"select",name:"privilege",id:"privilege",placeholder:"Enter privilege given to the user",onChange:this.handleChange},r.a.createElement("option",null,"admin"),r.a.createElement("option",null,"editor"))),r.a.createElement(O.a,{color:"primary",onClick:this.handleSubmit},"Submit")))))),r.a.createElement(L.a,{className:"col-lg-3"})),this.redirect(),this.renderError(),this.renderApiResponse(),this.renderSpinner(),this.checkLogin())}}]),a}(r.a.Component),xe=a(141),Ne=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.getState().auth){e.next=3;break}return e.next=3,A.a.get(B.getState().apiUrl+"/admins",{headers:{auth:B.getState().auth}}).then(function(){var e=Object(C.a)(y.a.mark((function e(t){var a,r,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.status){e.next=12;break}a=[],r=y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data.admins[n],e.next=3,A.a.get(B.getState().apiUrl+"/admins/"+t.data.admins[n].uid,{headers:{auth:B.getState().auth}}).then((function(e){r.name=e.data.admin.name,r.email=e.data.admin.email,r.phone=e.data.admin.phone,r.changedPrivilege=r.privileges}));case 3:a.push(r);case 4:case"end":return e.stop()}}),e)})),e.t0=y.a.keys(t.data.admins);case 4:if((e.t1=e.t0()).done){e.next=9;break}return s=e.t1.value,e.delegateYield(r(s),"t2",7);case 7:e.next=4;break;case 9:n.setState({admins:a,isLoading:!1}),e.next=14;break;case 12:n.setState({apiError:t.data.message}),n.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),n.renderError=function(){if(""!==n.state.apiError)return r.a.createElement(x.a,{color:"danger"},n.state.apiError)},n.renderApiResponse=function(){if(""!==n.state.apiResponse)return r.a.createElement(x.a,{className:"mt-3",color:"success"},n.state.apiResponse)},n.renderSpinner=function(){if(n.state.isLoading)return r.a.createElement(N.a,{color:"primary"})},n.checkLogin=function(){return void 0===B.getState().auth?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("p",null)},n.state={admins:[],apiError:"",apiResponse:"",isLoading:!0},n.checkLogin=n.checkLogin.bind(Object(d.a)(n)),n.renderError=n.renderError.bind(Object(d.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this;return null!=this.state.admins&&void 0!==this.state.admins&&(e=this.state.admins.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.phone),r.a.createElement("td",null,e.privileges),r.a.createElement("td",null,r.a.createElement(z.a,{type:"select",name:"privilege",id:"privilege",placeholder:"Enter privilege given to the user",value:e.changedPrivilege,onChange:function(e){var n=t.state.admins;n[a].changedPrivilege=e.target.value,t.setState({admins:n})}},r.a.createElement("option",null,"admin"),r.a.createElement("option",null,"editor"))),r.a.createElement("td",null,r.a.createElement(O.a,{color:"danger",className:"fa fa-trash",onClick:function(){t.setState({isLoading:!0,apiError:"",apiResponse:""}),A.a.delete(B.getState().apiUrl+"/admins/"+e.uid,{headers:{auth:B.getState().auth}}).then((function(e){(console.log(e.data),e.data.status)?(t.state.admins.splice(a,1),t.setState({isLoading:!1})):t.setState({isLoading:!0,apiError:"could not delete: "+e.data.message})}))}}),r.a.createElement(O.a,{color:"primary",className:"fa fa-edit ml-2",onClick:function(){t.setState({isLoading:!0,apiError:"",apiResponse:""}),A.a.put(B.getState().apiUrl+"/admins/"+e.uid,{privilege:t.state.admins[a].changedPrivilege},{headers:{auth:B.getState().auth}}).then((function(e){if(e.data.status){var n=t.state.admins;n[a].privileges=n[a].changedPrivilege,t.setState({admins:n}),t.setState({apiResponse:"Successfully changed",isLoading:!1})}else t.setState({apiError:"Could not change privilege: "+e.data.message,isLoading:!1})}))}})))}))),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(b.b,{style:{marginLeft:"auto"},to:{pathname:"admin/new",state:"new"}},r.a.createElement(O.a,{className:"mt-2 mr-4",color:"primary"},"Create New Admin"))),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("h1",{style:{margin:"auto"}},"Administrators"),r.a.createElement(k.a,{className:"mt-3"},r.a.createElement(xe.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SL no."),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Privileges"),r.a.createElement("th",null,"Change Privileges"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,e))),this.renderError(),this.renderApiResponse()),this.checkLogin(),this.renderSpinner())}}]),a}(r.a.Component),Le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).renderNav=function(){if("/storage"!==e.props.location.pathname)return r.a.createElement(v,null)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.renderNav(),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(m.a,{to:"/digest"})}}),r.a.createElement(m.b,{exact:!0,path:"/digest",render:function(e){return r.a.createElement(W,null)}}),r.a.createElement(m.b,{path:"/digest/edit",render:function(e){return r.a.createElement(ae,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(re,null)}}),r.a.createElement(m.b,{exact:!0,path:"/question",render:function(e){return r.a.createElement(ie,null)}}),r.a.createElement(m.b,{exact:!0,path:"/question/view",render:function(e){return r.a.createElement(ue,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/question/new",render:function(e){return r.a.createElement(me,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/storage",render:function(e){return r.a.createElement(de,null)}}),r.a.createElement(m.b,{exact:!0,path:"/course",render:function(e){return r.a.createElement(he,null)}}),r.a.createElement(m.b,{exact:!0,path:"/course/edit",render:function(e){return r.a.createElement(pe,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/course/viewSubModule",render:function(e){return r.a.createElement(Ee,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/mentor",render:function(e){return r.a.createElement(Se,null)}}),r.a.createElement(m.b,{exact:!0,path:"/mentor/edit",render:function(e){return r.a.createElement(be,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/whatsnew",render:function(e){return r.a.createElement(we,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/whatsnew/edit",render:function(e){return r.a.createElement(ye,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/admin/new",render:function(e){return r.a.createElement(Ce,{state:e})}}),r.a.createElement(m.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(Ne,{state:e})}})))}}]),a}(r.a.Component),ke=Object(m.g)(Object(F.b)((function(e){return{auth:e}}))(Le));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(F.a,{store:B},r.a.createElement(b.a,null,r.a.createElement(ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a(119)},72:function(e,t,a){},73:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.520c7868.chunk.js.map